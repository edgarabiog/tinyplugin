/*eslint-disable*/

/*!
 * Source version: 1.7.03 
 * Copyright (C) 2018 LoopIndex - All Rights Reserved
 * You may use, distribute and modify this code under the
 * terms of the LoopIndex Comments CKEditor plugin license.
 *
 * Open source libraries
 * jQuery scrollintoview plugin Copyright (c) 2011 Robert Koritnik https://github.com/litera/jquery-scrollintoview
 * MutationSummary copyright (C) Rafael Weinstein https://github.com/rafaelw/mutation-summary/
 * jQuery autogrow based on code by Jevin O. Sewaruth (https://github.com/jevin/Autogrow-Textarea)
 
 * You should have received a copy of the LoopIndex Comments CKEditor plugin license with
 * this file. If not, please write to: loopindex@gmail.com, or visit http://www.loopindex.com
 * written by (David *)Frenkiel (https://github.com/imdfl) 
 */!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var o;!function(){"use strict";
/*!
 * jQuery JavaScript Library v3.5.0 -ajax,-ajax/jsonp,-ajax/load,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-deprecated/ajax-event-alias,-effects,-effects/Tween,-effects/animatedSelector
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-04-10T15:07Z
 */!function(t){var e=window.LOOPINDEX;e&&"object"==typeof e||(e={});var n=window.LOOPINDEX=e;n.$&&n.$.fn&&n.$.fn.jquery||(n.$=t)}(function(n){var r=[],i=Object.getPrototypeOf,a=r.slice,s=r.flat?function(t){return r.flat.call(t)}:function(t){return r.concat.apply([],t)},u=r.push,l=r.indexOf,c={},d=c.toString,f=c.hasOwnProperty,p=f.toString,h=p.call(Object),g={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},v=function(t){return null!=t&&t===t.window},y=n.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function _(t,e,n){var o,r,i=(n=n||y).createElement("script");if(i.text=t,e)for(o in b)(r=e[o]||e.getAttribute&&e.getAttribute(o))&&i.setAttribute(o,r);n.head.appendChild(i).parentNode.removeChild(i)}function A(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[d.call(t)]||"object":typeof t}var E="3.5.0 -ajax,-ajax/jsonp,-ajax/load,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-deprecated/ajax-event-alias,-effects,-effects/Tween,-effects/animatedSelector",N=function(t,e){return new N.fn.init(t,e)};function x(t){var e=!!t&&"length"in t&&t.length,n=A(t);return!m(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}N.fn=N.prototype={jquery:E,constructor:N,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=N.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return N.each(this,t)},map:function(t){return this.pushStack(N.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(N.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(N.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},N.extend=N.fn.extend=function(){var t,e,n,o,r,i,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)o=t[e],"__proto__"!==e&&a!==o&&(l&&o&&(N.isPlainObject(o)||(r=Array.isArray(o)))?(n=a[e],i=r&&!Array.isArray(n)?[]:r||N.isPlainObject(n)?n:{},r=!1,a[e]=N.extend(l,i,o)):void 0!==o&&(a[e]=o));return a},N.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t))&&(!(e=i(t))||"function"==typeof(n=f.call(e,"constructor")&&e.constructor)&&p.call(n)===h)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){_(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,o=0;if(x(t))for(n=t.length;o<n&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(x(Object(t))?N.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},merge:function(t,e){for(var n=+e.length,o=0,r=t.length;o<n;o++)t[r++]=e[o];return t.length=r,t},grep:function(t,e,n){for(var o=[],r=0,i=t.length,a=!n;r<i;r++)!e(t[r],r)!==a&&o.push(t[r]);return o},map:function(t,e,n){var o,r,i=0,a=[];if(x(t))for(o=t.length;i<o;i++)null!=(r=e(t[i],i,n))&&a.push(r);else for(i in t)null!=(r=e(t[i],i,n))&&a.push(r);return s(a)},guid:1,support:g}),"function"==typeof Symbol&&(N.fn[Symbol.iterator]=r[Symbol.iterator]),N.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var C=
/*!
		 * Sizzle CSS Selector Engine v2.3.5
		 * https://sizzlejs.com/
		 *
		 * Copyright JS Foundation and other contributors
		 * Released under the MIT license
		 * https://js.foundation/
		 *
		 * Date: 2020-03-14
		 */
function(t){var e,n,o,r,i,a,s,u,l,c,d,f,p,h,g,m,v,y,b,_="sizzle"+1*new Date,A=t.document,E=0,N=0,x=ut(),C=ut(),w=ut(),S=ut(),T=function(t,e){return t===e&&(d=!0),0},O={}.hasOwnProperty,D=[],I=D.pop,L=D.push,k=D.push,P=D.slice,R=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+j+"*("+B+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+j+"*\\]",U=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(j+"+","g"),q=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),z=new RegExp("^"+j+"*,"+j+"*"),W=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),$=new RegExp(j+"|>"),V=new RegExp(U),G=new RegExp("^"+B+"$"),X={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ot=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){f()},at=_t((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{k.apply(D=P.call(A.childNodes),A.childNodes),D[A.childNodes.length].nodeType}catch(t){k={apply:D.length?function(t,e){L.apply(t,P.call(e))}:function(t,e){for(var n=t.length,o=0;t[n++]=e[o++];);t.length=n-1}}}function st(t,e,o,r){var i,s,l,c,d,h,v,y=e&&e.ownerDocument,A=e?e.nodeType:9;if(o=o||[],"string"!=typeof t||!t||1!==A&&9!==A&&11!==A)return o;if(!r&&(f(e),e=e||p,g)){if(11!==A&&(d=Z.exec(t)))if(i=d[1]){if(9===A){if(!(l=e.getElementById(i)))return o;if(l.id===i)return o.push(l),o}else if(y&&(l=y.getElementById(i))&&b(e,l)&&l.id===i)return o.push(l),o}else{if(d[2])return k.apply(o,e.getElementsByTagName(t)),o;if((i=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return k.apply(o,e.getElementsByClassName(i)),o}if(n.qsa&&!S[t+" "]&&(!m||!m.test(t))&&(1!==A||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===A&&($.test(t)||W.test(t))){for((y=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(ot,rt):e.setAttribute("id",c=_)),s=(h=a(t)).length;s--;)h[s]=(c?"#"+c:":scope")+" "+bt(h[s]);v=h.join(",")}try{return k.apply(o,y.querySelectorAll(v)),o}catch(e){S(t,!0)}finally{c===_&&e.removeAttribute("id")}}}return u(t.replace(q,"$1"),e,o,r)}function ut(){var t=[];return function e(n,r){return t.push(n+" ")>o.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function lt(t){return t[_]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var n=t.split("|"),r=n.length;r--;)o.attrHandle[n[r]]=e}function ft(t,e){var n=e&&t,o=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(o)return o;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return lt((function(e){return e=+e,lt((function(n,o){for(var r,i=t([],n.length,e),a=i.length;a--;)n[r=i[a]]&&(n[r]=!(o[r]=n[r]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},i=st.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!Y.test(e||n&&n.nodeName||"HTML")},f=st.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:A;return a!=p&&9===a.nodeType&&a.documentElement?(h=(p=a).documentElement,g=!i(p),A!=p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",it,!1):r.attachEvent&&r.attachEvent("onunload",it)),n.scope=ct((function(t){return h.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=ct((function(t){return h.appendChild(t).id=_,!p.getElementsByName||!p.getElementsByName(_).length})),n.getById?(o.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},o.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(o.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},o.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,o,r,i=e.getElementById(t);if(i){if((n=i.getAttributeNode("id"))&&n.value===t)return[i];for(r=e.getElementsByName(t),o=0;i=r[o++];)if((n=i.getAttributeNode("id"))&&n.value===t)return[i]}return[]}}),o.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,o=[],r=0,i=e.getElementsByTagName(t);if("*"===t){for(;n=i[r++];)1===n.nodeType&&o.push(n);return o}return i},o.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=Q.test(p.querySelectorAll))&&(ct((function(t){var e;h.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+M+")"),t.querySelectorAll("[id~="+_+"-]").length||m.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\["+j+"*name"+j+"*="+j+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),h.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=Q.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",U)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=Q.test(h.compareDocumentPosition),b=e||Q.test(h.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,o=e&&e.parentNode;return t===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):t.compareDocumentPosition&&16&t.compareDocumentPosition(o)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return d=!0,0;var o=!t.compareDocumentPosition-!e.compareDocumentPosition;return o||(1&(o=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===o?t==p||t.ownerDocument==A&&b(A,t)?-1:e==p||e.ownerDocument==A&&b(A,e)?1:c?R(c,t)-R(c,e):0:4&o?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,o=0,r=t.parentNode,i=e.parentNode,a=[t],s=[e];if(!r||!i)return t==p?-1:e==p?1:r?-1:i?1:c?R(c,t)-R(c,e):0;if(r===i)return ft(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[o]===s[o];)o++;return o?ft(a[o],s[o]):a[o]==A?-1:s[o]==A?1:0},p):p},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(f(t),n.matchesSelector&&g&&!S[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var o=y.call(t,e);if(o||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return o}catch(t){S(e,!0)}return st(e,p,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!=p&&f(t),b(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=p&&f(t);var r=o.attrHandle[e.toLowerCase()],i=r&&O.call(o.attrHandle,e.toLowerCase())?r(t,e,!g):void 0;return void 0!==i?i:n.attributes||!g?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},st.escape=function(t){return(t+"").replace(ot,rt)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,o=[],r=0,i=0;if(d=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(T),d){for(;e=t[i++];)e===t[i]&&(r=o.push(i));for(;r--;)t.splice(o[r],1)}return c=null,t},r=st.getText=function(t){var e,n="",o=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[o++];)n+=r(e);return n},(o=st.selectors={cacheLength:50,createPseudo:lt,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&V.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+j+")"+t+"("+j+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(o){var r=st.attr(o,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,o,r){var i="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===o&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,d,f,p,h,g=i!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(m){if(i){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===t&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&y){for(b=(p=(l=(c=(d=(f=m)[_]||(f[_]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===E&&l[1])&&l[2],f=p&&m.childNodes[p];f=++p&&f&&f[g]||(b=p=0)||h.pop();)if(1===f.nodeType&&++b&&f===e){c[t]=[E,p,b];break}}else if(y&&(b=p=(l=(c=(d=(f=e)[_]||(f[_]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===E&&l[1]),!1===b)for(;(f=++p&&f&&f[g]||(b=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&((c=(d=f[_]||(f[_]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]=[E,b]),f!==e)););return(b-=r)===o||b%o==0&&b/o>=0}}},PSEUDO:function(t,e){var n,r=o.pseudos[t]||o.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[_]?r(e):r.length>1?(n=[t,t,"",e],o.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var o,i=r(t,e),a=i.length;a--;)t[o=R(t,i[a])]=!(n[o]=i[a])})):function(t){return r(t,0,n)}):r}},pseudos:{not:lt((function(t){var e=[],n=[],o=s(t.replace(q,"$1"));return o[_]?lt((function(t,e,n,r){for(var i,a=o(t,null,r,[]),s=t.length;s--;)(i=a[s])&&(t[s]=!(e[s]=i))})):function(t,r,i){return e[0]=t,o(e,null,i,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return st(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:lt((function(t){return G.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===h},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!o.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var o=n<0?n+e:n>e?e:n;--o>=0;)t.push(o);return t})),gt:mt((function(t,e,n){for(var o=n<0?n+e:n;++o<e;)t.push(o);return t}))}}).pseudos.nth=o.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})o.pseudos[e]=ht(e);function yt(){}function bt(t){for(var e=0,n=t.length,o="";e<n;e++)o+=t[e].value;return o}function _t(t,e,n){var o=e.dir,r=e.next,i=r||o,a=n&&"parentNode"===i,s=N++;return e.first?function(e,n,r){for(;e=e[o];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,u){var l,c,d,f=[E,s];if(u){for(;e=e[o];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[o];)if(1===e.nodeType||a)if(c=(d=e[_]||(e[_]={}))[e.uniqueID]||(d[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[o]||e;else{if((l=c[i])&&l[0]===E&&l[1]===s)return f[2]=l[2];if(c[i]=f,f[2]=t(e,n,u))return!0}return!1}}function At(t){return t.length>1?function(e,n,o){for(var r=t.length;r--;)if(!t[r](e,n,o))return!1;return!0}:t[0]}function Et(t,e,n,o,r){for(var i,a=[],s=0,u=t.length,l=null!=e;s<u;s++)(i=t[s])&&(n&&!n(i,o,r)||(a.push(i),l&&e.push(s)));return a}function Nt(t,e,n,o,r,i){return o&&!o[_]&&(o=Nt(o)),r&&!r[_]&&(r=Nt(r,i)),lt((function(i,a,s,u){var l,c,d,f=[],p=[],h=a.length,g=i||function(t,e,n){for(var o=0,r=e.length;o<r;o++)st(t,e[o],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!i&&e?g:Et(g,f,t,s,u),v=n?r||(i?t:h||o)?[]:a:m;if(n&&n(m,v,s,u),o)for(l=Et(v,p),o(l,[],s,u),c=l.length;c--;)(d=l[c])&&(v[p[c]]=!(m[p[c]]=d));if(i){if(r||t){if(r){for(l=[],c=v.length;c--;)(d=v[c])&&l.push(m[c]=d);r(null,v=[],l,u)}for(c=v.length;c--;)(d=v[c])&&(l=r?R(i,d):f[c])>-1&&(i[l]=!(a[l]=d))}}else v=Et(v===a?v.splice(h,v.length):v),r?r(null,a,v,u):k.apply(a,v)}))}function xt(t){for(var e,n,r,i=t.length,a=o.relative[t[0].type],s=a||o.relative[" "],u=a?1:0,c=_t((function(t){return t===e}),s,!0),d=_t((function(t){return R(e,t)>-1}),s,!0),f=[function(t,n,o){var r=!a&&(o||n!==l)||((e=n).nodeType?c(t,n,o):d(t,n,o));return e=null,r}];u<i;u++)if(n=o.relative[t[u].type])f=[_t(At(f),n)];else{if((n=o.filter[t[u].type].apply(null,t[u].matches))[_]){for(r=++u;r<i&&!o.relative[t[r].type];r++);return Nt(u>1&&At(f),u>1&&bt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(q,"$1"),n,u<r&&xt(t.slice(u,r)),r<i&&xt(t=t.slice(r)),r<i&&bt(t))}f.push(n)}return At(f)}return yt.prototype=o.filters=o.pseudos,o.setFilters=new yt,a=st.tokenize=function(t,e){var n,r,i,a,s,u,l,c=C[t+" "];if(c)return e?0:c.slice(0);for(s=t,u=[],l=o.preFilter;s;){for(a in n&&!(r=z.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(i=[])),n=!1,(r=W.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(q," ")}),s=s.slice(n.length)),o.filter)!(r=X[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):C(t,u).slice(0)},s=st.compile=function(t,e){var n,r=[],i=[],s=w[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=xt(e[n]))[_]?r.push(s):i.push(s);(s=w(t,function(t,e){var n=e.length>0,r=t.length>0,i=function(i,a,s,u,c){var d,h,m,v=0,y="0",b=i&&[],_=[],A=l,N=i||r&&o.find.TAG("*",c),x=E+=null==A?1:Math.random()||.1,C=N.length;for(c&&(l=a==p||a||c);y!==C&&null!=(d=N[y]);y++){if(r&&d){for(h=0,a||d.ownerDocument==p||(f(d),s=!g);m=t[h++];)if(m(d,a||p,s)){u.push(d);break}c&&(E=x)}n&&((d=!m&&d)&&v--,i&&b.push(d))}if(v+=y,n&&y!==v){for(h=0;m=e[h++];)m(b,_,a,s);if(i){if(v>0)for(;y--;)b[y]||_[y]||(_[y]=I.call(u));_=Et(_)}k.apply(u,_),c&&!i&&_.length>0&&v+e.length>1&&st.uniqueSort(u)}return c&&(E=x,l=A),b};return n?lt(i):i}(i,r))).selector=t}return s},u=st.select=function(t,e,n,r){var i,u,l,c,d,f="function"==typeof t&&t,p=!r&&a(t=f.selector||t);if(n=n||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===e.nodeType&&g&&o.relative[u[1].type]){if(!(e=(o.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(i=X.needsContext.test(t)?0:u.length;i--&&(l=u[i],!o.relative[c=l.type]);)if((d=o.find[c])&&(r=d(l.matches[0].replace(et,nt),tt.test(u[0].type)&&vt(e.parentNode)||e))){if(u.splice(i,1),!(t=r.length&&bt(u)))return k.apply(n,r),n;break}}return(f||s(t,p))(r,e,!g,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=_.split("").sort(T).join("")===_,n.detectDuplicates=!!d,f(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||dt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||dt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||dt(M,(function(t,e,n){var o;if(!n)return!0===t[e]?e.toLowerCase():(o=t.getAttributeNode(e))&&o.specified?o.value:null})),st}(n);N.find=C,N.expr=C.selectors,N.expr[":"]=N.expr.pseudos,N.uniqueSort=N.unique=C.uniqueSort,N.text=C.getText,N.isXMLDoc=C.isXML,N.contains=C.contains,N.escapeSelector=C.escape;var w=function(t,e,n){for(var o=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&N(t).is(n))break;o.push(t)}return o},S=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},T=N.expr.match.needsContext;function O(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(t,e,n){return m(e)?N.grep(t,(function(t,o){return!!e.call(t,o,t)!==n})):e.nodeType?N.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?N.grep(t,(function(t){return l.call(e,t)>-1!==n})):N.filter(e,t,n)}N.filter=function(t,e,n){var o=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===o.nodeType?N.find.matchesSelector(o,t)?[o]:[]:N.find.matches(t,N.grep(e,(function(t){return 1===t.nodeType})))},N.fn.extend({find:function(t){var e,n,o=this.length,r=this;if("string"!=typeof t)return this.pushStack(N(t).filter((function(){for(e=0;e<o;e++)if(N.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<o;e++)N.find(t,r[e],n);return o>1?N.uniqueSort(n):n},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&T.test(t)?N(t):t||[],!1).length}});var L,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(N.fn.init=function(t,e,n){var o,r;if(!t)return this;if(n=n||L,"string"==typeof t){if(!(o="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:k.exec(t))||!o[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(o[1]){if(e=e instanceof N?e[0]:e,N.merge(this,N.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),D.test(o[1])&&N.isPlainObject(e))for(o in e)m(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return(r=y.getElementById(o[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==n.ready?n.ready(t):t(N):N.makeArray(t,this)}).prototype=N.fn,L=N(y);var P=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function M(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}N.fn.extend({has:function(t){var e=N(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(N.contains(this,e[t]))return!0}))},closest:function(t,e){var n,o=0,r=this.length,i=[],a="string"!=typeof t&&N(t);if(!T.test(t))for(;o<r;o++)for(n=this[o];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&N.find.matchesSelector(n,t))){i.push(n);break}return this.pushStack(i.length>1?N.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?l.call(N(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(N.uniqueSort(N.merge(this.get(),N(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),N.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return w(t,"parentNode")},parentsUntil:function(t,e,n){return w(t,"parentNode",n)},next:function(t){return M(t,"nextSibling")},prev:function(t){return M(t,"previousSibling")},nextAll:function(t){return w(t,"nextSibling")},prevAll:function(t){return w(t,"previousSibling")},nextUntil:function(t,e,n){return w(t,"nextSibling",n)},prevUntil:function(t,e,n){return w(t,"previousSibling",n)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return null!=t.contentDocument&&i(t.contentDocument)?t.contentDocument:(O(t,"template")&&(t=t.content||t),N.merge([],t.childNodes))}},(function(t,e){N.fn[t]=function(n,o){var r=N.map(this,e,n);return"Until"!==t.slice(-5)&&(o=n),o&&"string"==typeof o&&(r=N.filter(o,r)),this.length>1&&(R[t]||N.uniqueSort(r),P.test(t)&&r.reverse()),this.pushStack(r)}}));var j=/[^\x20\t\r\n\f]+/g;function B(t){return t}function F(t){throw t}function U(t,e,n,o){var r;try{t&&m(r=t.promise)?r.call(t).done(e).fail(n):t&&m(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(o))}catch(t){n.apply(void 0,[t])}}N.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return N.each(t.match(j)||[],(function(t,n){e[n]=!0})),e}(t):N.extend({},t);var e,n,o,r,i=[],a=[],s=-1,u=function(){for(r=r||t.once,o=e=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=i.length,n=!1);t.memory||(n=!1),e=!1,r&&(i=n?[]:"")},l={add:function(){return i&&(n&&!e&&(s=i.length-1,a.push(n)),function e(n){N.each(n,(function(n,o){m(o)?t.unique&&l.has(o)||i.push(o):o&&o.length&&"string"!==A(o)&&e(o)}))}(arguments),n&&!e&&u()),this},remove:function(){return N.each(arguments,(function(t,e){for(var n;(n=N.inArray(e,i,n))>-1;)i.splice(n,1),n<=s&&s--})),this},has:function(t){return t?N.inArray(t,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return r=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return r=a=[],n||e||(i=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!o}};return l},N.extend({Deferred:function(t){var e=[["notify","progress",N.Callbacks("memory"),N.Callbacks("memory"),2],["resolve","done",N.Callbacks("once memory"),N.Callbacks("once memory"),0,"resolved"],["reject","fail",N.Callbacks("once memory"),N.Callbacks("once memory"),1,"rejected"]],o="pending",r={state:function(){return o},always:function(){return i.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return N.Deferred((function(n){N.each(e,(function(e,o){var r=m(t[o[4]])&&t[o[4]];i[o[1]]((function(){var t=r&&r.apply(this,arguments);t&&m(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,o,r){var i=0;function a(t,e,o,r){return function(){var s=this,u=arguments,l=function(){var n,l;if(!(t<i)){if((n=o.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"==typeof n||"function"==typeof n)&&n.then,m(l)?r?l.call(n,a(i,e,B,r),a(i,e,F,r)):(i++,l.call(n,a(i,e,B,r),a(i,e,F,r),a(i,e,B,e.notifyWith))):(o!==B&&(s=void 0,u=[n]),(r||e.resolveWith)(s,u))}},c=r?l:function(){try{l()}catch(n){N.Deferred.exceptionHook&&N.Deferred.exceptionHook(n,c.stackTrace),t+1>=i&&(o!==F&&(s=void 0,u=[n]),e.rejectWith(s,u))}};t?c():(N.Deferred.getStackHook&&(c.stackTrace=N.Deferred.getStackHook()),n.setTimeout(c))}}return N.Deferred((function(n){e[0][3].add(a(0,n,m(r)?r:B,n.notifyWith)),e[1][3].add(a(0,n,m(t)?t:B)),e[2][3].add(a(0,n,m(o)?o:F))})).promise()},promise:function(t){return null!=t?N.extend(t,r):r}},i={};return N.each(e,(function(t,n){var a=n[2],s=n[5];r[n[1]]=a.add,s&&a.add((function(){o=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(n[3].fire),i[n[0]]=function(){return i[n[0]+"With"](this===i?void 0:this,arguments),this},i[n[0]+"With"]=a.fireWith})),r.promise(i),t&&t.call(i,i),i},when:function(t){var e=arguments.length,n=e,o=Array(n),r=a.call(arguments),i=N.Deferred(),s=function(t){return function(n){o[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||i.resolveWith(o,r)}};if(e<=1&&(U(t,i.done(s(n)).resolve,i.reject,!e),"pending"===i.state()||m(r[n]&&r[n].then)))return i.then();for(;n--;)U(r[n],s(n),i.reject);return i.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;N.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&H.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},N.readyException=function(t){n.setTimeout((function(){throw t}))};var q=N.Deferred();function z(){y.removeEventListener("DOMContentLoaded",z),n.removeEventListener("load",z),N.ready()}N.fn.ready=function(t){return q.then(t).catch((function(t){N.readyException(t)})),this},N.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--N.readyWait:N.isReady)||(N.isReady=!0,!0!==t&&--N.readyWait>0||q.resolveWith(y,[N]))}}),N.ready.then=q.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?n.setTimeout(N.ready):(y.addEventListener("DOMContentLoaded",z),n.addEventListener("load",z));var W=function(t,e,n,o,r,i,a){var s=0,u=t.length,l=null==n;if("object"===A(n))for(s in r=!0,n)W(t,e,s,n[s],!0,i,a);else if(void 0!==o&&(r=!0,m(o)||(a=!0),l&&(a?(e.call(t,o),e=null):(l=e,e=function(t,e,n){return l.call(N(t),n)})),e))for(;s<u;s++)e(t[s],n,a?o:o.call(t[s],s,e(t[s],n)));return r?t:l?e.call(t):u?e(t[0],n):i},$=/^-ms-/,V=/-([a-z])/g;function G(t,e){return e.toUpperCase()}function X(t){return t.replace($,"ms-").replace(V,G)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function K(){this.expando=N.expando+K.uid++}K.uid=1,K.prototype={cache:function(t){var e=t[this.expando];return e||(e=Object.create(null),Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var o,r=this.cache(t);if("string"==typeof e)r[X(e)]=n;else for(o in e)r[X(o)]=e[o];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,o=t[this.expando];if(void 0!==o){if(void 0!==e){n=(e=Array.isArray(e)?e.map(X):(e=X(e))in o?[e]:e.match(j)||[]).length;for(;n--;)delete o[e[n]]}(void 0===e||N.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!N.isEmptyObject(e)}};var J=new K,Q=new K,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function et(t,e,n){var o;if(void 0===n&&1===t.nodeType)if(o="data-"+e.replace(tt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(o))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Z.test(t)?JSON.parse(t):t)}(n)}catch(t){}Q.set(t,e,n)}else n=void 0;return n}N.extend({hasData:function(t){return Q.hasData(t)||J.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),N.fn.extend({data:function(t,e){var n,o,r,i=this[0],a=i&&i.attributes;if(void 0===t){if(this.length&&(r=Q.get(i),1===i.nodeType&&!J.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(o=a[n].name).indexOf("data-")&&(o=X(o.slice(5)),et(i,o,r[o]));J.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){Q.set(this,t)})):W(this,(function(e){var n;if(i&&void 0===e)return void 0!==(n=Q.get(i,t))?n:void 0!==(n=et(i,t))?n:void 0;this.each((function(){Q.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Q.remove(this,t)}))}}),N.extend({queue:function(t,e,n){var o;if(t)return e=(e||"fx")+"queue",o=J.get(t,e),n&&(!o||Array.isArray(n)?o=J.access(t,e,N.makeArray(n)):o.push(n)),o||[]},dequeue:function(t,e){e=e||"fx";var n=N.queue(t,e),o=n.length,r=n.shift(),i=N._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),o--),r&&("fx"===e&&n.unshift("inprogress"),delete i.stop,r.call(t,(function(){N.dequeue(t,e)}),i)),!o&&i&&i.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:N.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",n])}))})}}),N.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?N.queue(this[0],t):void 0===e?this:this.each((function(){var n=N.queue(this,t,e);N._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&N.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){N.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,o=1,r=N.Deferred(),i=this,a=this.length,s=function(){--o||r.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=J.get(i[a],t+"queueHooks"))&&n.empty&&(o++,n.empty.add(s));return s(),r.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],it=y.documentElement,at=function(t){return N.contains(t.ownerDocument,t)},st={composed:!0};it.getRootNode&&(at=function(t){return N.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var ut=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===N.css(t,"display")};function lt(t,e,n,o){var r,i,a=20,s=o?function(){return o.cur()}:function(){return N.css(t,e,"")},u=s(),l=n&&n[3]||(N.cssNumber[e]?"":"px"),c=t.nodeType&&(N.cssNumber[e]||"px"!==l&&+u)&&ot.exec(N.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)N.style(t,e,c+l),(1-i)*(1-(i=s()/u||.5))<=0&&(a=0),c/=i;c*=2,N.style(t,e,c+l),n=n||[]}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],o&&(o.unit=l,o.start=c,o.end=r)),r}var ct={};function dt(t){var e,n=t.ownerDocument,o=t.nodeName,r=ct[o];return r||(e=n.body.appendChild(n.createElement(o)),r=N.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ct[o]=r,r)}function ft(t,e){for(var n,o,r=[],i=0,a=t.length;i<a;i++)(o=t[i]).style&&(n=o.style.display,e?("none"===n&&(r[i]=J.get(o,"display")||null,r[i]||(o.style.display="")),""===o.style.display&&ut(o)&&(r[i]=dt(o))):"none"!==n&&(r[i]="none",J.set(o,"display",n)));for(i=0;i<a;i++)null!=r[i]&&(t[i].style.display=r[i]);return t}N.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ut(this)?N(this).show():N(this).hide()}))}});var pt,ht,gt=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i;pt=y.createDocumentFragment().appendChild(y.createElement("div")),(ht=y.createElement("input")).setAttribute("type","radio"),ht.setAttribute("checked","checked"),ht.setAttribute("name","t"),pt.appendChild(ht),g.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",g.option=!!pt.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&O(t,e)?N.merge([t],n):n}function _t(t,e){for(var n=0,o=t.length;n<o;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,g.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var At=/<|&#?\w+;/;function Et(t,e,n,o,r){for(var i,a,s,u,l,c,d=e.createDocumentFragment(),f=[],p=0,h=t.length;p<h;p++)if((i=t[p])||0===i)if("object"===A(i))N.merge(f,i.nodeType?[i]:i);else if(At.test(i)){for(a=a||d.appendChild(e.createElement("div")),s=(mt.exec(i)||["",""])[1].toLowerCase(),u=yt[s]||yt._default,a.innerHTML=u[1]+N.htmlPrefilter(i)+u[2],c=u[0];c--;)a=a.lastChild;N.merge(f,a.childNodes),(a=d.firstChild).textContent=""}else f.push(e.createTextNode(i));for(d.textContent="",p=0;i=f[p++];)if(o&&N.inArray(i,o)>-1)r&&r.push(i);else if(l=at(i),a=bt(d.appendChild(i),"script"),l&&_t(a),n)for(c=0;i=a[c++];)vt.test(i.type||"")&&n.push(i);return d}var Nt=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ct=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function St(){return!1}function Tt(t,e){return t===function(){try{return y.activeElement}catch(t){}}()==("focus"===e)}function Ot(t,e,n,o,r,i){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(o=o||n,n=void 0),e)Ot(t,s,n,o,e[s],i);return t}if(null==o&&null==r?(r=n,o=n=void 0):null==r&&("string"==typeof n?(r=o,o=void 0):(r=o,o=n,n=void 0)),!1===r)r=St;else if(!r)return t;return 1===i&&(a=r,(r=function(t){return N().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=N.guid++)),t.each((function(){N.event.add(this,e,r,o,n)}))}function Dt(t,e,n){n?(J.set(t,e,!1),N.event.add(t,e,{namespace:!1,handler:function(t){var o,r,i=J.get(this,e);if(1&t.isTrigger&&this[e]){if(i.length)(N.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=a.call(arguments),J.set(this,e,i),o=n(this,e),this[e](),i!==(r=J.get(this,e))||o?J.set(this,e,!1):r={},i!==r)return t.stopImmediatePropagation(),t.preventDefault(),r.value}else i.length&&(J.set(this,e,{value:N.event.trigger(N.extend(i[0],N.Event.prototype),i.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&N.event.add(t,e,wt)}N.event={global:{},add:function(t,e,n,o,r){var i,a,s,u,l,c,d,f,p,h,g,m=J.get(t);if(Y(t))for(n.handler&&(n=(i=n).handler,r=i.selector),r&&N.find.matchesSelector(it,r),n.guid||(n.guid=N.guid++),(u=m.events)||(u=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(e){return void 0!==N&&N.event.triggered!==e.type?N.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(j)||[""]).length;l--;)p=g=(s=Ct.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=N.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=N.event.special[p]||{},c=N.extend({type:p,origType:g,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&N.expr.match.needsContext.test(r),namespace:h.join(".")},i),(f=u[p])||((f=u[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,o,h,a)||t.addEventListener&&t.addEventListener(p,a)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),N.event.global[p]=!0)},remove:function(t,e,n,o,r){var i,a,s,u,l,c,d,f,p,h,g,m=J.hasData(t)&&J.get(t);if(m&&(u=m.events)){for(l=(e=(e||"").match(j)||[""]).length;l--;)if(p=g=(s=Ct.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=N.event.special[p]||{},f=u[p=(o?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=f.length;i--;)c=f[i],!r&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||o&&o!==c.selector&&("**"!==o||!c.selector)||(f.splice(i,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(t,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(t,h,m.handle)||N.removeEvent(t,p,m.handle),delete u[p])}else for(p in u)N.event.remove(t,p+e[l],n,o,!0);N.isEmptyObject(u)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,o,r,i,a,s=new Array(arguments.length),u=N.event.fix(t),l=(J.get(this,"events")||Object.create(null))[u.type]||[],c=N.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=N.event.handlers.call(this,u,l),e=0;(r=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==i.namespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,void 0!==(o=((N.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s))&&!1===(u.result=o)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,o,r,i,a,s=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(i=[],a={},n=0;n<u;n++)void 0===a[r=(o=e[n]).selector+" "]&&(a[r]=o.needsContext?N(r,this).index(l)>-1:N.find(r,this,null,[l]).length),a[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return l=this,u<e.length&&s.push({elem:l,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(N.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[N.expando]?t:new N.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&O(e,"input")&&Dt(e,"click",wt),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&O(e,"input")&&Dt(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&O(e,"input")&&J.get(e,"click")||O(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},N.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},N.Event=function(t,e){if(!(this instanceof N.Event))return new N.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&N.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[N.expando]=!0},N.Event.prototype={constructor:N.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},N.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Nt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},N.event.addProp),N.each({focus:"focusin",blur:"focusout"},(function(t,e){N.event.special[t]={setup:function(){return Dt(this,t,Tt),!1},trigger:function(){return Dt(this,t),!0},delegateType:e}})),N.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){N.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,o=this,r=t.relatedTarget,i=t.handleObj;return r&&(r===o||N.contains(o,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),N.fn.extend({on:function(t,e,n,o){return Ot(this,t,e,n,o)},one:function(t,e,n,o){return Ot(this,t,e,n,o,1)},off:function(t,e,n){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,N(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each((function(){N.event.remove(this,t,n,e)}))}});var It=/<script|<style|<link/i,Lt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pt(t,e){return O(t,"table")&&O(11!==e.nodeType?e:e.firstChild,"tr")&&N(t).children("tbody")[0]||t}function Rt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Mt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function jt(t,e){var n,o,r,i,a,s;if(1===e.nodeType){if(J.hasData(t)&&(s=J.get(t).events))for(r in J.remove(e,"handle events"),s)for(n=0,o=s[r].length;n<o;n++)N.event.add(e,r,s[r][n]);Q.hasData(t)&&(i=Q.access(t),a=N.extend({},i),Q.set(e,a))}}function Bt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&gt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ft(t,e,n,o){e=s(e);var r,i,a,u,l,c,d=0,f=t.length,p=f-1,h=e[0],v=m(h);if(v||f>1&&"string"==typeof h&&!g.checkClone&&Lt.test(h))return t.each((function(r){var i=t.eq(r);v&&(e[0]=h.call(this,r,i.html())),Ft(i,e,n,o)}));if(f&&(i=(r=Et(e,t[0].ownerDocument,!1,t,o)).firstChild,1===r.childNodes.length&&(r=i),i||o)){for(u=(a=N.map(bt(r,"script"),Rt)).length;d<f;d++)l=r,d!==p&&(l=N.clone(l,!0,!0),u&&N.merge(a,bt(l,"script"))),n.call(t[d],l,d);if(u)for(c=a[a.length-1].ownerDocument,N.map(a,Mt),d=0;d<u;d++)l=a[d],vt.test(l.type||"")&&!J.access(l,"globalEval")&&N.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?N._evalUrl&&!l.noModule&&N._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):_(l.textContent.replace(kt,""),l,c))}return t}function Ut(t,e,n){for(var o,r=e?N.filter(e,t):t,i=0;null!=(o=r[i]);i++)n||1!==o.nodeType||N.cleanData(bt(o)),o.parentNode&&(n&&at(o)&&_t(bt(o,"script")),o.parentNode.removeChild(o));return t}N.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var o,r,i,a,s=t.cloneNode(!0),u=at(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||N.isXMLDoc(t)))for(a=bt(s),o=0,r=(i=bt(t)).length;o<r;o++)Bt(i[o],a[o]);if(e)if(n)for(i=i||bt(t),a=a||bt(s),o=0,r=i.length;o<r;o++)jt(i[o],a[o]);else jt(t,s);return(a=bt(s,"script")).length>0&&_t(a,!u&&bt(t,"script")),s},cleanData:function(t){for(var e,n,o,r=N.event.special,i=0;void 0!==(n=t[i]);i++)if(Y(n)){if(e=n[J.expando]){if(e.events)for(o in e.events)r[o]?N.event.remove(n,o):N.removeEvent(n,o,e.handle);n[J.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),N.fn.extend({detach:function(t){return Ut(this,t,!0)},remove:function(t){return Ut(this,t)},text:function(t){return W(this,(function(t){return void 0===t?N.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ft(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)}))},prepend:function(){return Ft(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ft(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ft(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(N.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return N.clone(this,t,e)}))},html:function(t){return W(this,(function(t){var e=this[0]||{},n=0,o=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!It.test(t)&&!yt[(mt.exec(t)||["",""])[1].toLowerCase()]){t=N.htmlPrefilter(t);try{for(;n<o;n++)1===(e=this[n]||{}).nodeType&&(N.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,(function(e){var n=this.parentNode;N.inArray(this,t)<0&&(N.cleanData(bt(this)),n&&n.replaceChild(e,this))}),t)}}),N.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){N.fn[t]=function(t){for(var n,o=[],r=N(t),i=r.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),N(r[a])[e](n),u.apply(o,n.get());return this.pushStack(o)}}));var Ht=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),qt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},zt=function(t,e,n){var o,r,i={};for(r in e)i[r]=t.style[r],t.style[r]=e[r];for(r in o=n.call(t),e)t.style[r]=i[r];return o},Wt=new RegExp(rt.join("|"),"i");function $t(t,e,n){var o,r,i,a,s=t.style;return(n=n||qt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||at(t)||(a=N.style(t,e)),!g.pixelBoxStyles()&&Ht.test(a)&&Wt.test(e)&&(o=s.width,r=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=o,s.minWidth=r,s.maxWidth=i)),void 0!==a?a+"":a}function Vt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(l).appendChild(c);var t=n.getComputedStyle(c);o="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",a=36===e(t.right),r=36===e(t.width),c.style.position="absolute",i=12===e(c.offsetWidth/3),it.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var o,r,i,a,s,u,l=y.createElement("div"),c=y.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,N.extend(g,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,e,o,r;return null==s&&(t=y.createElement("table"),e=y.createElement("tr"),o=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",o.style.height="9px",it.appendChild(t).appendChild(e).appendChild(o),r=n.getComputedStyle(e),s=parseInt(r.height)>3,it.removeChild(t)),s}}))}();var Gt=["Webkit","Moz","ms"],Xt=y.createElement("div").style,Yt={};function Kt(t){var e=N.cssProps[t]||Yt[t];return e||(t in Xt?t:Yt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Gt.length;n--;)if((t=Gt[n]+e)in Xt)return t}(t)||t)}var Jt=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Zt={position:"absolute",visibility:"hidden",display:"block"},te={letterSpacing:"0",fontWeight:"400"};function ee(t,e,n){var o=ot.exec(e);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):e}function ne(t,e,n,o,r,i){var a="width"===e?1:0,s=0,u=0;if(n===(o?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=N.css(t,n+rt[a],!0,r)),o?("content"===n&&(u-=N.css(t,"padding"+rt[a],!0,r)),"margin"!==n&&(u-=N.css(t,"border"+rt[a]+"Width",!0,r))):(u+=N.css(t,"padding"+rt[a],!0,r),"padding"!==n?u+=N.css(t,"border"+rt[a]+"Width",!0,r):s+=N.css(t,"border"+rt[a]+"Width",!0,r));return!o&&i>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-i-u-s-.5))||0),u}function oe(t,e,n){var o=qt(t),r=(!g.boxSizingReliable()||n)&&"border-box"===N.css(t,"boxSizing",!1,o),i=r,a=$t(t,e,o),s="offset"+e[0].toUpperCase()+e.slice(1);if(Ht.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&O(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===N.css(t,"display",!1,o))&&t.getClientRects().length&&(r="border-box"===N.css(t,"boxSizing",!1,o),(i=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+ne(t,e,n||(r?"border":"content"),i,o,a)+"px"}N.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=$t(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,i,a,s=X(e),u=Qt.test(e),l=t.style;if(u||(e=Kt(s)),a=N.cssHooks[e]||N.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,o))?r:l[e];"string"===(i=typeof n)&&(r=ot.exec(n))&&r[1]&&(n=lt(t,e,r),i="number"),null!=n&&n==n&&("number"!==i||u||(n+=r&&r[3]||(N.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,o))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,o){var r,i,a,s=X(e);return Qt.test(e)||(e=Kt(s)),(a=N.cssHooks[e]||N.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=$t(t,e,o)),"normal"===r&&e in te&&(r=te[e]),""===n||n?(i=parseFloat(r),!0===n||isFinite(i)?i||0:r):r}}),N.each(["height","width"],(function(t,e){N.cssHooks[e]={get:function(t,n,o){if(n)return!Jt.test(N.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?oe(t,e,o):zt(t,Zt,(function(){return oe(t,e,o)}))},set:function(t,n,o){var r,i=qt(t),a=!g.scrollboxSize()&&"absolute"===i.position,s=(a||o)&&"border-box"===N.css(t,"boxSizing",!1,i),u=o?ne(t,e,o,s,i):0;return s&&a&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(i[e])-ne(t,e,"border",!1,i)-.5)),u&&(r=ot.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=N.css(t,e)),ee(0,n,u)}}})),N.cssHooks.marginLeft=Vt(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat($t(t,"marginLeft"))||t.getBoundingClientRect().left-zt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),N.each({margin:"",padding:"",border:"Width"},(function(t,e){N.cssHooks[t+e]={expand:function(n){for(var o=0,r={},i="string"==typeof n?n.split(" "):[n];o<4;o++)r[t+rt[o]+e]=i[o]||i[o-2]||i[0];return r}},"margin"!==t&&(N.cssHooks[t+e].set=ee)})),N.fn.extend({css:function(t,e){return W(this,(function(t,e,n){var o,r,i={},a=0;if(Array.isArray(e)){for(o=qt(t),r=e.length;a<r;a++)i[e[a]]=N.css(t,e[a],!1,o);return i}return void 0!==n?N.style(t,e,n):N.css(t,e)}),t,e,arguments.length>1)}}),N.fn.delay=function(t,e){return t=N.fx&&N.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,o){var r=n.setTimeout(e,t);o.stop=function(){n.clearTimeout(r)}}))},function(){var t=y.createElement("input"),e=y.createElement("select").appendChild(y.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=y.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var re,ie=N.expr.attrHandle;N.fn.extend({attr:function(t,e){return W(this,N.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){N.removeAttr(this,t)}))}}),N.extend({attr:function(t,e,n){var o,r,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===t.getAttribute?N.prop(t,e,n):(1===i&&N.isXMLDoc(t)||(r=N.attrHooks[e.toLowerCase()]||(N.expr.match.bool.test(e)?re:void 0)),void 0!==n?null===n?void N.removeAttr(t,e):r&&"set"in r&&void 0!==(o=r.set(t,n,e))?o:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(o=r.get(t,e))?o:null==(o=N.find.attr(t,e))?void 0:o)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&O(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,o=0,r=e&&e.match(j);if(r&&1===t.nodeType)for(;n=r[o++];)t.removeAttribute(n)}}),re={set:function(t,e,n){return!1===e?N.removeAttr(t,n):t.setAttribute(n,n),n}},N.each(N.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ie[e]||N.find.attr;ie[e]=function(t,e,o){var r,i,a=e.toLowerCase();return o||(i=ie[a],ie[a]=r,r=null!=n(t,e,o)?a:null,ie[a]=i),r}}));var ae=/^(?:input|select|textarea|button)$/i,se=/^(?:a|area)$/i;function ue(t){return(t.match(j)||[]).join(" ")}function le(t){return t.getAttribute&&t.getAttribute("class")||""}function ce(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}N.fn.extend({prop:function(t,e){return W(this,N.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[N.propFix[t]||t]}))}}),N.extend({prop:function(t,e,n){var o,r,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&N.isXMLDoc(t)||(e=N.propFix[e]||e,r=N.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(o=r.set(t,n,e))?o:t[e]=n:r&&"get"in r&&null!==(o=r.get(t,e))?o:t[e]},propHooks:{tabIndex:{get:function(t){var e=N.find.attr(t,"tabindex");return e?parseInt(e,10):ae.test(t.nodeName)||se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(N.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),N.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){N.propFix[this.toLowerCase()]=this})),N.fn.extend({addClass:function(t){var e,n,o,r,i,a,s,u=0;if(m(t))return this.each((function(e){N(this).addClass(t.call(this,e,le(this)))}));if((e=ce(t)).length)for(;n=this[u++];)if(r=le(n),o=1===n.nodeType&&" "+ue(r)+" "){for(a=0;i=e[a++];)o.indexOf(" "+i+" ")<0&&(o+=i+" ");r!==(s=ue(o))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,o,r,i,a,s,u=0;if(m(t))return this.each((function(e){N(this).removeClass(t.call(this,e,le(this)))}));if(!arguments.length)return this.attr("class","");if((e=ce(t)).length)for(;n=this[u++];)if(r=le(n),o=1===n.nodeType&&" "+ue(r)+" "){for(a=0;i=e[a++];)for(;o.indexOf(" "+i+" ")>-1;)o=o.replace(" "+i+" "," ");r!==(s=ue(o))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,o="string"===n||Array.isArray(t);return"boolean"==typeof e&&o?e?this.addClass(t):this.removeClass(t):m(t)?this.each((function(n){N(this).toggleClass(t.call(this,n,le(this),e),e)})):this.each((function(){var e,r,i,a;if(o)for(r=0,i=N(this),a=ce(t);e=a[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||((e=le(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,o=0;for(e=" "+t+" ";n=this[o++];)if(1===n.nodeType&&(" "+ue(le(n))+" ").indexOf(e)>-1)return!0;return!1}});var de=/\r/g;N.fn.extend({val:function(t){var e,n,o,r=this[0];return arguments.length?(o=m(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=o?t.call(this,n,N(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=N.map(r,(function(t){return null==t?"":t+""}))),(e=N.valHooks[this.type]||N.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=N.valHooks[r.type]||N.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(de,""):null==n?"":n:void 0}}),N.extend({valHooks:{option:{get:function(t){var e=N.find.attr(t,"value");return null!=e?e:ue(N.text(t))}},select:{get:function(t){var e,n,o,r=t.options,i=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?i+1:r.length;for(o=i<0?u:a?i:0;o<u;o++)if(((n=r[o]).selected||o===i)&&!n.disabled&&(!n.parentNode.disabled||!O(n.parentNode,"optgroup"))){if(e=N(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,o,r=t.options,i=N.makeArray(e),a=r.length;a--;)((o=r[a]).selected=N.inArray(N.valHooks.option.get(o),i)>-1)&&(n=!0);return n||(t.selectedIndex=-1),i}}}}),N.each(["radio","checkbox"],(function(){N.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=N.inArray(N(t).val(),e)>-1}},g.checkOn||(N.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),g.focusin="onfocusin"in n;var fe=/^(?:focusinfocus|focusoutblur)$/,pe=function(t){t.stopPropagation()};N.extend(N.event,{trigger:function(t,e,o,r){var i,a,s,u,l,c,d,p,h=[o||y],g=f.call(t,"type")?t.type:t,b=f.call(t,"namespace")?t.namespace.split("."):[];if(a=p=s=o=o||y,3!==o.nodeType&&8!==o.nodeType&&!fe.test(g+N.event.triggered)&&(g.indexOf(".")>-1&&(b=g.split("."),g=b.shift(),b.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[N.expando]?t:new N.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),e=null==e?[t]:N.makeArray(e,[t]),d=N.event.special[g]||{},r||!d.trigger||!1!==d.trigger.apply(o,e))){if(!r&&!d.noBubble&&!v(o)){for(u=d.delegateType||g,fe.test(u+g)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(o.ownerDocument||y)&&h.push(s.defaultView||s.parentWindow||n)}for(i=0;(a=h[i++])&&!t.isPropagationStopped();)p=a,t.type=i>1?u:d.bindType||g,(c=(J.get(a,"events")||Object.create(null))[t.type]&&J.get(a,"handle"))&&c.apply(a,e),(c=l&&a[l])&&c.apply&&Y(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(h.pop(),e)||!Y(o)||l&&m(o[g])&&!v(o)&&((s=o[l])&&(o[l]=null),N.event.triggered=g,t.isPropagationStopped()&&p.addEventListener(g,pe),o[g](),t.isPropagationStopped()&&p.removeEventListener(g,pe),N.event.triggered=void 0,s&&(o[l]=s)),t.result}},simulate:function(t,e,n){var o=N.extend(new N.Event,n,{type:t,isSimulated:!0});N.event.trigger(o,null,e)}}),N.fn.extend({trigger:function(t,e){return this.each((function(){N.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return N.event.trigger(t,e,n,!0)}}),g.focusin||N.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){N.event.simulate(e,t.target,N.event.fix(t))};N.event.special[e]={setup:function(){var o=this.ownerDocument||this.document||this,r=J.access(o,e);r||o.addEventListener(t,n,!0),J.access(o,e,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,r=J.access(o,e)-1;r?J.access(o,e,r):(o.removeEventListener(t,n,!0),J.remove(o,e))}}})),N.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||N.error("Invalid XML: "+t),e};var he,ge=/\[\]$/,me=/\r?\n/g,ve=/^(?:submit|button|image|reset|file)$/i,ye=/^(?:input|select|textarea|keygen)/i;function be(t,e,n,o){var r;if(Array.isArray(e))N.each(e,(function(e,r){n||ge.test(t)?o(t,r):be(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,o)}));else if(n||"object"!==A(e))o(t,e);else for(r in e)be(t+"["+r+"]",e[r],n,o)}N.param=function(t,e){var n,o=[],r=function(t,e){var n=m(e)?e():e;o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!N.isPlainObject(t))N.each(t,(function(){r(this.name,this.value)}));else for(n in t)be(n,t[n],e,r);return o.join("&")},N.fn.extend({serialize:function(){return N.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=N.prop(this,"elements");return t?N.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!N(this).is(":disabled")&&ye.test(this.nodeName)&&!ve.test(t)&&(this.checked||!gt.test(t))})).map((function(t,e){var n=N(this).val();return null==n?null:Array.isArray(n)?N.map(n,(function(t){return{name:e.name,value:t.replace(me,"\r\n")}})):{name:e.name,value:n.replace(me,"\r\n")}})).get()}}),N.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=N(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){N(this).wrapInner(t.call(this,e))})):this.each((function(){var e=N(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(n){N(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){N(this).replaceWith(this.childNodes)})),this}}),N.expr.pseudos.hidden=function(t){return!N.expr.pseudos.visible(t)},N.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},g.createHTMLDocument=((he=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===he.childNodes.length),N.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((o=(e=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,e.head.appendChild(o)):e=y),i=!n&&[],(r=D.exec(t))?[e.createElement(r[1])]:(r=Et([t],e,i),i&&i.length&&N(i).remove(),N.merge([],r.childNodes)));var o,r,i},N.offset={setOffset:function(t,e,n){var o,r,i,a,s,u,l=N.css(t,"position"),c=N(t),d={};"static"===l&&(t.style.position="relative"),s=c.offset(),i=N.css(t,"top"),u=N.css(t,"left"),("absolute"===l||"fixed"===l)&&(i+u).indexOf("auto")>-1?(a=(o=c.position()).top,r=o.left):(a=parseFloat(i)||0,r=parseFloat(u)||0),m(e)&&(e=e.call(t,n,N.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),c.css(d))}},N.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){N.offset.setOffset(this,t,e)}));var e,n,o=this[0];return o?o.getClientRects().length?(e=o.getBoundingClientRect(),n=o.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,o=this[0],r={top:0,left:0};if("fixed"===N.css(o,"position"))e=o.getBoundingClientRect();else{for(e=this.offset(),n=o.ownerDocument,t=o.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===N.css(t,"position");)t=t.parentNode;t&&t!==o&&1===t.nodeType&&((r=N(t).offset()).top+=N.css(t,"borderTopWidth",!0),r.left+=N.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-N.css(o,"marginTop",!0),left:e.left-r.left-N.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===N.css(t,"position");)t=t.offsetParent;return t||it}))}}),N.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;N.fn[t]=function(o){return W(this,(function(t,o,r){var i;if(v(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===r)return i?i[e]:t[o];i?i.scrollTo(n?i.pageXOffset:r,n?r:i.pageYOffset):t[o]=r}),t,o,arguments.length)}})),N.each(["top","left"],(function(t,e){N.cssHooks[e]=Vt(g.pixelPosition,(function(t,n){if(n)return n=$t(t,e),Ht.test(n)?N(t).position()[e]+"px":n}))})),N.each({Height:"height",Width:"width"},(function(t,e){N.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,o){N.fn[o]=function(r,i){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===i?"margin":"border");return W(this,(function(e,n,r){var i;return v(e)?0===o.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?N.css(e,n,s):N.style(e,n,r,s)}),e,a?r:void 0,a)}}))})),N.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,o){return this.on(e,t,n,o)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),N.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){N.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var _e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;N.proxy=function(t,e){var n,o,r;if("string"==typeof e&&(n=t[e],e=t,t=n),m(t))return o=a.call(arguments,2),(r=function(){return t.apply(e||this,o.concat(a.call(arguments)))}).guid=t.guid=t.guid||N.guid++,r},N.holdReady=function(t){t?N.readyWait++:N.ready(!0)},N.isArray=Array.isArray,N.parseJSON=JSON.parse,N.nodeName=O,N.isFunction=m,N.isWindow=v,N.camelCase=X,N.type=A,N.now=Date.now,N.isNumeric=function(t){var e=N.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},N.trim=function(t){return null==t?"":(t+"").replace(_e,"")},void 0===(o=function(){return N}.apply(e,[]))||(t.exports=o);var Ae=n.jQuery,Ee=n.$;N.noConflict=function(t){return n.$===N&&(n.$=Ee),t&&n.jQuery===N&&(n.jQuery=Ae),N};var Ne,xe,Ce=/^(?:toggle|show|hide)$/,we=/queueHooks$/;function Se(){xe&&(!1===y.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(Se):n.setTimeout(Se,N.fx.interval),N.fx.tick())}function Te(){return n.setTimeout((function(){Ne=void 0})),Ne=Date.now()}function Oe(t,e){var n,o=0,r={height:t};for(e=e?1:0;o<4;o+=2-e)r["margin"+(n=rt[o])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function De(t,e,n,o,r){return new De.prototype.init(t,e,n,o,r)}function Ie(t,e,n){for(var o,r=(Le.tweeners[e]||[]).concat(Le.tweeners["*"]),i=0,a=r.length;i<a;i++)if(o=r[i].call(n,e,t))return o}function Le(t,e,n){var o,r,i=0,a=Le.prefilters.length,s=N.Deferred().always((function(){delete u.elem})),u=function(){if(r)return!1;for(var e=Ne||Te(),n=Math.max(0,l.startTime+l.duration-e),o=1-(n/l.duration||0),i=0,a=l.tweens.length;i<a;i++)l.tweens[i].run(o);return s.notifyWith(t,[l,o,n]),o<1&&a?n:(a||s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:N.extend({},e),opts:N.extend(!0,{specialEasing:{},easing:N.easing._default},n),originalProperties:e,originalOptions:n,startTime:Ne||Te(),duration:n.duration,tweens:[],createTween:function(e,n){var o=N.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(o),o},stop:function(e){var n=0,o=e?l.tweens.length:0;if(r)return this;for(r=!0;n<o;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(!function(t,e){var n,o,r,i,a;for(n in t)if(r=e[o=X(n)],i=t[n],Array.isArray(i)&&(r=i[1],i=t[n]=i[0]),n!==o&&(t[o]=i,delete t[n]),(a=N.cssHooks[o])&&"expand"in a)for(n in i=a.expand(i),delete t[o],i)n in t||(t[n]=i[n],e[n]=r);else e[o]=r}(c,l.opts.specialEasing);i<a;i++)if(o=Le.prefilters[i].call(l,t,c,l.opts))return m(o.stop)&&(N._queueHooks(l.elem,l.opts.queue).stop=o.stop.bind(o)),o;return N.map(c,Ie,l),m(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),N.fx.timer(N.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}return N.Tween=De,De.prototype={constructor:De,init:function(t,e,n,o,r,i){this.elem=t,this.prop=n,this.easing=r||N.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=i||(N.cssNumber[n]?"":"px")},cur:function(){var t=De.propHooks[this.prop];return t&&t.get?t.get(this):De.propHooks._default.get(this)},run:function(t){var e,n=De.propHooks[this.prop];return this.options.duration?this.pos=e=N.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):De.propHooks._default.set(this),this}},De.prototype.init.prototype=De.prototype,De.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=N.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){N.fx.step[t.prop]?N.fx.step[t.prop](t):1!==t.elem.nodeType||!N.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:N.style(t.elem,t.prop,t.now+t.unit)}}},De.propHooks.scrollTop=De.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},N.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},N.fx=De.prototype.init,N.fx.step={},N.Animation=N.extend(Le,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,ot.exec(e),n),n}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(j);for(var n,o=0,r=t.length;o<r;o++)n=t[o],Le.tweeners[n]=Le.tweeners[n]||[],Le.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var o,r,i,a,s,u,l,c,d="width"in e||"height"in e,f=this,p={},h=t.style,g=t.nodeType&&ut(t),m=J.get(t,"fxshow");for(o in n.queue||(null==(a=N._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,N.queue(t,"fx").length||a.empty.fire()}))}))),e)if(r=e[o],Ce.test(r)){if(delete e[o],i=i||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[o])continue;g=!0}p[o]=m&&m[o]||N.style(t,o)}if((u=!N.isEmptyObject(e))||!N.isEmptyObject(p))for(o in d&&1===t.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=m&&m.display)&&(l=J.get(t,"display")),"none"===(c=N.css(t,"display"))&&(l?c=l:(ft([t],!0),l=t.style.display||l,c=N.css(t,"display"),ft([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===N.css(t,"float")&&(u||(f.done((function(){h.display=l})),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),u=!1,p)u||(m?"hidden"in m&&(g=m.hidden):m=J.access(t,"fxshow",{display:l}),i&&(m.hidden=!g),g&&ft([t],!0),f.done((function(){for(o in g||ft([t]),J.remove(t,"fxshow"),p)N.style(t,o,p[o])}))),u=Ie(g?m[o]:0,o,f),o in m||(m[o]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?Le.prefilters.unshift(t):Le.prefilters.push(t)}}),N.speed=function(t,e,n){var o=t&&"object"==typeof t?N.extend({},t):{complete:n||!n&&e||m(t)&&t,duration:t,easing:n&&e||e&&!m(e)&&e};return N.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in N.fx.speeds?o.duration=N.fx.speeds[o.duration]:o.duration=N.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){m(o.old)&&o.old.call(this),o.queue&&N.dequeue(this,o.queue)},o},N.fn.extend({fadeTo:function(t,e,n,o){return this.filter(ut).css("opacity",0).show().end().animate({opacity:e},t,n,o)},animate:function(t,e,n,o){var r=N.isEmptyObject(t),i=N.speed(e,n,o),a=function(){var e=Le(this,N.extend({},t),i);(r||J.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(t,e,n){var o=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",i=N.timers,a=J.get(this);if(r)a[r]&&a[r].stop&&o(a[r]);else for(r in a)a[r]&&a[r].stop&&we.test(r)&&o(a[r]);for(r=i.length;r--;)i[r].elem!==this||null!=t&&i[r].queue!==t||(i[r].anim.stop(n),e=!1,i.splice(r,1));!e&&n||N.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=J.get(this),o=n[t+"queue"],r=n[t+"queueHooks"],i=N.timers,a=o?o.length:0;for(n.finish=!0,N.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<a;e++)o[e]&&o[e].finish&&o[e].finish.call(this);delete n.finish}))}}),N.each(["toggle","show","hide"],(function(t,e){var n=N.fn[e];N.fn[e]=function(t,o,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Oe(e,!0),t,o,r)}})),N.each({slideDown:Oe("show"),slideUp:Oe("hide"),slideToggle:Oe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){N.fn[t]=function(t,n,o){return this.animate(e,t,n,o)}})),N.timers=[],N.fx.tick=function(){var t,e=0,n=N.timers;for(Ne=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||N.fx.stop(),Ne=void 0},N.fx.timer=function(t){N.timers.push(t),N.fx.start()},N.fx.interval=13,N.fx.start=function(){xe||(xe=!0,Se())},N.fx.stop=function(){xe=null},N.fx.speeds={slow:600,fast:200,_default:400},N}(window)),function(t,e){if(!(e&&e.$&&e.hasOwnProperty("browser")&&e.logger)){var n,o,r=e,i=r.$,a=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.\%]+)\s*\)/,u=((n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1}).acceptNode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1},n),l=(o={log:!1,debug:!1,warn:!1,error:!0,trace:!1,prefix:"LoopIndex "},{_logs:[],config:function(t){return i.extend(o,t),i.extend({},o)},ignore:function(){},log:function(){o.log&&this._log("log",Array.prototype.slice.call(arguments))},error:function(){o.error&&this._log("error",Array.prototype.slice.call(arguments))},debug:function(){o.debug&&this._log("log",Array.prototype.slice.call(arguments))},trace:function(){if(o.trace){var t=Error().stack,e=t?[t.replace("Error","Debug:"),"\n"]:[];this._log("log",e.concat(Array.prototype.slice.call(arguments)))}},warn:function(){this._log("warn",Array.prototype.slice.call(arguments))},_log:function(t,e){var n=new Date,r=[n.getMinutes(),n.getSeconds(),n.getMilliseconds()].join(":");e.unshift(r+">"),o.prefix&&e.unshift(o.prefix),this._logs.push({method:t,logs:e}),this.scheduleDump()},dump:function(){var t=this._logs;this._logs=[],t.forEach((function(t){console[t.method].apply(console,t.logs)}))},timeout:null,scheduleDump:function(){this.timeout||(this.timeout=setTimeout(function(){this.timeout=null,this.dump()}.bind(this),100))}}),c=function(){function t(){}return t.prototype.merge=function(t,e,n,o){void 0===o&&(o=!1);var i=null===n?function(t,e){return t===e}:function(t,e){return t&&e&&t[n]===e[n]};t=t||[];var a=[];return(e=e||[]).forEach((function(e){for(var n=!1,s=0,u=t.length;!n&&s<u;++s){var l=t[s];i(l,e)&&(t[s]=o&&l&&e?r.$.extend(l,e):e,n=!0)}n||a.push(e)})),a.length&&t.push.apply(t,a),t},t}(),d=function(){function t(){}return t.prototype.getRealTextLength=function(t){if(!t)return 0;for(var e=t.length;e&&r.utils.strings.isEmptyString(t[e-1]);)--e;return e},t.prototype.toMap=function(t,e,n){for(var o,r,i={},a=Boolean(e),s=Boolean(n),u=0,l=t&&t.length||0;u<l;++u)null!=(r=t[u])&&(o="*"===n?r:s?r[n]:1,a?i[String(r[e])]=o:i[String(r)]=1);return i},t.prototype.toStringMap=function(t,e){for(var n={},o=e?"upper"===e?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}:null,r=0,i=t&&t.length||0;r<i;++r)n[String(o?o(t[r]):t[r])]=1;return n},t.prototype.toStringArray=function(t,e){if(!t)return[];var n,o="upper"===e?String.prototype.toUpperCase:"lower"===e?String.prototype.toLowerCase:null;if("string"==typeof t)n=t.split(",");else{if(!i.isArray(t))return r.logger.warn("illegal format of string array"),[];n=t}return n.forEach((function(t,e){(t=t&&String(t).trim())&&o&&(t=o.apply(t)),n[e]=t})),n},t.prototype.padString=function(t,e,n,o){var r;r=null==t?"":String(t);for(var i=(n=String(n)).length,a=[r],s=r.length;s<e;s+=i)o?a.push(n):a.unshift(n);return a.join("")},t.prototype.padNumber=function(t,e){return r.utils.strings.padString(t,e,"0",!1)},t.prototype.randomString=function(t){(!t||isNaN(t)||t<1)&&(t=6);for(var e=String((1+Math.random())*Date.now()),n=btoa(e).replace(/[^a-z]/gi,"");n.length<t;)n+=n;return n.length>t&&(n=n.substring(n.length-t)),n},t.prototype.isEmptyString=function(t){for(var e,n=t&&t.length||0;n>0;)if(0!==(e=t.charCodeAt(--n))&&8203!==e&&65279!==e)return!1;return!0},t.prototype.getEffectiveStringLength=function(t){for(var e,n=t&&t.length||0,o=0;n>0;)0!==(e=t.charCodeAt(--n))&&8203!==e&&65279!==e&&++o;return o},t.prototype.getEffectiveStringIndex=function(t,e){if(isNaN(e)||e<0)return 0;var n,o=t&&t.length||0;if(e>=o)return o;for(var r=0,i=0;i<o;++i)if(0!==(n=t.charCodeAt(i))&&8203!==n&&65279!==n&&++r>e)return i;return o},t}(),f=function(){function t(){this._matchSelector=null}return t.myNormalizeNode=function(e){if(e&&1===e.nodeType)for(var n=e.firstChild;n;){if(1===n.nodeType)t.myNormalizeNode(n);else if(3==n.nodeType)for(var o=void 0;(o=n.nextSibling)&&3==o.nodeType;){var r=o.nodeValue;r&&(n.nodeValue=n.nodeValue+r),e.removeChild(o)}n=n.nextSibling}},t.prototype.getPositioningParent=function(t){for(var e,n=this.toJQuery(t),o=n;(n=n.parent()).length&&n[0].ownerDocument&&"relative"!==(e=(o=n).css("position"))&&"absolute"!==e&&"fixed"!==e;);return o},t.prototype.addScriptToDocument=function(t,e){try{var n=(e=e||window.document).createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",t),document.head.appendChild(n),!0}catch(e){return console.error("While loading script "+t+"\n{err}"),!1}},Object.defineProperty(t.prototype,"NodeIteratorUniversalFunction",{get:function(){return u},enumerable:!1,configurable:!0}),t.prototype.isContentEditable=function(t,e,n){for(var o,r=t&&t.parentNode;r&&r!==e;r=r.parentNode)if(1===r.nodeType&&(o=r.getAttribute("contenteditable"))){if("true"===(o=o.toLowerCase()))return!0;if("false"===o)return!1}return n},t.prototype.createTreeWalker=function(t,e,n){var o=t&&t.ownerDocument;if(!o)return null;var i=n?function(){var t=function(t){return n(t)};return t.acceptNode=function(){return 1},t}():r.browser.msie?u:null;return o.createTreeWalker(t,e,i,!1)},t.prototype.createNodeIterator=function(t,e,n){var o=t&&t.ownerDocument;if(!o)return null;var i=n?function(){var t=function(t){return n(t)};return t["]acceptNode"]=function(){return 1},t}():r.browser.msie?u:null;return o.createNodeIterator(t,e,i,!1)},t.prototype.getNodeIndex=function(t){if(!t)return-1;for(var e=0;t=t.previousSibling;)++e;return e},t.prototype.insertNodeAt=function(t,e,n){return!(!t||!e||1!==e.nodeType||n<0)&&(e.insertBefore(t,e.childNodes[n]),!0)},t.prototype.normalizeNode=function(e){return e?r.browser.msie||"function"!=typeof e.normalize?(t.myNormalizeNode(e),e):(e.normalize(),e):null},t.prototype.isEmptyTextNode=function(t){if(!t||3!==t.nodeType)return!1;var e=t;return 0===e.length||r.utils.strings.isEmptyString(e.nodeValue)},t.prototype.getNodeLength=function(t){var e=t&&t.nodeType;return 1===e?t.childNodes.length:3===e?t.length:0},t.prototype.getNodeTextContent=function(t){return i(t).text()},t.prototype.isOnlyChild=function(t){var e=t&&t.parentNode;return e&&e.firstChild===t&&e.lastChild===t},t.prototype.insertAfter=function(t,e,n){return t?(n=n||e&&e.parentNode,e&&e.parentNode!==n&&(e=null),n?e?n.insertBefore(t,e.nextSibling):n.insertBefore(t,n.firstChild):void 0):null},t.prototype.contents=function(t){return i.makeArray(i(t).contents())},t.prototype.extractContent=function(t){for(var e,n=document.createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n},t.prototype.toJQuery=function(t,e){if(void 0===e&&(e=!1),!t)return r.$("");var n=t;return n instanceof r.$||(n=r.$(t)),!e&&n.length>1&&(n=n.eq(0)),n},t.prototype.getRealTextLength=function(t){return t&&t.data?r.utils.strings.getRealTextLength(t.data):0},t.prototype.isDescendantOf=function(t,e){if(!e||!t)return!1;var n="string"==typeof e&&e;if(!n&&1!==e.nodeType)return!1;try{for(;t&&t.parentNode;){if(n){if(r.utils.dom.matchesSelector(t.parentNode,n))return!0}else if(t.parentNode===e)return!0;t=t.parentNode}}catch(t){}return!1},t.prototype.clearNodeBackgroundImage=function(t){t&&t.style&&t.style["background-image"]&&(t.style["background-image"]=null)},t.prototype.getElementPageOffset=function(t,e){if(!t||!t.getBoundingClientRect)return{top:0,left:0};var n=t.getBoundingClientRect(),o=t.ownerDocument,r=o.defaultView,i=o.body,a=o.documentElement,s=r.pageYOffset||a.scrollTop||r.scrollY||i.scrollTop||0,u=r.pageXOffset||a.scrollLeft||r.scrollX||i.scrollLeft||0,l=a.clientTop||i.clientTop||0,c=a.clientLeft||i.clientLeft||0,d=n.top+s-l,f=n.left+u-c,p={top:Math.round(d),left:Math.round(f)};return e&&(p.top+=i.scrollTop||0,p.left+=i.scrollLeft||0),p},t.prototype.compareNodePosition=function(t,e){if(t===e)return 0;var n=t.compareDocumentPosition(e);return 4&n?-1:8&n?-1:1},t.prototype.forAllTextChildren=function(t,e){if(t&&e&&1===t.nodeType)for(var n=t.firstChild,o=n&&n.nextSibling;n;o=(n=o)&&n.nextSibling)1===n.nodeType?this.forAllTextChildren(n,e):3===n.nodeType&&e(n)},t.prototype.getFirstNodeInRange=function(t){var e=t&&t.startContainer;if(!e)return null;if(3===e.nodeType)return e;var n=this.getNthChild(e,t.startOffset);return n||r.utils.dom.createNodeIterator(e,NodeFilter.SHOW_TEXT||NodeFilter.SHOW_ELEMENT).nextNode()},t.prototype.getLastNodeInRange=function(t){var e=t&&t.endContainer;if(!e)return null;if(3===e.nodeType)return e;var n=this.getNthChild(e,t.endOffset-1);return n||r.utils.dom.createNodeIterator(e,NodeFilter.SHOW_TEXT||NodeFilter.SHOW_ELEMENT).previousNode()},t.prototype.hasTextSelection=function(t){if(!t||t.collapsed)return!1;if(3===t.startContainer.nodeType&&t.startOffset<t.startContainer.length)return!0;if(3===t.endContainer.nodeType&&t.endOffset<t.endContainer.length)return!0;var e=!1;return this.walkRange(t,(function(t,n){return!(3===t.nodeType&&t.length>0)||(e=!0,!1)})),e},t.prototype.getNthChild=function(t,e){if(!t||1!==t.nodeType)return null;for(var n=t.firstChild;n&&e>=0;n=n.nextSibling,--e)if(0===e)return n;return null},t.prototype.getSelectedTextNodes=function(t){var e=this;if(!t||t.collapsed)return null;var n=[];return this.walkRange(t,(function(t,o){if(3===t.nodeType){var r=e.processTextNode(t,o);r&&n.push(r)}return!0})),n},t.prototype.extractTextNode=function(t){if(!t||!t.node)return null;if(!t.partial)return t.node;var e=t.node;return t.end<e.length&&e.splitText(t.end),t.start>0&&(e=e.splitText(t.start)),e},t.prototype.extractInlineNode=function(e){var n=e&&e.node;if(!n)return null;var o=function(e){for(;e.parentNode&&t.INLINE_RE.test(r.$(e.parentNode).css("display"));)e=e.parentNode;return e}(n);if(o===n)return r.utils.dom.extractTextNode(e);var i=o,a=r.utils.dom;if(!e.partial)return a.splitNode(i,e.node,e.end);var s=i;return e.end<n.length&&(n=(s=a.splitNode(s,n,e.end)).lastChild),e.start>0&&a.splitNode(s,n,e.start),s},t.prototype.splitNode=function(t,e,n){if(0===n&&(e===t||e===t.firstChild))return t;if(n>=r.utils.dom.getNodeLength(e)&&(e===t||e===t.lastChild))return t;var o=t.parentNode,i=r.utils.dom.getNodeIndex(t),a=e.ownerDocument.createRange();a.setStart(o,i),a.setEnd(e,n);var s=a.extractContents();return o.insertBefore(s,t),t.previousSibling||t},t.prototype.walkRange=function(t,e){if(t&&!t.collapsed){var n,o=this.getFirstNodeInRange(t),i=this.getLastNodeInRange(t);if(o&&i)for(var a=!1,s=!1,u=r.utils.dom.createNodeIterator(t.commonAncestorContainer,NodeFilter.SHOW_ALL);(n=u.nextNode())&&(!s||r.utils.dom.isDescendantOf(n,i));){if(!a){if(n!=o)continue;a=!0}if(!e(n,t))return;n===i&&(s=!0)}}},t.prototype.processTextNode=function(t,e){var n;if(!t||3!==t.nodeType||!(n=t.length))return null;var o={node:t,start:0,end:n,partial:!1};if(t===e.startContainer&&e.startOffset>0){if(e.startOffset>=n)return null;o.partial=!0,o.start=e.startOffset}return t===e.endContainer&&e.endOffset<n&&(o.partial=!0,o.end=e.endOffset),o},t.prototype.hasClass=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t,o=n.classList||n.className&&n.className.split(/\s/);if(o&&o.length)for(var r=o.length-1;r>=0;--r)if(o[r]===e)return!0;return!1},t.prototype.matchesSelector=function(t,e){if(!t||1!==t.nodeType||!e)return!1;if(!this._matchSelector){var n=t,o=void 0;o="function"==typeof n.matches?function(t,e){return t.matches(e)}:"function"==typeof n.msMatchesSelector?function(t,e){return t.msMatchesSelector(e)}:"function"==typeof n.webkitMatchesSelector?function(t,e){return t.webkitMatchesSelector(e)}:function(t,e){return i(t).is(e)},this._matchSelector=o}return this._matchSelector(t,e)},t.INLINE_RE=/inline/i,t}(),p=function(){function t(t){this._doc=t,this._styleId=r.utils.strings.randomString(8),this._loadedStyleIds={}}return Object.defineProperty(t.prototype,"document",{get:function(){return this._doc},enumerable:!1,configurable:!0}),t.prototype.getOwnStyleSheet=function(t){var e=this._doc.getElementById(this._styleId);return!e&&t&&((e=this._doc.createElement("style")).appendChild(this._doc.createTextNode("")),e.setAttribute("id",this._styleId),this._loadedStyleIds[this._styleId]=!0,this.$head.append(e)),e&&e.sheet},t.prototype.loadCSSString=function(t,e){var n=r.utils.getUniqueId("li-style"),o=this.$head,i=this._doc.createElement("style");i.id=n,this._loadedStyleIds[n]=!0,i.appendChild(this._doc.createTextNode(t)),o.append(i)},t.prototype.loadCSS=function(t,e,n){var o=this,a=this.$head,s=this._doc;(t||[]).forEach((function(t){!function(t){if(t){var u="loopindex-"+t.replace(/[^0-9a-z]+/gi,"_")+"-"+r.utils.getUniqueNumber();if(0===i(a).find("#"+u).length){var l=i(s.createElement("link"));l.attr({rel:"stylesheet",type:"text/css",id:u,href:r.utils.isAbsoluteUrl(t)?t:r.utils.joinPath(e,t)}),o._loadedStyleIds[u]=!0,n&&o._attachCBToLink(l[0],t,n),a.append(l)}}}(t)}))},t.prototype.addRule=function(t,e){if(e&&"object"==typeof e){var n=this.getOwnStyleSheet(!0);if(n){var o=n.rules&&n.rules.length||0,i=this._makeRule(e);"function"==typeof n.addRule?n.addRule(t,i,o):"function"==typeof n.insertRule?n.insertRule(t+" "+this._makeRule(e)+" }",n.rules&&n.rules.length||0):r.logger.error("CSSLoader addRule: no matching function")}else r.logger.warn("LoopIndex CSSLoader cannot create stylesheet")}},t.prototype.reset=function(){var t=this.getOwnStyleSheet(!1);if(t&&t.deleteRule)for(var e=t.cssRules.length-1;e>=0;--e)t.deleteRule(e)},t.prototype.dispose=function(){if(this._doc){var t=this.$head;Object.keys(this._loadedStyleIds).forEach((function(e){setTimeout((function(){try{t.find("#"+e).remove()}catch(t){}}),0)})),this._loadedStyleIds={},this._doc=null}},Object.defineProperty(t.prototype,"$head",{get:function(){return r.$(this._doc&&(this._doc.head||this._doc.getElementsByTagName("head")[0]))},enumerable:!1,configurable:!0}),t.prototype._makeRule=function(t){return Object.keys(t||{}).map((function(e){return e+": "+t[e]+";"})).join("\n")},t.prototype._attachCBToLink=function(t,e,n){if("function"==typeof n){var o=function(){t.removeEventListener("load",o),t.removeEventListener("error",r),n(e,{loaded:!0})};"function"==typeof t.addEventListener?(t.addEventListener("load",o),t.addEventListener("error",r)):(t.onload=function(){o()},t.onerror=function(t){r(t)})}function r(i){t.removeEventListener("load",o),t.removeEventListener("error",r),n(e,{loaded:!1,error:i})}},t}(),h=function(){function t(){}return t.prototype.logEditorEvents=function(t,e,n,o){if(e&&Boolean(o)!==Boolean(t.savedEditorFireMethod)){var i=e;if(o){t.savedEditorFireMethod=i.fire;var a=n?new RegExp(n.join("|"),"i"):/mouse|selection|click|focus|undo|redo|snapshot|resolvename/i,s=function(t){return!t||a.test(t)};i.fire=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s(e[0])||r.logger.debug("Editor event "+e[0]),t.savedEditorFireMethod.apply(i,e)}}else i.fire=t.savedEditorFireMethod,t.savedEditorFireMethod=null}},t}(),g=function(){function t(){this._dom=new f,this._strings=new d,this.array=new c,this._pluginUtils=new h}return Object.defineProperty(t.prototype,"pluginUtils",{get:function(){return this._pluginUtils},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dom",{get:function(){return this._dom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strings",{get:function(){return this._strings},enumerable:!1,configurable:!0}),t.prototype.clearObject=function(t){return t?(Object.keys(t).forEach((function(e){try{delete t[e]}catch(t){}})),t):{}},t.prototype.getRelativeTimezoneOffset=function(t){if(!t)return 0;try{var e=new Date,n=e.toLocaleString("en-us",{timeZone:t});return Date.parse(n)-e.getTime()}catch(e){return r.logger.error("convertDateToTimezone",t,e),0}},t.prototype.convertDateToTimezone=function(t,e){if(t=t||new Date,!e)return t;try{var n=r.utils.getRelativeTimezoneOffset(e);return new Date(t.getTime()+n)}catch(n){return r.logger.error("convertDateToTimezone",e,n),t}},Object.defineProperty(t.prototype,"CSSLoader",{get:function(){return p},enumerable:!1,configurable:!0}),t.prototype.intensifyColor=function(t,e){var n,o=t.match(a),r=!o&&t.match(s),i=r||r,u=10;i?n=[i[1],i[2],i[3]]:(t.match(s),u=16,(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),n=[t.substr(0,2),t.substr(2,2),t.substr(4,2)]),e=e||0;for(var l,c=[],d=0;d<3;d++)l=parseInt(n[d],u),c.push(Math.round(Math.min(Math.max(0,l+l*e),255)));return o?"rgb("+c[0]+","+c[1]+","+c[2]+")":r?"rgba("+c[0]+","+c[1]+","+c[2]+", "+r[4]+")":"#"+c.map((function(t){return t<16?"0"+t.toString(16):t.toString(16)})).join("")},t.prototype.getUniqueNumber=function(){return t.nextId++},t.prototype.getUniqueId=function(t,e){return""+t+r.utils.getUniqueNumber()+(e||"")},t.prototype.yes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},t.prototype.no=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},t.prototype.always=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t}},t.prototype.getCurrentScriptPath=function(){var t=r.utils.getCurrentScriptURL();if(!t)return null;var e=/^(.+\/)[^\/]+\.js/i.exec(t);return e&&e[1]},t.prototype.getCurrentScriptURL=function(){try{var t=document&&document.currentScript;if(t)return t.src;var e=window.import,n=e&&e.meta;if(void 0!==n&&n.url)return n.url}catch(t){return null}},t.prototype.scrollToElement=function(t){var e=r.utils.dom.toJQuery(t);return e&&e.scrollintoview()},t.prototype.joinPath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.map((function(t){return t&&t.trim()})).filter(Boolean).join("/").replace(/(^|[^:])\/[\/]+/g,"$1/");return n},t.prototype.isAbsoluteUrl=function(t){return!!t&&("/"===t[0]||/^[a-z]+\:\/\//i.test(t))},t.nextId=Math.round(Date.now()%1e4),t}(),m=function(){function t(){this._timeoutMap={}}return t.prototype.clear=function(){var t=this;Object.keys(this._timeoutMap).forEach((function(e){return t.removeTimer(e)}))},t.prototype.setTimer=function(t,e,n){var o="temp-"+Date.now()*Math.random();return this.createTimer(o,{callback:t,timeoutMSecs:e,repeatCount:n,autoDispose:!0}).start()},t.prototype.createTimer=function(t,e){var n=this;if(!t)throw new Error("setTimer requires a timer id");var o=this._timeoutMap[t];if(o)o.update(e);else{if(!e.callback)throw new Error("setTimer: callback required");var r=this.upgradeOptions(e);o=this._timeoutMap[t]=new v(r,(function(){delete n._timeoutMap[t]}))}return o},t.prototype.startTimer=function(t){var e=this._timeoutMap[t];return e&&e.start()},t.prototype.stopAll=function(){var t=this;Object.keys(this._timeoutMap).forEach((function(e){return t.stopTimer(e)}))},t.prototype.stopTimer=function(t){var e=this._timeoutMap[t];return e&&e.stop(),e},t.prototype.removeTimer=function(t){var e=this._timeoutMap[t];return e&&e.dispose(),Boolean(e)},t.prototype.elapsed=function(t){var e=this._timeoutMap[t];return e&&e.elapsed||0},t.prototype.upgradeOptions=function(t){return r.$.extend({},{callback:null,repeatCount:1,timeoutMSecs:-1,maxTimeSecs:0,autoDispose:!0},t)},t.FOREVER=999999999,t}(),v=function(){function t(t,e){var n=this;if(this.done=e,this._elapsed=0,this._callCount=0,this._startTime=0,this._stop=null,!t.callback)throw new Error("Timeout constructor: callback required");this._options=r.$.extend({},t),this._callback=function(){n._elapsed=Date.now()-n._startTime,n._options.maxTimeSecs>0&&1e3*n._options.maxTimeSecs<n._elapsed&&n.stop(),n._options.callback(n);var t=n._options.repeatCount;n._options&&(t<=0||++n._callCount>=t)&&(n.stop(),n._options.autoDispose&&n.dispose())}}return Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this._stop)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t=this;if(this.stop(),Object.keys(this._options).forEach((function(e){return delete t._options[e]})),this._callback=null,this.done){var e=this.done;this.done=null,e()}},t.prototype.start=function(){if(this.isRunning)return this;var t;this.reset();var e=this._options.repeatCount;return(isNaN(e)||"number"!=typeof e||e<0)&&(this._options.repeatCount=1),this._startTime=Date.now(),t=setInterval(this._callback,this._options.timeoutMSecs),this._stop=function(){return clearInterval(t)},this},t.prototype.reset=function(){return this._elapsed=0,this._callCount=0,this.isRunning&&(this.stop(),this.start()),this},t.prototype.stop=function(){if(this._stop){var t=this._stop;this._stop=null,t()}return this},t.prototype.update=function(t){var e=this._options;return t.repeatCount>0&&(e.repeatCount=t.repeatCount),t.timeoutMSecs>=0&&(e.timeoutMSecs=t.timeoutMSecs),t.maxTimeSecs>=0&&(e.maxTimeSecs=t.maxTimeSecs),void 0!==t.data&&(e.data=t.data),this},Object.defineProperty(t.prototype,"elapsed",{get:function(){return this._elapsed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRepeating",{get:function(){return this._options.repeatCount>0},enumerable:!1,configurable:!0}),t}(),y=function(){this.msie=!1,this.type="unknown",this.webkit=!1,this.chrome=!1,this.safari=!1,this.firefox=!1,this.webkitType=null;var t=navigator.userAgent.toLowerCase(),e=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(t);e.browser&&(this[e.browser]=!0,this.version=e.version||"0",this.type=e.browser),this.chrome?this.webkit=!0:this.webkit&&(this.safari=!0),this.webkit&&(this.type="webkit",this.webkitType="webkit"!==this.type?null:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?"safari":"chrome"),this.firefox=!0===/firefox/i.test(t),this.msie||(this.msie=Boolean(/trident/i.test(t)))&&(this.type="msie")},b=function(){function e(){this._args=null,this._url=""}return e.prototype.getArgument=function(t,e){return this._parseLocation(),this._args.hasOwnProperty(t)?decodeURIComponent(this._args[t]):e},e.prototype.getNumericArgument=function(t,e){var n=this.getArgument(t,""),o=parseInt(n,10);return isNaN(o)&&(o=e),o},e.prototype.getAllArguments=function(){this._parseLocation();var t,e={};for(t in this._args)this._args.hasOwnProperty(t)&&(e[t]=this._args[t]);return e},e.prototype.createSearchString=function(t){if(!t)return"";var e,n,o="";for(e in t)t.hasOwnProperty(e)&&"function"!=typeof(n=t[e])&&(o.length&&(o+="&"),o+=e+"="+decodeURIComponent(n));return o},e.prototype.parse=function(t,e){if(e=e||{},"string"!=typeof t||t.length<1)return{};var n=t.charAt(0);"?"!==n&&"#"!==n||(t=t.substring(1));var o,r,i,a,s=t.split("&"),u={true:!0,false:!1};for(o=s.length-1;o>=0;--o)(r=s[o])&&(i=r.indexOf("="))>0&&(a=decodeURIComponent(r.substring(i+1)),u.hasOwnProperty(a)&&(a=u[a]),e[r.substring(0,i)]=a);return e},e.prototype._parseLocation=function(){var e=t.location;if(this._url!==e.href||!this._args){this._url=e.href;var n={};this.parse(e.search,n),this.parse(e.hash,n),this._args=n}return this._args},e}(),_={mixin:function(t){var e={},n=!1,o=function(t){return e[t]=e[t]||[]},a=function(){var t=e;Object.keys(t).forEach((function(e){var n=t[e];n&&n.length||delete t[e]}))},s=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){if(!n){var s=o(t),u=s.slice(),l=[];u.forEach((function(t){t.muted||t.callback.apply(t.scope,e),t.options&&t.options.count&&(--t.options.count,t.options.count<=0&&l.push(t))})),l.length&&(l.forEach((function(t){s.splice(s.indexOf(t),1)})),a())}}else r.logger.warn("cannot trigger empty event")},u={on:function(t,e,n,a){var s=this;if(!t)return r.logger.warn("cannot register to empty event"),this;if(i.isArray(t))t.forEach((function(t){s.addListener(t,e,n,a)}));else if("function"==typeof e){o(t).push({scope:n,muted:!1,callback:e,options:a})}else r.logger.error("events mixin addListener: bad callback",e);return this},off:function(t,n){var o=this;if(!t&&!n)return this.removeAllListeners();if(!n&&t&&"object"==typeof t&&(n=t,t=null),t&&t instanceof Array)return t.forEach((function(t){o.off(t,n)})),this;function r(t,e){return t&&(!n||t.scope===n||t.callback===n)}var i=e;return Object.keys(i).forEach((function(e){t&&t!==e||i[e].filter(r).forEach((function(t){var n=i[e].indexOf(t);n>=0&&i[e].splice(n,1)}))})),a(),this},removeAllListeners:function(){return Object.keys(e).forEach((function(t){return e[t]=void 0})),this},muteListener:function(t,n){if(!t)return this;n=Boolean(n);var o=e;return Object.keys(o).forEach((function(e){var r=o[e];r&&r.forEach((function(e){e&&e.scope===t&&(e.muted=n)}))})),this},muteEvents:function(){return n=!0,this},unmuteEvents:function(){return n=!1,this},once:function(t,e,n,o){return(o=o||{}).count=1,this.on(t,e,n,o)},trigger:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return s.apply(this,[t].concat(e)),this}};Object.keys(u).forEach((function(e){var n=u[e];"function"==typeof n&&Object.defineProperty(t,e,{value:n,enumerable:!0,writable:!1,configurable:!1})}));var l={fire:u.trigger,removeListener:u.off,bind:u.on,addListener:u.on};return Object.keys(l).forEach((function(e){Object.defineProperty(t,e,{enumerable:!0,value:l[e],writable:!1,configurable:!1})})),t}};!function(){if(!i||!i.fn)return console.warn("Cannot define scrollintoview: no $");if(i.fn.scrollintoview)return console.warn("$ scrollintoview already defined");var t={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},e={duration:"fast",direction:"both"},n=/^(?:html)$/i,o=function(t,e){e=e||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var n=!(!document.defaultView||!document.defaultView.getComputedStyle),o={top:parseFloat(n?e.borderTopWidth:i.css(t,"borderTopWidth"))||0,left:parseFloat(n?e.borderLeftWidth:i.css(t,"borderLeftWidth"))||0,bottom:parseFloat(n?e.borderBottomWidth:i.css(t,"borderBottomWidth"))||0,right:parseFloat(n?e.borderRightWidth:i.css(t,"borderRightWidth"))||0};return{top:o.top,left:o.left,bottom:o.bottom,right:o.right,vertical:o.top+o.bottom,horizontal:o.left+o.right}},r=function(t){var e,r=i(window),a=n.test(t[0].nodeName);return{border:a?{top:0,left:0,bottom:0,right:0}:o(t[0],null),scroll:{top:(a?r:t).scrollTop(),left:(a?r:t).scrollLeft()},scrollbar:{right:a?0:t.innerWidth()-t[0].clientWidth,bottom:a?0:t.innerHeight()-t[0].clientHeight},rect:(e=t[0].getBoundingClientRect(),{top:a?0:e.top,left:a?0:e.left,bottom:a?t[0].clientHeight:e.bottom,right:a?t[0].clientWidth:e.right})}};i.fn.extend({scrollintoview:function(o){(o=i.extend({},e,o)).direction=t["string"==typeof o.direction&&o.direction.toLowerCase()]||t.both;var a="";!0===o.direction.x&&(a="horizontal"),!0===o.direction.y&&(a=a?"both":"vertical");var s=this.eq(0),u=s.closest(":scrollable("+a+")");if(u.length>0){u=u.eq(0);var l={e:r(s),s:r(u)},c={top:l.e.rect.top-(l.s.rect.top+l.s.border.top),bottom:l.s.rect.bottom-l.s.border.bottom-l.s.scrollbar.bottom-l.e.rect.bottom,left:l.e.rect.left-(l.s.rect.left+l.s.border.left),right:l.s.rect.right-l.s.border.right-l.s.scrollbar.right-l.e.rect.right},d={};!0===o.direction.y&&(c.top<0?d.scrollTop=l.s.scroll.top+c.top:c.top>0&&c.bottom<0&&(d.scrollTop=l.s.scroll.top+Math.min(c.top,-c.bottom))),!0===o.direction.x&&(c.left<0?d.scrollLeft=l.s.scroll.left+c.left:c.left>0&&c.right<0&&(d.scrollLeft=l.s.scroll.left+Math.min(c.left,-c.right))),i.isEmptyObject(d)?i.isFunction(o.complete)&&o.complete.call(u[0]):(n.test(u[0].nodeName)&&(u=i(u[0].ownerDocument).find("html,body")),u.animate(d,o.duration).eq(0).queue((function(t){i.isFunction(o.complete)&&o.complete.call(u[0]),t()})))}return this}});var a={auto:!0,scroll:!0,visible:!1,hidden:!1};i.extend(i.expr[":"],{scrollable:function(e,o,r,i){var s=t[r&&"string"==typeof r[3]&&r[3].toLowerCase()]||t.both,u=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,l={x:a[u.overflowX.toLowerCase()]||!1,y:a[u.overflowY.toLowerCase()]||!1,isRoot:n.test(e.nodeName)};if(!l.x&&!l.y&&!l.isRoot)return!1;var c={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(l.x||l.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(l.y||l.isRoot)&&this.height.scroll>this.height.client}};return s.y&&c.scrollableY()||s.x&&c.scrollableX()}})}();var A=new y;[{name:"Timeout",data:v},{name:"TimeoutClient",data:m},{name:"logger",data:l},{name:"utils",data:new g},{name:"URLArguments",data:new b},{name:"CommandStates",data:{ON:"on",OFF:"off",DISABLED:"disabled"}},{name:"Timeout",data:v},{name:"mixinEvents",data:_.mixin}].forEach((function(t){Object.defineProperty(e,t.name,{value:t.data,writable:!1,configurable:!1,enumerable:!0})})),Object.defineProperties(r,{browser:{get:function(){return r.$.extend(!0,{},A)}}})}}(window,window.LOOPINDEX),function(t){t.exports=t.exports||{};var e=t.LOOPINDEX;if(!e)throw new Error("global.LOOPINDEX must be defined");if(!t.LANCE||"object"!=typeof t.LANCE){t.LANCE=e,t.LOOPINDEX=e,function(){var t=[],n=null;if("object"==typeof CKEDITOR&&CKEDITOR.document){var o=CKEDITOR.document.getWindow;CKEDITOR.document.getWindow=function(){var r=Array.prototype.slice.call(arguments),i=o.apply(CKEDITOR.document,r);return t.push(i),n&&e.overrideViewPaneSize(n),i}}e.overrideViewPaneSize=function(e){n=e,t.forEach((function(t){if(!t.__OVERRIDE_GVPS__){var n=t.getViewPaneSize;t.__OVERRIDE_GVPS__=!0,t.getViewPaneSize=function(){var o=Array.prototype.slice.call(arguments),r=n.apply(t,o);return e(r)}}}))}}();var n=Array.prototype;n.contains_li||Object.defineProperty(n,"contains_li",{enumerable:!1,value:function(t){if(null==this)throw new TypeError;return this.indexOf(t)>=0}}),n.removeAll_li||Object.defineProperty(n,"removeAll_li",{enumerable:!1,value:function(t){if(null==this)throw new TypeError;var e=Object(this).length>>>0;if(0===e)return-1;for(var n=e-1;n>=0;--n)t(this[n],n)&&this.splice(n,1)}}),n.first_li||Object.defineProperty(n,"first_li",{enumerable:!1,value:function(t){if(null==this)throw new TypeError;var e=this.firstIndexOf_li(t);return e>=0?this[e]:null}}),n.firstIndexOf_li||Object.defineProperty(n,"firstIndexOf_li",{enumerable:!1,value:function(t){if(null==this)throw new TypeError;var e=Object(this).length>>>0;if(0===e)return-1;for(var n=0;n<e;++n){if(t(this[n]))return n}return-1}}),n.remove_li||Object.defineProperty(n,"remove_li",{enumerable:!1,value:function(t){if(!this)throw new TypeError;if(0===Object(this).length>>>0)return-1;var e=this.indexOf(t);return e>=0?(this.splice(e,1),e):-1}})}}(window),Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.$;if(!t.lanceUtils){var e=function(){function t(){}return t.prototype.offsetRect=function(t,e,n){return i(t.left+e,t.top+n,t.width,t.height)},t.prototype.insetRect=function(t,e,n){return void 0===n&&(n=e),i(t.left+.5*e,t.top+.5*n,t.width-e,t.height-n)},t.prototype.getElementClampInWindowValues=function(t){var e=t.rect,n=t.margin,o=t.win,r=t.calcScroll;o=o||window.top;var a=i(r?o.pageXOffset:0,r?o.pageYOffset:0,o.innerWidth,o.innerHeight);if(n){var s=0,u=0;"number"==typeof n?s=u=n:(s=n.x,u=n.y),a=this.insetRect(a,s,u)}return this.getRectsShiftDelta(e,a)},t.prototype.getElementBoundingBox=function(t,e){if(void 0===e&&(e=window.top),this.getOwnerWindow(t)===e)return t.getBoundingClientRect();var n=this.getOwnerIframe(t);if(null==n)return t.getBoundingClientRect();for(var o=[t.getBoundingClientRect()],r=n;r;){var i=this.getBoundingClientRectWithBorderOffset(r);if(o.push(i),(r=this.getOwnerIframe(r))&&this.getOwnerWindow(r)===e){var a=this.getBoundingClientRectWithBorderOffset(r);o.push(a);break}}return this.mergeRectOffsets(o)},t.prototype.getElementRects=function(t,e){function n(t){return isNaN(t)||t<0?0:t}void 0===e&&(e=window.top);var o=e.document.documentElement,r=o.clientHeight,a=o.clientWidth,s=this.getElementBoundingBox(t,e);if(s.width<=0||s.height<=0)return{full:s,visible:null,localVisible:null};var u=0,l=0,c=s.height,d=s.width;return s.bottom<0||s.top>r||s.right<0||s.left>a||(u=n(-s.top),c=s.height-n(s.bottom-r),l=n(-s.left),d=s.width-n(s.right-a)),{localVisible:i(l,u,d-l,c-u),visible:i(s.left+l,s.top+u,d-l,c-u),full:s}},t.prototype.constrainElementIn=function(t,e,n){void 0===n&&(n=window.top);var o=this.getElementBoundingBox(t,n),r=this.getElementRects(e,n),i=r.visible;return{target:{full:o,visible:null,localVisible:null},box:r,shiftBy:this.getRectsShiftDelta(o,i)}},t.prototype.getRectsShiftDelta=function(t,e){var n={x:0,y:0};if(!t||!e)return n;var o=Math.max(0,Math.round(e.top-t.top)),r=Math.min(0,Math.round(e.bottom-t.bottom));o>=1?n.y=o:r<=1&&(n.y=r);var i=Math.max(0,Math.round(e.left-t.left)),a=Math.min(0,Math.round(e.right-t.right));return i>=1?n.x=i:a<=1&&(n.x=a),n},t.prototype.getElementDimensions=function(t){var e=t.ownerDocument.defaultView.getComputedStyle(t);return{borderLeft:parseFloat(e.borderLeftWidth),borderRight:parseFloat(e.borderRightWidth),borderTop:parseFloat(e.borderTopWidth),borderBottom:parseFloat(e.borderBottomWidth),marginLeft:parseFloat(e.marginLeft),marginRight:parseFloat(e.marginRight),marginTop:parseFloat(e.marginTop),marginBottom:parseFloat(e.marginBottom),paddingLeft:parseFloat(e.paddingLeft),paddingRight:parseFloat(e.paddingRight),paddingTop:parseFloat(e.paddingTop),paddingBottom:parseFloat(e.paddingBottom)}},t.prototype.getOwnerWindow=function(t){return t.ownerDocument?t.ownerDocument.defaultView:null},t.prototype.getOwnerIframe=function(t){var e=this.getOwnerWindow(t);return e?e.frameElement:null},t.prototype.getBoundingClientRectWithBorderOffset=function(t){var e=this.getElementDimensions(t);return this.mergeRectOffsets([t.getBoundingClientRect(),{top:e.borderTop,left:e.borderLeft,bottom:e.borderBottom,right:e.borderRight,width:0,height:0,x:e.borderLeft,y:e.borderTop}])},t.prototype.mergeRectOffsets=function(t){return t.reduce((function(t,e){if(null==t)return e;var n=t.top+e.top,o=t.left+e.left;return{top:n,left:o,width:t.width,height:t.height,bottom:n+t.height,right:o+t.width,x:o,y:n}}))},t}(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=[{regex:/%MMM/g,replacer:function(t){return t.localDictionary.months[t.date.getMonth()]}},{regex:/%MM/g,replacer:function(e){return t.utils.strings.padNumber(e.date.getMonth()+1,2)}},{regex:/%M/g,replacer:function(e){return t.utils.strings.toStringArray(e.localizeFunction("full_months")||[])[e.date.getMonth()]}},{regex:/%YY/g,replacer:function(t){return String(t.date.getFullYear()%100)}},{regex:/%Y/g,replacer:function(t){return String(t.date.getFullYear())}},{regex:/%hh/g,replacer:function(e){return t.utils.strings.padNumber(e.date.getHours(),2)}},{regex:/%h/g,replacer:function(t){return String(t.date.getHours())}},{regex:/%ma/g,replacer:function(t){return String(t.localDictionary.minutesAgo)}},{regex:/%mm/g,replacer:function(e){return t.utils.strings.padNumber(e.date.getMinutes(),2)}},{regex:/%m/g,replacer:function(t){return String(t.date.getMinutes())}},{regex:/%dd/g,replacer:function(e){return t.utils.strings.padNumber(e.date.getDate(),2)}},{regex:/%d/g,replacer:function(t){return String(t.date.getDate())}},{regex:/%F/g,replacer:function(t){return String(t.localDictionary.dateString)}},{regex:/\[\[([^\]]+)\]\]/g,replacer:function(t,e,n){return t.localizeFunction(n)}}],r=function(){function o(){this.boundsProcessor=new e}return o.prototype.formatDate=function(e,o,r){if(!o)return t.lanceUtils.relativeDateFormat(e,r);var i=new Date,u=r||function(t){return t},l=a(e),c=t.utils.strings.toStringArray(u("months")||n),d={dateString:l.toLocaleDateString()};d.months=c;var f=Math.floor((i.getTime()-l.getTime())/6e4);return d.minutesAgo=f,s(o,l,r,d)},o.prototype.relativeDateFormat=function(e,o){if(!e)return"";var r,i,u,l=new Date,c=l.getDate(),d=l.getMonth(),f=l.getFullYear(),p=o||function(t){return t},h=a(e),g=p("months")||n,m={dateString:h.toLocaleDateString()};return"string"==typeof g&&(g=g.split(",").map((function(t){return t.trim()}))),m.months=g,c==h.getDate()&&d==h.getMonth()&&f==h.getFullYear()?(i=Math.floor((l.getTime()-h.getTime())/6e4),m.minutesAgo=i,i<1?p("now"):i<2?p("1 minute ago"):i<60?(r=p("minutes ago"))?s(r,h,p,m):i+"minutes ago":(r=p("on time"))?s(r,h,p,m):(u=h.getHours(),i=h.getMinutes(),"on "+t.utils.strings.padNumber(u,2)+":"+t.utils.strings.padNumber(i,2))):f==h.getFullYear()?(r=p("on date"))?s(r,h,p,m):"on "+g[h.getMonth()]+" "+h.getDate():(r=p("on full date"))?s(r,h,p,m):h.toLocaleDateString()},o.prototype.timeOfTimestamp=function(e){if(!e)return"";var n=a(e),o=n.getHours(),r=n.getMinutes();return t.utils.strings.padString(o,2,"0")+":"+t.utils.strings.padString(r,2,"0")},o.prototype.escapeRegExp=function(t){return(t||"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},o}();t.lanceUtils=new r}function i(t,e,n,o){return{left:t,top:e,width:n,height:o,right:t+n,bottom:e+o,x:t,y:e}}function a(t){var e=typeof t;return"string"==e||"number"==e?new Date(1e3*Number(t)):t}function s(t,e,n,r){for(var i,a={date:e,localizeFunction:n,localDictionary:r},s=0,u=o.length;s<u;++s)(i=o[s]).regex.test(t)&&(t=t.replace(i.regex,(function(t,e){return i.replacer(a,t,e)})));return t}}(window.LANCE),Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e;if(null===(e=t.Annotations)||void 0===e||!e.Events){var n=t.$,o={id:"",userId:0,userName:"",time:0,text:""},r=void 0,i=[118,104,119,87,108,112,104,114,120,119],a=[121,100,111,108,103,100,119,104,68,113,113,114,119,100,119,108,114,113],s=window,u={edit:{first:"owner",last:"owner",default:"owner"},delete:{first:"owner",last:"owner",default:"owner"},resolve:{first:"opener",last:"opener",default:"opener"}},l=Math.round(1e3*Math.random()),c="opener",d="owner",f="none",p="user",h="any",g=function(){function t(t){t=function(t,e){var n={};for(var o in t=t||{},e)t.hasOwnProperty(o)?n[o]=t[o]:n[o]=e[o];return n}(t,o),n.extend(this,t),this._selected=!1,this._userPicture=""}return t.prototype.isSelected=function(){return this._selected},t.prototype.setSelected=function(t){this._selected=Boolean(t)},t.prototype.setTime=function(t){if(t instanceof Date)this.time=Math.round(t.getTime()/1e3);else{var e=typeof t;this.time="string"===e?parseInt(t):t}},t.prototype.getUserPicture=function(){return this._userPicture},t.prototype.setUserPicture=function(t){this._userPicture=t||""},t}(),m=function(){function e(e){if(this._attributes={},!e)throw new Error("Annotation constructed with empty data");if(!e.id)throw new Error("cannot create an annotation without an id");this._selected=!1,this._id=e.id,this._comments=[],this._resolved=Boolean(e.resolved),this._commentId=t.utils.strings.randomString(3),this.sequence=0;var n=e.attributes;if(n&&n instanceof Object){var o=this.attributes;Object.keys(n).forEach((function(t){o[t]=n[t]}))}return this}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return n.extend(!0,{},this._attributes)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"comments",{get:function(){return this._comments},enumerable:!1,configurable:!0}),e.prototype.text=function(){var t,e,n=[],o=this._comments,r=o.length;for(t=0;t<r;++t)e=o[t],n.push((e.userName||"user")+": "+e.text);return n.join("\n")},e.prototype.saveToObject=function(){var t=this.attributes,e={},n={id:this.id,resolved:this._resolved,sequence:this.sequence,attributes:e,comments:[]};Object.keys(t).forEach((function(n){e[n]=t[n]}));for(var o=n.comments,r=this._comments,i=0,a=r.length;i<a;++i){var s=r[i];s.text&&o.push(_(s))}return n},e.prototype.isSelected=function(){return this._selected},e.prototype.isResolved=function(){return this._resolved},e.prototype.setResolved=function(t){this._resolved=Boolean(t)},e.prototype.lastComment=function(){return this.getCommentByIndex(this._comments.length-1)},e.prototype.firstComment=function(){return this.getCommentByIndex(0)},e.prototype.isFirst=function(t){return 0===this.getCommentIndexById(t)},e.prototype.isLast=function(t){var e=this.getCommentIndexById(t);return e>=0&&e===this._comments.length-1},e.prototype.count=function(){return this._comments.length},e.prototype.getCommentIndexById=function(t){return this._comments.firstIndexOf_li((function(e){return e.id==t}))},e.prototype.getCommentById=function(t){var e=this.getCommentIndexById(t);return e>=0?this._comments[e]:null},e.prototype.getCommentByIndex=function(t){return this._comments[t]||null},e.prototype.setCommentText=function(t,e){var n=this.getCommentById(t);n&&(n.text=e,n.setTime(new Date))},e.prototype.addComment=function(t){(t=t||{}).id=t.id||this._getNextCommentId();var e=new g(t);return e.setTime(t.time||new Date),this._comments.push(e),e},e.prototype.setSelected=function(t){this._selected=Boolean(t),t||this._comments.forEach((function(t){t.setSelected(!1)}))},e.prototype.selectComment=function(t,e){var n=this.getCommentById(t);n&&(e?(this._comments.forEach((function(t){t.setSelected(!1)})),n.setSelected(!0)):n.setSelected(!1))},e.prototype.deleteComment=function(t){var e=this.getCommentIndexById(t),n=e>=0;return n&&this._comments.splice(e,1),n},e.prototype.getOpenerId=function(){var t=this.getCommentByIndex(0);return t&&t.userId},e.prototype._getNextCommentId=function(){return this._commentId+l++},e}(),v=function(){function e(e){if(this._idSeed=t.utils.strings.randomString(12),this._users={},this._customAttributes={},!(e=e||{}).owner)throw new Error("Annotations constructor: no owner");if(this._owner=e.owner,t.mixinEvents(this),this.setPermissions(e.permissions,{notify:!1}),this._defaultUserPicture=e.defaultPicture,this._userId=e.userId||"0",this._disableCount=0,e.idGenerator){if("function"!=typeof e.idGenerator)throw new Error("options.idGenerator: bad type "+typeof e.idGenerator);this._idGenerator=e.idGenerator}else this._idGenerator=null;return this._statusCallback=e.statusCallback,this._isEnabled=!0,this._requestUserCallback=e.requestUser,this._validate=s[b(i)].bind(s),this._annotations=[],this._annotationsMap={},this._hostOptions=e.hostOptions,this.addCustomAttributes(e.owner.customAttributes),this._baseId=0,e.users&&this.addUsers(e.users),this}return e.extractAnnotation=function(e){if(!e||!e.getAttribute)return null;try{var n=e.getAttribute("data-ant");if(n)return n=unescape(n),JSON.parse(n)}catch(e){t.logger.error("While extracting annotation",e)}return null},e.prototype.getLocalizedString=function(t){return this._owner.getLocalizedString(t)},e.prototype.resolvePath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._owner.resolvePath.apply(this._owner,t)},e.prototype.setPermissions=function(e,o){var r=n.extend(!0,{},u,y(e)),i=r.delete,a=r.resolve,s=o&&o.notify,l=r.edit,f=function(t,e,n){return{delete:{all:e===h,user:e===p||e===h,owner:e===d||e===p||e===h,opener:e===c||e===p||e===h},edit:{all:t===h,user:t===p||t===h,owner:t===d||t===p||t===h,opener:t===c||t===p||t===h},resolve:{all:n===h,user:n===p||n===h,owner:n===d||n===p||n===h,opener:n===c||n===p||n===h}}};this._permissions={last:f(l.last,i.last,a.last),first:f(l.first,i.first,a.first),default:f(l.default,i.default,a.default)},!1!==s&&this.trigger(t.Annotations.Events.RELOAD)},e.prototype.setDefaultAvatar=function(t){this._defaultUserPicture=t},e.prototype.doneEditing=function(e){this.unselectAll(),this.trigger(t.Annotations.Events.DONE_EDITING,e)},e.prototype.setUserId=function(e){if(e===this._userId)return e;var o=this;return this._userId=String(e),n.each(this._annotations,(function(e,n){o.trigger(t.Annotations.Events.ANNOTATION_UPDATED,{annotation:n})})),this._userId},e.prototype.getUserId=function(){return this._userId},e.prototype.unselectAll=function(t){var e=this;t=t||[],this._annotations.forEach((function(n){n.isSelected()&&!n.isNew&&t.indexOf(n)<0&&e._selectOneAnnotation({annotation:n,selected:!1,hostData:{compact:!0},isDeselecting:!1})}))},e.prototype.disable=function(t){!0===t&&this._disableCount>0||1==++this._disableCount&&this._setEnabled(!1)},e.prototype.enable=function(t){t?this._disableCount=0:this._disableCount>0&&--this._disableCount,0===this._disableCount&&this._setEnabled(!0)},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.countAnnotations=function(){return this._annotations.length},e.prototype.getAnnotationByIndex=function(t){return this._annotations[t]||null},e.prototype.getAnnotationById=function(t){return this._findAnnotation(t)},e.prototype.compactAnnotation=function(t){var e=this,n=this._findAnnotation(t);if(n&&!n.isNew){var o,r=n.count()-1,i=[];if(r<0)return this._adjustAnnotationLength(n);for(;r>=0;)(o=n.getCommentByIndex(r)).text||i.push(o.id),--r;i.forEach((function(t){e._adjustCommentLength(n,t)}))}},e.prototype.deleteAnnotation=function(t){var e=this._findAnnotation(t);if(e){var n=[].slice.call(arguments);n[0]=e,this._adjustAnnotationLength.apply(this,n)}},e.prototype.insertAnnotation=function(t){var e=new m({id:this._createId()}),n=e.addComment({}),o=this._getUser(this._userId);return this._loadCommentUserDetails(n,o),this._addAnnotation(e,t),e},e.prototype.validateAnnotation=function(t){return Boolean(t&&this._annotations[t])},e.prototype.addCustomAttributes=function(t){if(t){t instanceof Array||(t=String(t).split(","));for(var e,n=t.length;--n>=0;)(e=(e=t[n])&&String(e).trim())&&(this._customAttributes[e]=!0)}},e.prototype.setAttribute=function(e,n,o){var r=this._getOrSetAttribute(!1,e,n,o);return r&&this.trigger(t.Annotations.Events.ATTRIBUTE_CHANGED,{annotation:r,attributes:{attrName:o}}),r},e.prototype.setAnnotationsSequence=function(t){var e,n,o=this._annotations,r=t&&t.length||0,i=!1;if(r!==o.length)throw new Error("set annotations sequence: array length mismatch");for(e=0;e<r;++e)(n=this._findAnnotation(t[e]))&&n!==o[e]&&(n.sequence=e,o[e]=n,i=!0);i&&this._renumberAnnotations()},e.prototype.getAttribute=function(t,e){return this._getOrSetAttribute(!0,t,e)},e.prototype.createCommentFilter=function(t){if(!t)return function(t){return!0};var e,n=new RegExp((e=t)?String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):"","i");return function(t){return!!t&&Boolean(t.userName&&n.test(t.userName)||t.text&&n.test(t.text))}},e.prototype._findAnnotation=function(t){return"string"==typeof t?this._annotationsMap[t]:t},e.prototype._selectOneAnnotation=function(e){var n=this._findAnnotation(e.annotation);if(n){var o=Boolean(e.selected);if(o!==n.isSelected()){var r={isSelected:o,annotation:n,hostData:e.hostData,isDeselecting:e.isDeselecting};n.setSelected(o),this.trigger(t.Annotations.Events.ANNOTATION_SELECTED,r),this.trigger(t.Annotations.Events.ANNOTATION_POSTSELECT,r),!o&&e.hostData&&e.hostData.compact&&this.compactAnnotation(n)}}},e.prototype._setEnabled=function(e){this._isEnabled=e,e||this.unselectAll(),this.trigger(t.Annotations.Events.ENABLED_CHANGED,{isEnabled:e})},Object.defineProperty(e.prototype,"keyboardMapper",{get:function(){if(void 0!==r)return r;var t={".data-flite-created":1},e=this._hostOptions&&this._hostOptions.find&&this._hostOptions.find("mark,edit,toggle,append".split(/[^a-z]/).map((function(t){return t[0]})).join(""));return Object.keys(t).forEach((function(e){/^\./.test(e)&&delete t[e]})),!e&&Object.keys(t).length>0||(e.toArray().forEach((function(e){if(t&&e.attributes&&e.attributes.length){var n={},o=function(t){if(t){var e=1+t.split("").reduce((function(t,e,n){return(n+1)*e.charCodeAt(0)+t}),-1);n[e]&&delete n[e]}};Object.keys(t||{}).forEach((function(e){return n[e]=t[e]})),[].slice.apply(e.attributes).forEach((function(t){o(t.nodeValue),o(t.nodeName)})),0===Object.keys(n).length&&(t=void 0)}})),r=Boolean(Object.keys(t||{}).length>0))},enumerable:!1,configurable:!0}),e.prototype._getOrSetAttribute=function(e,n,o,r){var i=this._annotations.first_li((function(t){return t.id===n})),a=e?"getAttribute":"setAttribute";return i?this._customAttributes.hasOwnProperty(o)?e?i.attributes[o]:(i.attributes[o]=r,i):(t.logger.error(a,": attribute",o,"not allowed"),null):(t.logger.error(a,": no annotation with id",n),null)},e.prototype._addAnnotation=function(e,n){var o="number"==typeof n.position?n.position:999999,r=this._annotations,i=function(t,e){return(e||"").split("").reduce((function(t,e){return t+e.charCodeAt(0)}),16843009&t|12e4)}(o),s=this[b(a)].bind(this,e.id);if(!n.fromData&&!this._validate(s,i))throw new Error("Invalid annotation");o=Math.min(r.length,Math.max(0,o)),e.sequence=o,e.isNew=!0,setTimeout((function(){e.isNew=!1}),200),r.splice(o,0,e),this._annotationsMap[e.id]=e;var u=o<r.length-1?r[o+1].id:null,l=t.Annotations.Events.ANNOTATION_CREATED+(this.keyboardMapper?" ":"");!1!==n.notify&&this.trigger(l,{annotation:e,before:u,context:n.context}),o<r.length&&this._renumberAnnotations()},e.prototype._renumberAnnotations=function(){var e=[];this._annotations.forEach((function(t,n){t.sequence=n,e.push(t.id)})),this.trigger(t.Annotations.Events.ANNOTATIONS_RENUMBERED,{sequence:e})},e.prototype._adjustAnnotationLength=function(e){var n=e.firstComment(),o=this._getAccess(e,n);!n||o.delete||"delete"===arguments[1]?(e.isSelected()&&this._selectOneAnnotation({annotation:e,selected:!1,hostData:null,isDeselecting:!1}),this._annotations.remove_li(e),delete this._annotationsMap[e.id],this.trigger(t.Annotations.Events.ANNOTATION_DELETED,{id:e.id})):t.logger.error("deleteAnnotation: access denied")},e.prototype._createId=function(){for(var t,e=0;e<10;++e)if(t=this._idGenerator?this._idGenerator():this._idSeed+String(this._baseId++),!this._annotationsMap[t])return t;throw new Error("cannot generate a new annotation id, 10 attempts resulted in an existing id")},e.prototype.setCommentText=function(e,n,o){var r=this._findAnnotation(e),i=r&&r.getCommentById(n);if(!i)return null;if(!this._getCommentStatus(r,i).canEdit)return t.logger.error("setCommentText: permission denied"),null;if(o)r.setCommentText(i.id,o);else if(1===r.count()||!r.isFirst(n))return this._adjustCommentLength(r,n);return this.trigger(t.Annotations.Events.COMMENT_CHANGED,{annotation:r,comment:i,status:this._getCommentStatus(r,i)}),i},e.prototype.deleteComment=function(t,e){var n=this._findAnnotation(t);return n&&this._adjustCommentLength(n,e),this},e.prototype.addComment=function(e,n,o,r){void 0===r&&(r=!1);var i=this._findAnnotation(e),a=i&&i.getCommentById(n);if(!a)return null;if(i.isNew=!1,!a.text)return o?this.setCommentText(e,n,o):1===i.count()?(this.deleteAnnotation(e),null):void 0;a=i.addComment({text:o});var s=this._getUser(this._userId);this._loadCommentUserDetails(a,s),r||this.trigger(t.Annotations.Events.COMMENT_ADDED,{annotation:i,comment:a,status:this._getCommentStatus(i,a)})},e.prototype.revertComment=function(t,e,n){var o=this._findAnnotation(t),r=o&&o.getCommentById(e);return r&&n&&!r.text?this._adjustCommentLength(o,e):r},e.prototype.getComment=function(t,e){var n=this._findAnnotation(t),o=n&&n.getCommentById(e);return{annotation:n,comment:o,status:o&&this._getCommentStatus(n,o)}},e.prototype.selectComment=function(e,n,o,r,i){o=Boolean(o);var a=this._findAnnotation(e),s=a&&a.getCommentById(n);s?(o&&this.selectAnnotation({id:e,select:o,hostData:i,isDeselecting:!1}),a.selectComment(n,o),this.trigger(t.Annotations.Events.COMMENT_SELECTED,{annotation:a,comment:s,isSelected:o,isEdit:r&&!a.isResolved()})):t.logger.warn("selectComment: can't find annotation "+e+" or comment "+n)},e.prototype.getCommentStatus=function(e,n){var o=this._findAnnotation(e),r=o&&o.getCommentById(n);return r?this._getCommentStatus(o,r):(t.logger.warn("getCommentStatus: not found",e,n),{})},e.prototype._getAccess=function(t,e){if(!t||!e)return{edit:!1,delete:!1,resolve:!1,reopen:!1};var n,o=t.isFirst(e.id),r=t.isLast(e.id),i=t.isResolved(),a=this._userId,s=t.getOpenerId(),u=e.userId,l=this._permissions,c=function(t,e,n){var o=A(s,u,a,n);return{edit:!i&&A(s,u,a,t),delete:A(s,u,a,e),resolve:!i&&o,reopen:i&&o}};if(o&&r){var d=c(l.first.edit,l.first.delete,l.first.resolve),f=c(l.last.edit,l.last.delete,l.last.resolve);n={edit:d.edit||f.edit,delete:d.delete||f.delete,resolve:d.resolve||f.resolve,reopen:d.reopen||f.reopen}}else n=o?c(l.first.edit,l.first.delete,l.first.resolve):r?c(l.last.edit,l.last.delete,l.last.resolve):c(l.default.edit,l.default.delete,l.default.resolve);return e.text||e.userId!==this._userId||(n.edit=!0),n},e.prototype._adjustCommentLength=function(e,n){var o=e.getCommentById(n);if(!o)return null;if(!this._getAccess(e,o).delete)return t.logger.error("delete comment: access denied"),null;if(e.deleteComment(n)){if(e.count()>0)return this.trigger(t.Annotations.Events.COMMENT_DELETED,{annotation:e,id:n}),null;this._adjustAnnotationLength(e)}return o},e.prototype._getCommentStatus=function(t,e){var n=t.isLast(e.id),o=t.isResolved(),r=this._getAccess(t,e),i={isResolved:o,isSelected:e.isSelected(),isLast:n,isFirst:t.isFirst(e.id),isNew:!e.text,isOwnerComment:e.userId==this._userId,canDelete:r.delete,canEdit:r.edit,canResolve:r.resolve,canReopen:r.reopen,canReply:!o&&Boolean(this._userId),custom:{}};return this._statusCallback&&this._statusCallback({comment:e,annotation:t,status:i,owner:this}),i},e.prototype._getAnnotationLength=function(e){var n=this,o=this._findAnnotation(e);if(o)try{for(var r=[43,71].concat([104,112,114,35,121,104,117]).concat([118,108,114,113,44,35]),i=0;i<o.count();++i){var a=o.getCommentByIndex(i);if(a){var s=a.text,u=b(r);a.text=""+u+(s||"").replace(u,"").substring(1)}}this._validate((function(){n.trigger(t.Annotations.Events.RELOAD)}),225)}catch(t){}},e.prototype.selectAnnotation=function(t){var e=this._findAnnotation(t.id),n=!1!==t.select;e&&(e.isSelected()!==n&&(n&&this.unselectAll([e]),this._selectOneAnnotation({annotation:e,selected:n,hostData:t.hostData,isDeselecting:t.isDeselecting})))},e.prototype.resolveAnnotation=function(e,n,o,r){if("resolve"!==r){var i=this.getCommentStatus(e,n);if(o&&!i.canResolve)return t.logger.warn("Failed attempt to resolve annotation "+e+" by user "+this._userId),this;if(!o&&!i.canReopen)return t.logger.warn("Failed attempt to reopen annotation "+e+" by user "+this._userId),this}var a=this._findAnnotation(e);return a&&(a.setResolved(o),this.trigger(t.Annotations.Events.ANNOTATION_RESOLVED,{annotation:a}),this.trigger(t.Annotations.Events.ANNOTATION_UPDATED,{annotation:a})),this},e.prototype.hasAnnotation=function(t){return Boolean(this._findAnnotation(t))},e.prototype.getSelectedAnnotationIds=function(){return this._annotations.filter((function(t){return t.isSelected()})).map((function(t){return t.id}))},e.prototype.getAllAnnotations=function(){return this._annotations.map((function(t){return t.id}))},e.prototype.loadFromHTMLString=function(t){var e=window.document.createElement("div");e.innerHTML=t,this.loadFromDOMNode(e)},e.prototype.loadFromDOMNode=function(e){if(e){var n,o=[];try{var r=e.getElementsByTagName(this._owner.tagName),i=void 0,a=r.length,s=void 0;for(s=0;s<a;++s)i=r[s],(n=t.Annotations.extractAnnotation(i))&&o.push(n)}finally{this.loadFromData(o)}}},e.prototype.destroy=function(){this.loadFromData(null),this.removeAllListeners()},e.prototype.loadFromData=function(e){e=e||[],this.trigger(t.Annotations.Events.RESET),this._annotations.splice(0),t.utils.clearObject(this._annotationsMap);var n=e.length;if(!(isNaN(n)||n<1))for(var o=0;o<n;++o){var r=e[o];this.loadAnnotationFromData(r)}},e.prototype.serializeAnnotation=function(t){return t?("string"===typeof t&&(t=this._findAnnotation(t)),t?t.saveToObject():null):""},e.prototype.loadAnnotationFromData=function(e,n){var o,r=this;if(void 0===n&&(n=99999),e&&(o=e.id)&&!this._findAnnotation(o))try{var i=new m(e),a=[];if(e.comments&&e.comments.length)for(var s=e.comments,u=s&&s.length,l=void 0,c=void 0,d=void 0,f=0;f<u;++f)(l=s[f]).text&&l.userId&&(c=i.addComment(l),(d=this._getUser(c.userId))||a[l.userId]||(this.addUsers([{id:l.userId,name:l.userName}]),d=this._getUser(l.userId),a.push(l.userId)),this._loadCommentUserDetails(c,d));return i.count()&&this._addAnnotation(i,{position:n,fromData:!0}),this._requestUserCallback&&a.forEach((function(t){var e=r._getUser(t);r._requestUserCallback(e,(function(t){r.addUsers([t])}))})),i}catch(e){return t.logger.error(e),null}},e.prototype._refreshUser=function(e){var n=this,o=e.id,r=o===this._userId;this._annotations.forEach((function(i){for(var a,s=0,u=i.count();s<u;++s)((a=i.getCommentByIndex(s)).userId===o||!a.userId&&r)&&(n._loadCommentUserDetails(a,e),n.trigger(t.Annotations.Events.COMMENT_CHANGED,{annotation:i,comment:a,status:n._getCommentStatus(i,a)}))}))},e.prototype._loadCommentUserDetails=function(t,e){return t.userId=e&&e.id||t.userId||"0",t.userName=e&&e.name||"user",t.setUserPicture(e&&e.picture||this._defaultUserPicture),t},e.prototype._getUser=function(t){return t&&this._users[t]||null},e.prototype.addUsers=function(t){var e=this;t&&t.forEach((function(t){var n,o=(n=(n=t)||{},{id:String(n.id),name:String(n.name||"User"),picture:String(n.picture||"")}),r=e._users[o.id];r&&r.name===o.name&&r.picture===o.picture||(e._users[o.id]=o,e._refreshUser(o))}))},e.Events={ANNOTATION_CREATED:"annotation:created",ANNOTATION_DELETED:"annotation:deleted",ANNOTATION_RESOLVED:"annotation:resolved",ANNOTATION_SELECTED:"annotation:selected",ANNOTATION_UPDATED:"annotation:updated",COMMENT_ADDED:"annotation:commentcreated",COMMENT_DELETED:"annotation:commentdeleted",COMMENT_CHANGED:"annotation:commentchanged",COMMENT_SELECTED:"annotation:commentselected",RESET:"annotation:reset",RELOAD:"annotation:reload",ENABLED_CHANGED:"annotation:enable",SIZE_CHANGED:"annotation:resize",DONE_EDITING:"annotation:done-editing",ATTRIBUTE_CHANGED:"annotation:attribute-changed",ANNOTATIONS_RENUMBERED:"annotation:renumbered",ANNOTATION_POSTSELECT:"annotation:preselect"},e}();t.Annotations=v}function y(e){if(!e)return null;var o=n.extend({},{edit:{},delete:{},resolve:{}}),r=function(t,e){t&&("string"==typeof t?e.first=e.last=e.default=t:"object"==typeof t&&["first","last","default"].forEach((function(n){e[n]=t[n]||t.default||void 0})))};return r(e.edit,o.edit),r(e.delete,o.delete),r(e.resolve,o.resolve),function e(n){if(!n)return null;var o,r;for(var i in n)if(n.hasOwnProperty(i)&&(r=typeof(o=n[i]),void 0!==o)){if(null===o)return t.logger.error("invalid null permissions key",i,"\nUsing default permissions"),null;if("string"===r){if(n[i]=o=o.toLowerCase(),o!==c&&o!==h&&o!==d&&o!==p&&o!==f)return t.logger.error("invalid permission; key:",i,"value:",o,"\nUsing default permissions"),null}else{if("object"!==r)return t.logger.error("invalid permission; key:",i,"value:",o),null;if(!e(o))return null}}return n}(o)}function b(t){return t.map((function(t){return t-3})).map((function(t){return String.fromCharCode(t)})).join("")}function _(t){var e,n={};return Object.keys(t).forEach((function(o){"_"!=o.charAt(0)&&void 0!==(e=t[o])&&"function"!=typeof e&&(n[o]=t[o])})),n}function A(t,e,n,o){return null==e||(null==n?o.all:n===t&&e===t?o.opener||o.owner:e===n?o.owner:o.user)}}(window.LANCE),Object.defineProperty(e,"__esModule",{value:!0}),function(t){if(!t.lancePluginUtils){var e=t.$,n=void 0,o=0,r=[{regex:/%([\da-zA-Z])?S/g,replacer:function(t,e){var n=e.map((function(t){return t.userName+": "+t.text})).map((function(t){return t.length>25?t.substring(0,25)+"â¦":t})).join("\n");return n.length>80?n.substring(0,80)+"â¦":n}},{regex:/%([\da-zA-Z])?C/g,replacer:function(t,e){var n=e.map((function(t){return t.text})).map((function(t){return t.length>25?t.substring(0,25)+"â¦":t})).join("\n");return n.length>80?n.substring(0,80)+"â¦":n}},{regex:/%([\da-zA-Z])?U/g,replacer:function(t,e){return e.map((function(t){return t.userName})).join("\n")}}],i=function(){function e(t,e){this._scopes=[],this._callback=t,this._compare=e}return e.prototype.add=function(e,n){var o=this.findScope(e)||this.addScope(e,n);o.state=n,o.timeout&&clearTimeout(o.timeout),t.logger.debug("setting timeout for node",e.attr("data-annotation-id"),n),o.timeout=setTimeout(this.onTimeout.bind(this,o),150)},e.prototype.remove=function(t){var e=this.findScopeIndex(t);if(e>=0){var n=this._scopes[e];n.timeout&&clearTimeout(n.timeout),this._scopes.splice(e,1)}},e.prototype.removeAll=function(){for(var t,e=this._scopes.length;e>=0;--e)(t=this._scopes[e])&&t.timeout&&clearTimeout(t.timeout);this._scopes=[]},e.prototype.onTimeout=function(e){var n=this.findScopeIndex(e&&e.scope);if(n<0)t.logger.warn("debounce timeout: can't find record");else{var o=this._scopes[n];this._scopes.splice(n,1),this._callback(o.scope,o.state)}},e.prototype.addScope=function(t,e){var n={scope:t,state:e,timeout:0};return this._scopes.push(n),n},e.prototype.findScope=function(t){var e=this.findScopeIndex(t);return e>=0?this._scopes[e]:null},e.prototype.findScopeIndex=function(t){for(var e=this._scopes.length-1;e>=0;--e)if(this._compare(this._scopes[e].scope,t))return e;return-1},e}(),a=function(){function a(){}return Object.defineProperty(a.prototype,"spellingStack",{get:function(){if(void 0!==n)return n;var o=window.document,r=e(o["th[e]a~d.CKEDITOR".split("").reduce((function(t,e,n,o){return n<8&&n%2&&(t+=e),t}),"")]).find("Mm eot anchor".split("").reduce((function(t,e,n,o){return n<8&&n%2&&(t+=e),t}),""));return n=t.lancePluginUtils.updateSpellingStack(r)},enumerable:!1,configurable:!0}),a.prototype.createDebouncer=function(t,e){return new i(t,e)},a.prototype.onEditorNodeClicked=function(e,n){var o=n&&e&&e.getAnnotations();if(o){var r=e.nodesHandler.findAnnotationNode(n),i=r&&r.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId);i?o.selectAnnotation({id:i,select:!0,hostData:{focus:!1,node:n}}):o.unselectAll()}},a.prototype.isInteractiveAnnotation=function(t){return"interactive"===(null==t?void 0:t.mode)},Object.defineProperty(a.prototype,"pluginAttributes",{get:function(){return a.LANCE_ATTRIBUTES},enumerable:!1,configurable:!0}),a.prototype.annotate=function(t){var e=t&&t.getAnnotations();if(e&&e.isEnabled()){var n=!this.spellingStack&&e.insertAnnotation({position:t.getInsertPosition(),context:{mode:"interactive"}});if(n){var o=t.nodesHandler.findAnnotationNodesForId(n.id)[0],r=n.firstComment();e.selectComment(n.id,r.id,!0,!0,{node:o,focus:!t.isInline()})}}},Object.defineProperty(a.prototype,"CONTENT_EDITABLE_ATTR",{get:function(){return a.ceattr},enumerable:!1,configurable:!0}),a.prototype.updateSpellingStack=function(t){var n={"tr,td,ul,ol":!0};return function(t){Object.keys(t).forEach((function(e){/^tr,/.test(e)&&delete t[e]}))}(n),t&&t.length?(t.each((function(t,o){if(o.attributes&&o.attributes.length&&n){var r=e.extend({},n),i=function(t){var e=(t||"").split("").reduce((function(t,e,n,o){return t+(n+1)*e.charCodeAt(0)}),0);return r[e]&&delete r[e],e};Array.prototype.slice.apply(o.attributes).forEach((function(t){i(t.nodeValue),i(t.nodeName)})),0===Object.keys(r).length&&(n=void 0)}})),Boolean(n)):Object.keys(n).length>0},a.prototype.getAnnotationNodePosition=function(e,n){try{if(!n)return 999999;for(var o,r=0,i=e.length;r<i;++r){if((o=e[r])===n)return r;if(t.utils.dom.compareNodePosition(n,o)<=0)return r}return e.length}catch(t){}return 0},a.prototype.validateKey=function(){var t="api-key-placeholder";if(!/placeholder/.test(t)){var e=document.head&&document.head.querySelectorAll("meta[name='LANCE-API-KEY']"),n=e&&e.length&&e[0];return n&&n.getAttribute&&n.getAttribute("content")===t}return!0},a.prototype.attachMutationObserver=function(n,o){if(!MutationObserver)return{interval:null,start:function(){this.stop(),this.interval=setInterval((function(){t.lancePluginUtils.syncNodes(n)}),1500)},stop:function(){if(Boolean(this.interval)){var t=this;return clearInterval(this.interval),this.interval=null,function(){t.start()}}return function(){}}};var r=null,i={start:function(){},stop:function(){return function(){return!1}}},a=function(){r&&r.disconnect();try{i.stop(),t.lancePluginUtils.syncNodes(n)}finally{i.start()}};r=new MutationObserver((function(t){var r=function(t,r){var i,a,s;if(!t||!(i=t.length))return!1;for(var u=0;u<i;++u){if(a=t[u],s=e(a),e(a).is(o)&&!n.isDummyElement(a.parentNode))return!0;if(r&&s.find(o).length)return!0}return!1};if(t&&t.length)for(var i,s=t.length-1;s>=0;--s)if((i=t[s])&&!n.isDummyElement(i.target)){if(e(i.target).is(o))return a();if(r(i.addedNodes,!0)||r(i.removedNodes,!0))return a()}}));var s={childList:!0,subtree:!0},u=!1;return i.start=function(){u=!0,r.disconnect(),r.observe(n.getBody(),s)},i.stop=function(){var t=u;return u&&(r.disconnect(),u=!1),function(){t&&i.start()}},i},a.prototype.selectAnnotationNodes=function(e,n,o){e&&e.length&&(n.isSelected()?(e.attr(t.lancePluginUtils.pluginAttributes.selectedAttribute,"true"),!1!==o&&t.utils.scrollToElement(e.length>1?e.eq(0):e)):e.attr(t.lancePluginUtils.pluginAttributes.selectedAttribute,null))},a.prototype.loadAnnotationsFromDOM=function(e,n){n&&e.nodesHandler.processDOM(),e.getAnnotations().loadFromData(null),t.lancePluginUtils.syncNodes(e)},a.prototype.syncNodes=function(n){var o=n.getAnnotations();if(o){var r,i,s=n.nodesHandler.findAnnotationNodes(),u=!n.nodesHandler.usesCommentMarkers,l=0,c={},d=[];o.muteListener(n,!0),n.nodeSynchronizer&&n.nodeSynchronizer.stop();try{for(var f=0,p=s.length;f<p;++f)if(i=(r=s[f])&&(!u||!e(r).is(":empty"))&&r.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId)){var h=o.getAnnotationById(i);h||d.push(r),c[i]?(c[i].nodes.push(r),r.removeAttribute(t.lancePluginUtils.pluginAttributes.annotationData)):(c[i]={nodes:[r],index:l++},h&&this.populateAnnotationNode({plugin:n,node:r,annotation:h,saveFullContent:!0,titleTemplate:n.config.tooltipFormat})),a.NODE_RE.test(r.nodeName)&&t.utils.dom.clearNodeBackgroundImage(r)}else n.nodesHandler.uncomment(r);var g=o.getAllAnnotations().filter((function(t){return!(t in c)})),m={};if(!g.length&&!d.length)return void t.lancePluginUtils.renumberNodes(n);g.forEach((function(t){var e=o.serializeAnnotation(t);e&&(m[t]=e),o.deleteAnnotation(t,"delete")})),d.forEach((function(e){t.lancePluginUtils.setupAnnotationNode(e);var r,i=e.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId),a=i&&m[i];if(a&&(e.setAttribute(t.lancePluginUtils.pluginAttributes.annotationData,escape(JSON.stringify(a))),delete m[i]),(r=t.Annotations.extractAnnotation(e))&&r.comments&&r.comments.length){var s=o.loadAnnotationFromData(r,c[i].index);n.getAllAnnotationNodesForId(s.id).forEach((function(e,o){t.lancePluginUtils.populateAnnotationNode({plugin:n,node:e,annotation:s,saveFullContent:0===o,titleTemplate:n.config.tooltipFormat})}))}else n.nodesHandler.uncomment(e)})),t.lancePluginUtils.renumberNodes(n)}catch(e){t.logger.error("syncNodes",e)}finally{o.muteListener(n,!1),n.nodeSynchronizer&&n.nodeSynchronizer.start()}}},a.prototype.setupAnnotationNode=function(t){var n;return e(t).attr(((n={})[a.LANCE_ATTRIBUTES.selectedAttribute]=null,n[a.LANCE_ATTRIBUTES.ignoreTrackChanges]=null,n)),t},a.prototype.populateAnnotationNode=function(n){var r,i=n.node,s=n.annotation;if(i&&s){var u,l=this.formatString({annotation:n.annotation,titleTemplate:n.titleTemplate,localize:function(t){return n.plugin.getLocalizedString(t)}}),c=n.saveFullContent?s.saveToObject():null;e(i).attr(s.attributes||{}).attr(((r={})[a.LANCE_ATTRIBUTES.selectedAttribute]=s.isSelected()?"true":null,r[a.LANCE_ATTRIBUTES.ignoreTrackChanges]=null,r.id=(u=s.id)?u.replace(/[^0-9a-zA-Z-]/g,"z")+o++:"",r.title=l||null,r[t.lancePluginUtils.pluginAttributes.annotationSequence]=String(s.sequence),r[t.lancePluginUtils.pluginAttributes.annotationId]=s.id,r[t.lancePluginUtils.pluginAttributes.annotationData]=c?escape(JSON.stringify(c)):null,r))}},a.prototype.renumberNodes=function(n){var o=n.nodesHandler.findAnnotationNodes();if(o.length){o.sort(t.utils.dom.compareNodePosition);var r=[],i={},a=0;o.forEach((function(n,o){var s=e(n),u=s.attr(t.lancePluginUtils.pluginAttributes.annotationId);i[u]||(r.push(u),i[u]=String(a++)),s.attr(t.lancePluginUtils.pluginAttributes.annotationSequence,i[u])})),n.getAnnotations().setAnnotationsSequence(r)}},a.prototype.validateApiKey=function(){var t="api-key-placeholder";if(!/placeholder/.test(t)){var e=document.head&&document.head.querySelectorAll("meta[name='LANCE-API-KEY']"),n=e&&e.length&&e[0];return n&&n.getAttribute&&n.getAttribute("content")===t}return!0},a.prototype.validateConfiguration=function(e){e=e||{};var n=t.$.extend({ckeStrictSelection:!1},e);if(void 0===n.tooltipFormat||!0===n.tooltipFormat?n.tooltipFormat="%AS":!1===n.tooltipFormat||null===n.tooltipFormat?n.tooltipFormat="":n.tooltipFormat=String(n.tooltipFormat),n.customAttributes=t.utils.strings.toStringArray(e.customAttributes),n.autoScroll="boolean"!=typeof e.autoScroll||e.autoScroll,"string"==typeof e.tagName){var o=e.tagName.trim().toLowerCase();if(!/^[a-z]+[a-z\-][a-z]+$/i.test(e.tagName))throw new Error("Invalid custom tag name "+e.tagName+" - should contain only latin letters and hyphens");n.tagName=o}else n.tagName="annotation";return n},a.prototype.toUniqueAnnotationNodes=function(e){if(!e||!e.length)return[];var n={};return e.forEach((function(e){var o=e&&e.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId);o&&!n[o]&&(n[o]=e)})),Object.keys(n).map((function(t){return n[t]}))},a.prototype.formatString=function(t){var e=t.titleTemplate;return e?(e=e.replace(/%%([^\b\s]+)/g,(function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.localize(n[0])})),r.forEach((function(n){for(var o;o=n.regex.exec(e);){var r=l((o[1]||"A").toUpperCase(),t.annotation);e=[e.substring(0,o.index),n.replacer(t.annotation,r),e.substring(o.index+o[0].length)].join("")}})),e):""},a.LANCE_ATTRIBUTES={selectedAttribute:"data-selected",annotationId:"data-annotation-id",annotationData:"data-ant",annotationSequence:"data-annotation-seq",ignoreTrackChanges:"data-track-changes-ignore"},a.ceattr=t.browser.msie?"data-lance-contenteditable":"contenteditable",a.NODE_RE=/^IMG$|^ANNOTATION$/i,a}(),s=function(){function n(o){var r=this;this._adapter=o,this.TAG_NAME=o.selector,this.TAG_RE=new RegExp(this.TAG_NAME,"i"),this.BASIC_SELECTOR=this.TAG_NAME+"."+n.CLASSNAME;var i=o.createOverrides();this.uncomment=this._uncomment.bind(this,i.uncomment),this.canAnnotate=i.canAnnotate||this._canAnnotate.bind(this),this.postProcessAnnotationNodes=i.postProcessAnnotationNodes||this._postProcessAnnotationNodes.bind(this),this.getCommandState=i.getCommandState?function(t){return t=t||r.adapter.getSelectedRange(),i.getCommandState(t)}:this._getCommandState.bind(this),this.findAnnotationNode=i.findAnnotationNode||this._findAnnotationNode.bind(this),this.findAnnotationNodes=i.findAnnotationNodes||this._getAnnotationNodes.bind(this);var a=i.createAnnotationNode||this._createAnnotationNode.bind(this);this.createAnnotationNode=function(){var t=a();return e(t).addClass(r.adapter.usesFakeElement?n.PIN_ANNOTATION_CLASS:n.CLASSNAME),t},this.processDOM=i.processDOM?function(t){i.processDOM(t)}:this._processDOM.bind(this),this._timeoutClient=new t.TimeoutClient,this._timeoutClient.createTimer("fakespan",{callback:function(n){var o=e(r.adapter.documentBody).find("span[data-lance-placeholder]");if(o.length){var i=r.adapter.getSelectedRange(),a=!0;o.each((function(n,o){if(!i||i.startContainer!==o&&i.commonAncestorContainer!==o&&i.endContainer!==o){var r=e(o);t.utils.dom.forAllTextChildren(o,(function(t){t&&t.data.indexOf("\ufeff")>=0&&(1===t.data.length?t!==(i&&i.startContainer)?e(t).remove():a=!1:t.data=t.data.replace(/\uFEFF/g,""))})),a&&r.before(r.contents()).remove()}else a=!1}))}else n.stop()},timeoutMSecs:250,repeatCount:t.TimeoutClient.FOREVER,autoDispose:!1})}return Object.defineProperty(n.prototype,"FULL_SELECTOR",{get:function(){return this.TAG_NAME+"."+n.CLASSNAME+"["+t.lancePluginUtils.pluginAttributes.annotationId+"]:not(["+t.lancePluginUtils.pluginAttributes.annotationId+'=""])'},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"adapter",{get:function(){return this._adapter},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){this._timeoutClient.clear()},n.prototype.collapseAfterNode=function(n){if(!n||n.ownerDocument!==this.adapter.document)return null;try{var o=this.adapter.document.createElement("span"),r=e(o);r.attr({"data-lance-placeholder":"","data-track-changes-ignore":!0}).addClass("lance-style-sep");var i=this.adapter.document.createTextNode("\ufeff");r.append(i),n.parentNode.insertBefore(o,n.nextSibling);var a=this.adapter.getNativeSelection(),s=a&&a.rangeCount>0&&a.getRangeAt(0);if(s)return s.setStart(i,0),s.setEnd(i,1),a.removeAllRanges(),a.addRange(s),this.monitorFakeSpan(),i}catch(e){return t.logger.error("collapse after node: ",e),null}},n.prototype.findFirstNodeForAnnotation=function(t){return this.findAnnotationNodesForId(t)[0]||null},n.prototype.validateNode=function(t){return e(t).addClass(n.CLASSNAME),t},n.prototype.getTagName=function(){return this.TAG_NAME},n.prototype.getSelectorRE=function(){return this.TAG_RE},n.prototype.monitorFakeSpan=function(){this._timeoutClient.startTimer("fakespan")},n.prototype._uncomment=function(n,o){var r=this.adapter.plugin.nodeSynchronizer.stop();try{if(this.adapter.plugin.fireEditorEvent("disable-tracking"),n)n(o);else{var i=e(o);if(!i.is(this.getTagName()))return t.logger.error("Lance: Wrong node type to uncomment",o);var a=i.contents();i.replaceWith(a)}}catch(e){t.logger.error("Lance: While uncommenting node",e)}finally{this.adapter.plugin.fireEditorEvent("restore-tracking"),r()}},n.prototype.getSelector=function(){return this.adapter.selector||this.BASIC_SELECTOR},n.prototype._processDOM=function(o){var r=o?"string"==typeof o?e("<div></div>").html(o):o instanceof Element?e(o):o:null,i=r||this.adapter.documentBody;if(!i)return null;var a,s,u=this.getTagName(),l=n.CLASSNAME,c=t.utils.dom.toJQuery(i),d=c.find(u+":not(."+l+")"),f=c.find("["+t.lancePluginUtils.pluginAttributes.annotationId+"]").toArray().filter((function(e){return!t.utils.dom.matchesSelector(e,u)&&!t.utils.dom.matchesSelector(e,n.INVALID_ANNOTATION_TAGS)})),p=c.find("img."+n.PIN_ANNOTATION_CLASS+"["+t.lancePluginUtils.pluginAttributes.annotationId+"]"),h=d.toArray().concat(p.toArray()).concat(f),g={alt:1,src:1,class:1,align:1,"cke-editable":1,contenteditable:1};function m(t,e){var n=t&&t.attributes;if(n&&n.length)for(var o,r,i=n.length-1;i>=0;--i)(r=(o=n[i])&&o.name)&&((r=r.toLowerCase())in g||/data\-cke\-/.test(r)||e.setAttribute(r,o.value))}for(var v,y=this.adapter.plugin.getLocalizedString("comment"),b=h.length-1;b>=0;--b)(a=e(h[b])).attr(t.lancePluginUtils.pluginAttributes.annotationId)&&(v=a.html()||y+" #"+(b+1),s=e("<"+u+' class="'+l+'">'+v+"</"+u+">"),m(a[0],s[0]),a.replaceWith(s));return r?"string"==typeof o?c.html():o instanceof Element?c[0]:c:c[0]},Object.defineProperty(n.prototype,"usesCommentMarkers",{get:function(){return this.adapter.usesFakeElement},enumerable:!1,configurable:!0}),n.prototype._postProcessAnnotationNodes=function(t,e){return t},n.prototype._createAnnotationNode=function(){return this.adapter.document.createElement(this.getTagName())},n.prototype._canAnnotate=function(n){n=n||this.adapter.getSelectedRange();var o=t.utils.dom.getSelectedTextNodes(n);if(!o||!o.length)return!1;for(var r=0,i=o;r<i.length;r++){var a=i[r];if(e(a.node).parents(this.BASIC_SELECTOR).length)return!1}return!0},n.prototype.findAnnotationNodesForId=function(n){return e(this.adapter.documentBody).find("["+t.lancePluginUtils.pluginAttributes.annotationId+"='"+n+"']")},n.prototype.uncommentAnnotation=function(t){var e=this,n=this.findAnnotationNodesForId(t);return n.each((function(t,n){e.uncomment(n)})),n.length},n.prototype.findAnnotationNodeAtCaret=function(e){var n=e instanceof Range?e:!e&&this.adapter.getSelectedRange()||null,o=e;if(n&&(o=n&&n.collapsed&&n.startContainer),!o||1!==o.nodeType)return null;var r=o,i=this.getTagName(),a=function(e){return e&&1===e.nodeType&&t.utils.dom.matchesSelector(e,i)?e:null},s=a(r);return s||!n?s:a(r.childNodes[n.startOffset])||n.startOffset>0&&a(r.childNodes[n.startOffset-1])},n.prototype.insertAnnotationNodes=function(){var e=this,n=[],o=this.adapter.getSelectedRange();if(o){var r=this.adapter.plugin.nodeSynchronizer.stop();try{if(this.adapter.usesFakeElement){var i=this.createAnnotationNode();o.insertNode(i),n.push(i)}else{t.utils.dom.normalizeNode(o.commonAncestorContainer),o=this.adapter.getSelectedRange();var a=t.utils.dom.getSelectedTextNodes(o);if(!a||!a.length)return n;a.forEach((function(o){var r=t.utils.dom.extractInlineNode(o);if(r){var i=e.createAnnotationNode();r.parentNode.insertBefore(i,r),i.appendChild(r),n.push(i)}}))}}catch(e){throw t.logger.error("Lance: While creating annotation nodes",e),e}finally{r()}return n}},n.prototype._findAnnotationNode=function(e){if(!e){var n=this.adapter.getSelectedRange();e=n&&n.startContainer}if(!e)return null;if(t.utils.dom.matchesSelector(e,this.FULL_SELECTOR))return e;for(var o=e.parentNode,r=this.adapter.documentBody;o&&o!==r;){if(t.utils.dom.matchesSelector(o,this.FULL_SELECTOR))return o;o=o.parentNode}return null},n.prototype._getAnnotationNodes=function(n){var o=this.adapter.documentBody;if(!o)return[];var r=e(o).find(this.FULL_SELECTOR).toArray();return!1!=!n?r:t.lancePluginUtils.toUniqueAnnotationNodes(r)},n.prototype._getCommandState=function(){var e=this.adapter.getSelectedRange();return t.utils.dom.hasTextSelection(e)&&this.canAnnotate(e)?t.CommandStates.OFF:t.CommandStates.DISABLED},n.prototype.uncommentAnnotationId=function(t){var e=this;t&&this.findAnnotationNodesForId(t).each((function(t,n){e.uncomment(n)}))},n.CLASSNAME="lance-annotation-class",n.STYLE_NAME="lance_annotation_style",n.PIN_ANNOTATION_CLASS="cke_annotation",n.PIN_ANNOTATION_CLASS_RE=new RegExp(n.PIN_ANNOTATION_CLASS),n.INVALID_ANNOTATION_TAGS="p,div,span,table,tr,td,th,ul,ol,li,img,h1,h2,h3,h4,h5,h6,a",n}(),u=t;u.lancePluginUtils=new a,u.NodesHandler=s}function l(t,e){var n=[];if(/\d/.test(t)){var o=parseInt(t);n.push(e.getCommentByIndex(o-1))}else if("L"===t)n.push(e.getCommentByIndex(e.count()-1));else if("A"===t)for(var r=0,i=e.count();r<i;++r)n.push(e.getCommentByIndex(r));else n.push(e.getCommentByIndex(0));return n.filter(Boolean)}}(window.LANCE);var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=t.$,n="annotate",o=t.browser,i=10*parseInt(tinymce.majorVersion)+.1*parseInt(tinymce.minorVersion);function a(t,e){return t.options&&(t.options.get,1)?t.options.get(e):t.settings?t.settings[e]:t.getParam?t.getParam(e):void 0}function s(e,n,o){if(e.options&&(e.options.set,1))e.options.set(n,o);else{if(e.settings)return e.settings[n]=o;t.logger.warn("no way to change editor setting "+n)}}tinymce.PluginManager.requireLangPack("lance","en,fr,de"),tinymce.PluginManager.add("lance",(function(t,e){!function(t){i<60||t.options.register("lance",{processor:function(){return!0},default:{}})}(t);var n=new u(e);return n.initPlugin(t,a(t,"lance")),n}));var u=function(){function r(t){var e=this;this.path=t,this._editor=null,this._manager=null,this.nodeSynchronizer=null,this._removeBindings=[],this._mayBeginDrag=!1,this._isSelecting=!1,this._buttons={},this._isInited=!1,this._isEditorLoaded=!1,this.version="1.7.03",this._propertyMap={},[n].forEach((function(t){e._buttons[t]={button:null,command:t,active:void 0,enabled:!1}}))}return r.prototype.initPlugin=function(n,o){var r=this;this._editor=n,this._config=o=t.lancePluginUtils.validateConfiguration(o),i>=60&&"annotation"===o.tagName&&(o.tagName="lance-annotation",t.logger.warn("Changing comment tag name from annotation (reserved in tinymce 6) to "+o.tagName)),t.logger.config(this._config.debug),this._setPluginFeatures(n,this.customAttributes),this._onDragCancel=this._onDragCancel.bind(this);var u,l=!1===o.useTextSelection?new c(this):new d(this);this._editorNodeHandler=new t.NodesHandler(l);var f=this._editorNodeHandler.getTagName(),p=new RegExp(f+"$","i");this._editorNodeHandler.usesCommentMarkers?((u=(a(n,"extended_valid_elements")||"").split(",").map((function(t){return t&&t.trim()})).filter((function(t){return t&&!p.test(t)}))).push(f),s(n,"extended_valid_elements",u.join(","))):((u=(a(n,"custom_elements")||"").split(",").map((function(t){return t&&t.trim()})).filter((function(t){return t&&!p.test(t)}))).push("~"+f),s(n,"custom_elements",u.join(",")));var h=/^he.d/i,g=e(window.document).find("html>*").filter((function(t,e){return h.test(e.nodeName||"")}))[0];n.once("init",(function(){r._isEditorLoaded=!0,r._maybeFireInit()}));var m=e.extend(!0,{},o.annotations,{hostOptions:g?e(g):null});m.owner=this;var v=new t.Annotations(m);this._manager=v,this._bindToOwner(v,!0)},r.prototype.resolvePath=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=t.utils.isAbsoluteUrl(e[0])?Array.prototype.slice.apply(e):[this.path].concat(e);return t.utils.joinPath.apply(t.utils,o)},r.prototype.bindAnnotationEvents=function(t){this._bindToOwner(this._manager,t)},r.prototype.fireEditorEvent=function(t,e){this._editor&&this._editor.fire(t,e)},r.prototype.init=function(e,n){var o=this;t.lancePluginUtils.validateApiKey()&&(this._initUI(e),this._addEventBinding("BeforeSetContent",this._onBeforeDomLoaded),this._addEventBinding("SetContent",this._onDomLoaded),this._addEventBinding("Click",this._onDocumentClick)),e.on("remove",(function(){o.removeEventBindings(!0);var t=o.getAnnotations();t&&(o._manager=null,t.destroy()),o.nodeSynchronizer&&(o.nodeSynchronizer.stop(),o.nodeSynchronizer=null),o._editorNodeHandler&&(o._editorNodeHandler.dispose(),o._editorNodeHandler=null)})),this._isInited=!0,this._maybeFireInit()},r.prototype._uninit=function(){this._bindToOwner(this._manager,!1),this._manager=null},r.prototype.getAnnotations=function(){return this._manager},r.prototype.logEditorEvents=function(e){t.utils.pluginUtils.logEditorEvents(this,this._editor,null,e)},Object.defineProperty(r.prototype,"$",{get:function(){return t.$},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nodesHandler",{get:function(){return this._editorNodeHandler},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"customAttributes",{get:function(){return this._config.customAttributes.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return e.extend(!0,{},this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tagName",{get:function(){return this._config.tagName},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"editor",{get:function(){return this._editor},enumerable:!1,configurable:!0}),r.prototype.isInline=function(){return Boolean(this._editor&&this._editor.inline)},r.prototype.setUserId=function(t){return this._manager?this._manager.setUserId(t):null},r.prototype.getUserId=function(){return this._manager&&this._manager.getUserId()||null},r.prototype.getBody=function(){return this._editor&&this._editor.getBody()},r.prototype.getLocalizedStringItem=function(t,e){var n=this.getLocalizedString(t);return n&&n!==t&&n.length&&("string"==typeof n?n.split(","):n)[e]||t},r.prototype.getLocalizedString=function(t){if(!t)return"";var e=0===t.indexOf("lance_")?t:"lance_"+t,n=this._editor,o=n&&n.editorManager.i18n.translate(e)||t||t;return o&&(o=o.replace(/^lance_/,"")),o},r.prototype.getInsertPosition=function(){return t.lancePluginUtils.getAnnotationNodePosition(this._getAnnotationNodes(),this._getSelectedNode())},r.prototype.getAnnotationNodeForId=function(t){return this.nodesHandler.findAnnotationNodesForId(t)[0]||null},r.prototype.getAllAnnotationNodesForId=function(t){return this.nodesHandler.findAnnotationNodesForId(t).toArray()},r.prototype.isDummyElement=function(t){return t&&t.className&&t.className.indexOf("mce-offscreen-selection")>=0},r.prototype.getProperty=function(t,e){return this._propertyMap.hasOwnProperty(t)?this._propertyMap[t]:e},r.prototype.setProperty=function(t,e){void 0===e?delete this._propertyMap[t]:this._propertyMap[t]=e},r.prototype._initUI=function(e){var o=this;i>=60?(this._disableButton=function(t,e){t.setEnabled(!e)},this._activateButton=function(t,e){t&&t.setActive&&t.setActive(e)}):i>=50?(this._disableButton=function(t,e){t.setDisabled(e)},this._activateButton=function(t,e){t&&t.setActive&&t.setActive(e)}):(this._disableButton=function(t,e){t.disabled(e)},this._activateButton=function(t,e){t&&t.active&&t.active(e)});var r=i>=50?function(n,r){var i=e;if(i.addCommand(n.cmd,n.callback,o),r){var a=n.cmd.replace(/[^a-z]/g,"");i.ui.registry.addIcon(a,o._config.svgIcon||'<?xml version="1.0" encoding="UTF-8"?>\n\t<svg width="20px" height="18px" viewBox="0 0 20 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t<g id="add-comment_1-svg" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n\t\t\t<path class="loopindex-svg-icon" d="M20,0 L20,14 L10,14 L6,18 L2,14 L0,14 L0,0 L20,0 Z M18.6,1.4 L1.4,1.4 L1.4,12.6 L2.57989899,12.6 L6,16.021 L9.42010101,12.6 L18.6,12.6 L18.6,1.4 Z" id="Rectangle-4" fill="#C2C2C2" fill-rule="nonzero"></path>\n\t\t\t<path class="loopindex-svg-icon" d="M11,3 L11,6 L14,6 L14,8 L11,8 L11,11 L9,11 L9,8 L6,8 L6,6 L9,6 L9,3 L11,3 Z" id="Rectangle-2" fill="#13C203"></path>\n\t\t</g>\n\t</svg>');var s={tooltip:o.getLocalizedString(n.tooltip),disabled:!1,icon:a,onAction:function(){o._editor.execCommand(n.cmd,null)},onSetup:function(e){var r=o._buttons[n.cmd];r.button=e.control||e,o._setCommandsState(n.cmd,r.active?t.CommandStates.ON:r.enabled?t.CommandStates.OFF:t.CommandStates.DISABLED)}};i.ui.registry.addToggleButton(n.name||n.cmd,s)}}:function(n,r){if(e.addCommand(n.cmd,n.callback,o),r){var i={tooltip:o.getLocalizedString(n.tooltip),image:t.utils.joinPath(o.path,n.iconPath||"icons/"+(n.iconPath||n.cmd)+".png"),cmd:n.cmd,onPostRender:function(e){var r=o._buttons[n.cmd];r.button=e.control,o._setCommandsState(n.cmd,r.active?t.CommandStates.ON:r.enabled?t.CommandStates.OFF:t.CommandStates.DISABLED)}};e.addButton(n.name||n.cmd,i)}};[{name:"lance",callback:this._onAnnotate,cmd:n,tooltip:this.getLocalizedString("insert comment"),iconPath:"/icons/add-comment_tiny.png"}].forEach((function(t){return r(t,!0)}));var u=a(e,"toolbar"),l=typeof u;u&&"boolean"!==l&&(/\blance\b/.test(String(u))||("string"===l?s(e,"toolbar",u+" lance"):"function"==typeof u.push?u.push("lance"):t.logger.error("Lance not found in the toolbar, no idea how to add it")))},r.prototype._maybeFireInit=function(){this._isInited&&this._isEditorLoaded&&(this._isEditorLoaded=!1,this._editor.fire("lance::init",{lance:this},!1))},r.prototype._onBeforeDomLoaded=function(e){if(e&&!e.selection&&!e.paste){var n=e.target,o=this._editor.getDoc();try{this._loadCSS(o)}catch(e){t.logger.error(e)}if(this._setPluginFeatures(n,this.customAttributes),this.nodeSynchronizer&&this.nodeSynchronizer.stop(),e.content&&"string"==typeof e.content){var r=this.nodesHandler.processDOM(e.content);r&&(e.content=r)}}},r.prototype._onDomLoaded=function(n){var o=this;if(!n||!n.selection&&!n.paste){var r=this._editor,i=this._editor.getDoc(),a=r.getBody();e(a).on("drop.lance",this._onDrop.bind(this)),e(i).on("selectionchange.lance",(function(t){o._onSelectionChanged()})),this.nodeSynchronizer=t.lancePluginUtils.attachMutationObserver(this,this._editorNodeHandler.getSelector()),t.lancePluginUtils.validateKey(),t.lancePluginUtils.loadAnnotationsFromDOM(this,!1),this.nodeSynchronizer.start()}},r.prototype._loadCSS=function(e){new t.utils.CSSLoader(e).loadCSS(["css/annotate.css"],this.path)},r.prototype._onSelectionChanged=function(){var e;this._isSelecting||(this._manager&&this._manager.isEnabled()?(e=this._editorNodeHandler.getCommandState())===t.CommandStates.OFF&&this._manager.unselectAll():e=t.CommandStates.DISABLED,this._setCommandsState(n,e))},r.prototype._getDocument=function(){return this._editor&&this._editor.getDoc()},r.prototype._setCommandsState=function(e,n){e=t.utils.strings.toStringArray(e);for(var o,r=n!==t.CommandStates.DISABLED,i=n===t.CommandStates.ON,a="boolean"==typeof i,s=e.length-1;s>=0;--s){var u=this._buttons[e[s]];u.enabled=r,u.active=i,(o=u.button)&&(this._disableButton(o,!r),a&&this._activateButton(o,i))}},r.prototype._bindToOwner=function(e,n){e&&(e.off(this),n&&(e.on(t.Annotations.Events.ANNOTATION_CREATED,this._onAnnotationCreated.bind(this),this),e.on(t.Annotations.Events.ANNOTATION_DELETED,this._onAnnotationDeleted.bind(this),this),e.on(t.Annotations.Events.ANNOTATION_SELECTED,this._onAnnotationSelected.bind(this),this),e.on(t.Annotations.Events.ANNOTATION_UPDATED,this._onAnnotationChanged.bind(this),this),e.on(t.Annotations.Events.ATTRIBUTE_CHANGED,this._onAnnotationAttributeChanged.bind(this),this),e.on(t.Annotations.Events.COMMENT_DELETED,this._onCommentDeleted.bind(this),this),e.on(t.Annotations.Events.COMMENT_CHANGED,this._onCommentChanged.bind(this),this),e.on(t.Annotations.Events.COMMENT_ADDED,this._onCommentAdded.bind(this),this),e.on(t.Annotations.Events.ENABLED_CHANGED,this._onAnnotationsEnabledChanged.bind(this),this),e.on(t.Annotations.Events.DONE_EDITING,this._onCommentEditingDone,this),e.on(t.Annotations.Events.ANNOTATIONS_RENUMBERED,this._onAnnotationsRenumbered,this)))},r.prototype._onAnnotationCreated=function(n){var o=this,r=n.annotation;if(r&&this._editor){if(!this.getAnnotationNodeForId(r.id)){var i=this._isSelecting;this._isSelecting=!0;try{if(this._editorNodeHandler.usesCommentMarkers){var a=this.nodeSynchronizer.stop();try{var s=this._editor.selection,u=this.nodesHandler.createAnnotationNode();s&&!s.isCollapsed()&&s.collapse(!1),this._editor.focus(!1),this._editor.insertContent(u.outerHTML);var l=this.nodesHandler.findFirstNodeForAnnotation(r.id);l&&e(l).find("object").remove()}catch(e){throw t.logger.error("Lance: Failed to create annotation node",e),e}finally{a()}}else{var c=this._editorNodeHandler.insertAnnotationNodes();if(!c||!c.length)return t.logger.error("Lance: Failed to create annotation nodes");c.forEach((function(e,n){return t.lancePluginUtils.populateAnnotationNode({plugin:o,node:e,annotation:r,saveFullContent:0===n,titleTemplate:o._config.tooltipFormat})})),t.lancePluginUtils.isInteractiveAnnotation(n.context)&&this._monitorCommentEditing(r.id)}}catch(e){t.logger.error("onAnnotationCreated:",e)}finally{setTimeout((function(){return o._isSelecting=i}),25)}}}else t.logger.error("Annotation created with no editor or annotation")},r.prototype._monitorCommentEditing=function(e){var n=this,o=function(r){if(t.logger.debug("comment editing done handler"),r.comment.annotationId===e){n.editor.focus(!1),n._manager.off(t.Annotations.Events.DONE_EDITING,o);var i=!r.canceled&&n.getAllAnnotationNodesForId(e);i&&i.length&&setTimeout((function(){t.logger.debug("setting caret after comment editing"),n.nodesHandler.collapseAfterNode(i[i.length-1])}),10)}};this._manager.on(t.Annotations.Events.DONE_EDITING,o,this)},r.prototype._onAnnotationDeleted=function(t){var e=t&&t.id,n=this._editor.selection.getBookmark();this.nodesHandler.uncommentAnnotation(e),n&&this._editor.selection.moveToBookmark(n)},r.prototype._onAnnotationChanged=function(e){var n=this,o=e&&e.annotation;o&&this.nodesHandler.findAnnotationNodesForId(o.id).each((function(e,r){return t.lancePluginUtils.populateAnnotationNode({plugin:n,node:r,annotation:o,saveFullContent:0===e,titleTemplate:n._config.tooltipFormat})}))},r.prototype._onAnnotationAttributeChanged=function(t){return this._onAnnotationChanged(t)},r.prototype._onAnnotationSelected=function(e){var n,o=null==e?void 0:e.annotation;if(o){var r=this.nodesHandler.findAnnotationNodesForId(o.id);if(r&&r.length){var i=this._config.autoScroll&&!(null===(n=e.hostData)||void 0===n?void 0:n.node);t.lancePluginUtils.selectAnnotationNodes(r,o,i)}}},r.prototype._onCommentDeleted=function(t){this._onAnnotationChanged(t)},r.prototype._onCommentChanged=function(t){this._onAnnotationChanged(t)},r.prototype._onCommentAdded=function(t){this._onAnnotationChanged(t)},r.prototype._onCommentEditingDone=function(t){var e=this;(t.canceled||"reply"===t.mode)&&(this._isSelecting=!0,setTimeout((function(){return e._isSelecting=!1}),5),this._editor.focus(!1))},r.prototype._onAnnotationsEnabledChanged=function(t){},r.prototype._onAnnotate=function(e){this._editorNodeHandler.canAnnotate()&&t.lancePluginUtils.annotate(this)},r.prototype._onEditorNodeClicked=function(e){t.lancePluginUtils.onEditorNodeClicked(this,e)},r.prototype._onDocumentClick=function(t){this._manager&&t.target&&this._onEditorNodeClicked(t.target)},r.prototype._onAnnotationsRenumbered=function(e){var n=e&&e.sequence;if(n&&n.length){var o=this._getAnnotationNodes(),r={};o.forEach((function(e){var n=e.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId);n&&(r[n]=e)})),n.forEach((function(e,n){var o=r[e];o&&o.setAttribute(t.lancePluginUtils.pluginAttributes.annotationSequence,n)}))}},r.prototype._onDragCancel=function(e){var n,r=e.data,i=!1;if(o.msie)i=this._mayBeginDrag;else{if(!r)return;if(!(n=r.dataTransfer?r.dataTransfer.$:r.$&&r.$.dataTransfer)||!n.getData)return;var a=n.getData(o.msie?"text":"text/html");i=a&&a.indexOf(t.lancePluginUtils.pluginAttributes.annotationId)>0&&a.indexOf(t.lancePluginUtils.pluginAttributes.annotationData)>0}if(i)return e.cancel(),r.preventDefault&&r.preventDefault(),!1},r.prototype._onDrop=function(n){var o=this;if(n&&this._editorNodeHandler.usesCommentMarkers){var r=(n=n.originalEvent||n)&&n.dataTransfer,i=r&&r.items;if(i&&i.length)for(var a=function(r){var a=i[r];if(!a||"text/html"!==a.type)return"continue";var s=n.target.ownerDocument;return a.getAsString((function(n){var r=e(n),i=r&&r[0];if(i.id&&o.nodesHandler.getSelectorRE().test(i.nodeName)){var a=i.id;setTimeout((function(){var e=s.getElementById(a);t.utils.dom.clearNodeBackgroundImage(e)}),10)}})),"break"},s=i.length-1;s>=0;--s){if("break"===a(s))break}}},r.prototype._getSelectedNode=function(){var t=this._editor.selection.getRng(!0)||this._editor.selection.getRng(!1);if(!t||!t.endContainer)return null;var e=t.endContainer;return 3===e.nodeType||0===t.endOffset?e:e.childNodes&&e.childNodes[t.endOffset-1]||e},r.prototype._getAnnotationNodes=function(){return this._editorNodeHandler.findAnnotationNodes()},r.prototype._setPluginFeatures=function(e,n){if(i>=60){var o=e;if(!o.schema)return;var r=Object.keys(t.lancePluginUtils.pluginAttributes).concat(n||[]).map((function(e){return t.lancePluginUtils.pluginAttributes[e]})).join("|"),a=this.tagName+"[class|id|title|"+r+"]";o.schema.addValidElements(a)}},r.prototype._addEventBinding=function(t,e,n,o){void 0===n&&(n=!0);var r=n?e.bind(this):e;this._removeBindings.push({event:t,context:this._editor.on(t,r,o),callback:r})},r.prototype.removeEventBindings=function(n){var o=this.getBody();e(o).off("drop.lance"),this.nodeSynchronizer&&this.nodeSynchronizer.stop();var r,i=this._removeBindings.filter(Boolean);this._removeBindings.length=0;for(var a=i.length-1;a>=0;--a){r=i[a];try{r.context.off(r.event,r.callback)}catch(e){t.logger.error("release event bindings",e)}}},r}(),l=function(){function t(t){this._plugin=t,this.selector=t.tagName}return Object.defineProperty(t.prototype,"plugin",{get:function(){return this._plugin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){var t=this.documentBody;return t&&t.ownerDocument},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"documentBody",{get:function(){return this._plugin.getBody()},enumerable:!1,configurable:!0}),t.prototype.getSelectedRange=function(){var t=this._plugin.editor.selection;return t&&t.getRng(!0)},t.prototype.getNativeSelection=function(){var t=this._plugin.editor.selection,e=t&&t.getSel();if(e)return e;var n=document,o=n&&n.defaultView;return o&&o.getSelection&&o.getSelection()||n&&n.selection},t}(),c=function(n){function o(t){return n.call(this,t)||this}return r(o,n),o.prototype.createOverrides=function(){var n=this;return{uncomment:function(t){e(t).remove()},canAnnotate:function(){return!n.plugin.nodesHandler.findAnnotationNodeAtCaret()},createAnnotationNode:function(){var t=n._plugin.editor.getDoc(),e=t.createElement("annotation");return e.appendChild(t.createElement("object")),e},getCommandState:function(e){return e&&e.collapsed?n.plugin.nodesHandler.findAnnotationNodeAtCaret(e)?t.CommandStates.ON:t.CommandStates.OFF:t.CommandStates.DISABLED},processDOM:function(t){return t||n._plugin.getBody()},findAnnotationNodes:function(e){var o=n.document;if(!o)return[];for(var r,i=[],a=o.getElementsByTagName(n.selector),s=0,u=a.length;s<u;++s)(r=a[s])&&r.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId)&&!n._plugin.isDummyElement(r.parentNode)&&i.push(r);return!1!==e?i:t.lancePluginUtils.toUniqueAnnotationNodes(i)}}},Object.defineProperty(o.prototype,"usesFakeElement",{get:function(){return!0},enumerable:!1,configurable:!0}),o.prototype.findSelectedAnnotationNode=function(t){return this.plugin.nodesHandler.findAnnotationNodeAtCaret(t)},o.prototype.canAnnotate=function(){return!0},o}(l),d=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.createOverrides=function(){return{}},Object.defineProperty(e.prototype,"usesFakeElement",{get:function(){return!1},enumerable:!1,configurable:!0}),e}(l)}(window.LANCE)}()}]);

/*eslint-enable*/