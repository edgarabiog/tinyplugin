/*eslint-disable*/

/*!
 * Source version: 1.7.03 
 * Copyright (C) 2018 LoopIndex - All Rights Reserved
 * You may use, distribute and modify this code under the
 * terms of the LoopIndex Comments CKEditor plugin license.
 *
 * Open source libraries
 * jQuery scrollintoview plugin Copyright (c) 2011 Robert Koritnik https://github.com/litera/jquery-scrollintoview
 * MutationSummary copyright (C) Rafael Weinstein https://github.com/rafaelw/mutation-summary/
 * jQuery autogrow based on code by Jevin O. Sewaruth (https://github.com/jevin/Autogrow-Textarea)
 
 * You should have received a copy of the LoopIndex Comments CKEditor plugin license with
 * this file. If not, please write to: loopindex@gmail.com, or visit http://www.loopindex.com
 * written by (David *)Frenkiel (https://github.com/imdfl) 
 */!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var o;!function(){"use strict";
/*!
 * jQuery JavaScript Library v3.5.0 -ajax,-ajax/jsonp,-ajax/load,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-deprecated/ajax-event-alias,-effects,-effects/Tween,-effects/animatedSelector
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-04-10T15:07Z
 */!function(t){var e=window.LOOPINDEX;e&&"object"==typeof e||(e={});var n=window.LOOPINDEX=e;n.$&&n.$.fn&&n.$.fn.jquery||(n.$=t)}(function(n){var r=[],i=Object.getPrototypeOf,a=r.slice,s=r.flat?function(t){return r.flat.call(t)}:function(t){return r.concat.apply([],t)},l=r.push,u=r.indexOf,c={},d=c.toString,f=c.hasOwnProperty,p=f.toString,h=p.call(Object),m={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},v=function(t){return null!=t&&t===t.window},y=n.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var o,r,i=(n=n||y).createElement("script");if(i.text=t,e)for(o in A)(r=e[o]||e.getAttribute&&e.getAttribute(o))&&i.setAttribute(o,r);n.head.appendChild(i).parentNode.removeChild(i)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[d.call(t)]||"object":typeof t}var C="3.5.0 -ajax,-ajax/jsonp,-ajax/load,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-deprecated/ajax-event-alias,-effects,-effects/Tween,-effects/animatedSelector",E=function(t,e){return new E.fn.init(t,e)};function x(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!g(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}E.fn=E.prototype={jquery:C,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:r.sort,splice:r.splice},E.extend=E.fn.extend=function(){var t,e,n,o,r,i,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)o=t[e],"__proto__"!==e&&a!==o&&(u&&o&&(E.isPlainObject(o)||(r=Array.isArray(o)))?(n=a[e],i=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,a[e]=E.extend(u,i,o)):void 0!==o&&(a[e]=o));return a},E.extend({expando:"jQuery"+(C+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t))&&(!(e=i(t))||"function"==typeof(n=f.call(e,"constructor")&&e.constructor)&&p.call(n)===h)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,o=0;if(x(t))for(n=t.length;o<n&&!1!==e.call(t[o],o,t[o]);o++);else for(o in t)if(!1===e.call(t[o],o,t[o]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(x(Object(t))?E.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,o=0,r=t.length;o<n;o++)t[r++]=e[o];return t.length=r,t},grep:function(t,e,n){for(var o=[],r=0,i=t.length,a=!n;r<i;r++)!e(t[r],r)!==a&&o.push(t[r]);return o},map:function(t,e,n){var o,r,i=0,a=[];if(x(t))for(o=t.length;i<o;i++)null!=(r=e(t[i],i,n))&&a.push(r);else for(i in t)null!=(r=e(t[i],i,n))&&a.push(r);return s(a)},guid:1,support:m}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=r[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var _=
/*!
		 * Sizzle CSS Selector Engine v2.3.5
		 * https://sizzlejs.com/
		 *
		 * Copyright JS Foundation and other contributors
		 * Released under the MIT license
		 * https://js.foundation/
		 *
		 * Date: 2020-03-14
		 */
function(t){var e,n,o,r,i,a,s,l,u,c,d,f,p,h,m,g,v,y,A,b="sizzle"+1*new Date,w=t.document,C=0,E=0,x=lt(),_=lt(),N=lt(),T=lt(),S=function(t,e){return t===e&&(d=!0),0},O={}.hasOwnProperty,D=[],I=D.pop,M=D.push,k=D.push,R=D.slice,L=function(t,e){for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},U="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",P="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",j=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),q=new RegExp("^"+F+"*,"+F+"*"),W=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp(F+"|>"),G=new RegExp(j),Q=new RegExp("^"+B+"$"),K={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+U+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ot=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){f()},at=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{k.apply(D=R.call(w.childNodes),w.childNodes),D[w.childNodes.length].nodeType}catch(t){k={apply:D.length?function(t,e){M.apply(t,R.call(e))}:function(t,e){for(var n=t.length,o=0;t[n++]=e[o++];);t.length=n-1}}}function st(t,e,o,r){var i,s,u,c,d,h,v,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(o=o||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return o;if(!r&&(f(e),e=e||p,m)){if(11!==w&&(d=$.exec(t)))if(i=d[1]){if(9===w){if(!(u=e.getElementById(i)))return o;if(u.id===i)return o.push(u),o}else if(y&&(u=y.getElementById(i))&&A(e,u)&&u.id===i)return o.push(u),o}else{if(d[2])return k.apply(o,e.getElementsByTagName(t)),o;if((i=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return k.apply(o,e.getElementsByClassName(i)),o}if(n.qsa&&!T[t+" "]&&(!g||!g.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===w&&(V.test(t)||W.test(t))){for((y=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(ot,rt):e.setAttribute("id",c=b)),s=(h=a(t)).length;s--;)h[s]=(c?"#"+c:":scope")+" "+At(h[s]);v=h.join(",")}try{return k.apply(o,y.querySelectorAll(v)),o}catch(e){T(t,!0)}finally{c===b&&e.removeAttribute("id")}}}return l(t.replace(z,"$1"),e,o,r)}function lt(){var t=[];return function e(n,r){return t.push(n+" ")>o.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ut(t){return t[b]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var n=t.split("|"),r=n.length;r--;)o.attrHandle[n[r]]=e}function ft(t,e){var n=e&&t,o=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(o)return o;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ut((function(e){return e=+e,ut((function(n,o){for(var r,i=t([],n.length,e),a=i.length;a--;)n[r=i[a]]&&(n[r]=!(o[r]=n[r]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},i=st.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!Y.test(e||n&&n.nodeName||"HTML")},f=st.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:w;return a!=p&&9===a.nodeType&&a.documentElement?(h=(p=a).documentElement,m=!i(p),w!=p&&(r=p.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",it,!1):r.attachEvent&&r.attachEvent("onunload",it)),n.scope=ct((function(t){return h.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(p.getElementsByClassName),n.getById=ct((function(t){return h.appendChild(t).id=b,!p.getElementsByName||!p.getElementsByName(b).length})),n.getById?(o.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},o.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(o.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},o.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,o,r,i=e.getElementById(t);if(i){if((n=i.getAttributeNode("id"))&&n.value===t)return[i];for(r=e.getElementsByName(t),o=0;i=r[o++];)if((n=i.getAttributeNode("id"))&&n.value===t)return[i]}return[]}}),o.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,o=[],r=0,i=e.getElementsByTagName(t);if("*"===t){for(;n=i[r++];)1===n.nodeType&&o.push(n);return o}return i},o.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(n.qsa=Z.test(p.querySelectorAll))&&(ct((function(t){var e;h.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+U+")"),t.querySelectorAll("[id~="+b+"-]").length||g.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),h.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Z.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",j)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=Z.test(h.compareDocumentPosition),A=e||Z.test(h.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,o=e&&e.parentNode;return t===o||!(!o||1!==o.nodeType||!(n.contains?n.contains(o):t.compareDocumentPosition&&16&t.compareDocumentPosition(o)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},S=e?function(t,e){if(t===e)return d=!0,0;var o=!t.compareDocumentPosition-!e.compareDocumentPosition;return o||(1&(o=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===o?t==p||t.ownerDocument==w&&A(w,t)?-1:e==p||e.ownerDocument==w&&A(w,e)?1:c?L(c,t)-L(c,e):0:4&o?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,o=0,r=t.parentNode,i=e.parentNode,a=[t],s=[e];if(!r||!i)return t==p?-1:e==p?1:r?-1:i?1:c?L(c,t)-L(c,e):0;if(r===i)return ft(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[o]===s[o];)o++;return o?ft(a[o],s[o]):a[o]==w?-1:s[o]==w?1:0},p):p},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(f(t),n.matchesSelector&&m&&!T[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var o=y.call(t,e);if(o||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return o}catch(t){T(e,!0)}return st(e,p,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!=p&&f(t),A(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=p&&f(t);var r=o.attrHandle[e.toLowerCase()],i=r&&O.call(o.attrHandle,e.toLowerCase())?r(t,e,!m):void 0;return void 0!==i?i:n.attributes||!m?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},st.escape=function(t){return(t+"").replace(ot,rt)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,o=[],r=0,i=0;if(d=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(S),d){for(;e=t[i++];)e===t[i]&&(r=o.push(i));for(;r--;)t.splice(o[r],1)}return c=null,t},r=st.getText=function(t){var e,n="",o=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[o++];)n+=r(e);return n},(o=st.selectors={cacheLength:50,createPseudo:ut,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(o){var r=st.attr(o,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,o,r){var i="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===o&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,d,f,p,h,m=i!==a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,A=!1;if(g){if(i){for(;m;){for(f=e;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=m="only"===t&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(A=(p=(u=(c=(d=(f=g)[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===C&&u[1])&&u[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(A=p=0)||h.pop();)if(1===f.nodeType&&++A&&f===e){c[t]=[C,p,A];break}}else if(y&&(A=p=(u=(c=(d=(f=e)[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===C&&u[1]),!1===A)for(;(f=++p&&f&&f[m]||(A=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++A||(y&&((c=(d=f[b]||(f[b]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]=[C,A]),f!==e)););return(A-=r)===o||A%o==0&&A/o>=0}}},PSEUDO:function(t,e){var n,r=o.pseudos[t]||o.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(n=[t,t,"",e],o.setFilters.hasOwnProperty(t.toLowerCase())?ut((function(t,n){for(var o,i=r(t,e),a=i.length;a--;)t[o=L(t,i[a])]=!(n[o]=i[a])})):function(t){return r(t,0,n)}):r}},pseudos:{not:ut((function(t){var e=[],n=[],o=s(t.replace(z,"$1"));return o[b]?ut((function(t,e,n,r){for(var i,a=o(t,null,r,[]),s=t.length;s--;)(i=a[s])&&(t[s]=!(e[s]=i))})):function(t,r,i){return e[0]=t,o(e,null,i,n),e[0]=null,!n.pop()}})),has:ut((function(t){return function(e){return st(t,e).length>0}})),contains:ut((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:ut((function(t){return Q.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===h},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!o.pseudos.empty(t)},header:function(t){return X.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt((function(){return[0]})),last:gt((function(t,e){return[e-1]})),eq:gt((function(t,e,n){return[n<0?n+e:n]})),even:gt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:gt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:gt((function(t,e,n){for(var o=n<0?n+e:n>e?e:n;--o>=0;)t.push(o);return t})),gt:gt((function(t,e,n){for(var o=n<0?n+e:n;++o<e;)t.push(o);return t}))}}).pseudos.nth=o.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})o.pseudos[e]=ht(e);function yt(){}function At(t){for(var e=0,n=t.length,o="";e<n;e++)o+=t[e].value;return o}function bt(t,e,n){var o=e.dir,r=e.next,i=r||o,a=n&&"parentNode"===i,s=E++;return e.first?function(e,n,r){for(;e=e[o];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,l){var u,c,d,f=[C,s];if(l){for(;e=e[o];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[o];)if(1===e.nodeType||a)if(c=(d=e[b]||(e[b]={}))[e.uniqueID]||(d[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[o]||e;else{if((u=c[i])&&u[0]===C&&u[1]===s)return f[2]=u[2];if(c[i]=f,f[2]=t(e,n,l))return!0}return!1}}function wt(t){return t.length>1?function(e,n,o){for(var r=t.length;r--;)if(!t[r](e,n,o))return!1;return!0}:t[0]}function Ct(t,e,n,o,r){for(var i,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(i=t[s])&&(n&&!n(i,o,r)||(a.push(i),u&&e.push(s)));return a}function Et(t,e,n,o,r,i){return o&&!o[b]&&(o=Et(o)),r&&!r[b]&&(r=Et(r,i)),ut((function(i,a,s,l){var u,c,d,f=[],p=[],h=a.length,m=i||function(t,e,n){for(var o=0,r=e.length;o<r;o++)st(t,e[o],n);return n}(e||"*",s.nodeType?[s]:s,[]),g=!t||!i&&e?m:Ct(m,f,t,s,l),v=n?r||(i?t:h||o)?[]:a:g;if(n&&n(g,v,s,l),o)for(u=Ct(v,p),o(u,[],s,l),c=u.length;c--;)(d=u[c])&&(v[p[c]]=!(g[p[c]]=d));if(i){if(r||t){if(r){for(u=[],c=v.length;c--;)(d=v[c])&&u.push(g[c]=d);r(null,v=[],u,l)}for(c=v.length;c--;)(d=v[c])&&(u=r?L(i,d):f[c])>-1&&(i[u]=!(a[u]=d))}}else v=Ct(v===a?v.splice(h,v.length):v),r?r(null,a,v,l):k.apply(a,v)}))}function xt(t){for(var e,n,r,i=t.length,a=o.relative[t[0].type],s=a||o.relative[" "],l=a?1:0,c=bt((function(t){return t===e}),s,!0),d=bt((function(t){return L(e,t)>-1}),s,!0),f=[function(t,n,o){var r=!a&&(o||n!==u)||((e=n).nodeType?c(t,n,o):d(t,n,o));return e=null,r}];l<i;l++)if(n=o.relative[t[l].type])f=[bt(wt(f),n)];else{if((n=o.filter[t[l].type].apply(null,t[l].matches))[b]){for(r=++l;r<i&&!o.relative[t[r].type];r++);return Et(l>1&&wt(f),l>1&&At(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(z,"$1"),n,l<r&&xt(t.slice(l,r)),r<i&&xt(t=t.slice(r)),r<i&&At(t))}f.push(n)}return wt(f)}return yt.prototype=o.filters=o.pseudos,o.setFilters=new yt,a=st.tokenize=function(t,e){var n,r,i,a,s,l,u,c=_[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=o.preFilter;s;){for(a in n&&!(r=q.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=W.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(z," ")}),s=s.slice(n.length)),o.filter)!(r=K[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):_(t,l).slice(0)},s=st.compile=function(t,e){var n,r=[],i=[],s=N[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=xt(e[n]))[b]?r.push(s):i.push(s);(s=N(t,function(t,e){var n=e.length>0,r=t.length>0,i=function(i,a,s,l,c){var d,h,g,v=0,y="0",A=i&&[],b=[],w=u,E=i||r&&o.find.TAG("*",c),x=C+=null==w?1:Math.random()||.1,_=E.length;for(c&&(u=a==p||a||c);y!==_&&null!=(d=E[y]);y++){if(r&&d){for(h=0,a||d.ownerDocument==p||(f(d),s=!m);g=t[h++];)if(g(d,a||p,s)){l.push(d);break}c&&(C=x)}n&&((d=!g&&d)&&v--,i&&A.push(d))}if(v+=y,n&&y!==v){for(h=0;g=e[h++];)g(A,b,a,s);if(i){if(v>0)for(;y--;)A[y]||b[y]||(b[y]=I.call(l));b=Ct(b)}k.apply(l,b),c&&!i&&b.length>0&&v+e.length>1&&st.uniqueSort(l)}return c&&(C=x,u=w),A};return n?ut(i):i}(i,r))).selector=t}return s},l=st.select=function(t,e,n,r){var i,l,u,c,d,f="function"==typeof t&&t,p=!r&&a(t=f.selector||t);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===e.nodeType&&m&&o.relative[l[1].type]){if(!(e=(o.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(i=K.needsContext.test(t)?0:l.length;i--&&(u=l[i],!o.relative[c=u.type]);)if((d=o.find[c])&&(r=d(u.matches[0].replace(et,nt),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(i,1),!(t=r.length&&At(l)))return k.apply(n,r),n;break}}return(f||s(t,p))(r,e,!m,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=b.split("").sort(S).join("")===b,n.detectDuplicates=!!d,f(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||dt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||dt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||dt(U,(function(t,e,n){var o;if(!n)return!0===t[e]?e.toLowerCase():(o=t.getAttributeNode(e))&&o.specified?o.value:null})),st}(n);E.find=_,E.expr=_.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=_.uniqueSort,E.text=_.getText,E.isXMLDoc=_.isXML,E.contains=_.contains,E.escapeSelector=_.escape;var N=function(t,e,n){for(var o=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(n))break;o.push(t)}return o},T=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},S=E.expr.match.needsContext;function O(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(t,e,n){return g(e)?E.grep(t,(function(t,o){return!!e.call(t,o,t)!==n})):e.nodeType?E.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?E.grep(t,(function(t){return u.call(e,t)>-1!==n})):E.filter(e,t,n)}E.filter=function(t,e,n){var o=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===o.nodeType?E.find.matchesSelector(o,t)?[o]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,n,o=this.length,r=this;if("string"!=typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<o;e++)if(E.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<o;e++)E.find(t,r[e],n);return o>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&S.test(t)?E(t):t||[],!1).length}});var M,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var o,r;if(!t)return this;if(n=n||M,"string"==typeof t){if(!(o="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:k.exec(t))||!o[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(o[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:y,!0)),D.test(o[1])&&E.isPlainObject(e))for(o in e)g(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return(r=y.getElementById(o[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,M=E(y);var R=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function U(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var n,o=0,r=this.length,i=[],a="string"!=typeof t&&E(t);if(!S.test(t))for(;o<r;o++)for(n=this[o];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){i.push(n);break}return this.pushStack(i.length>1?E.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?u.call(E(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return N(t,"parentNode")},parentsUntil:function(t,e,n){return N(t,"parentNode",n)},next:function(t){return U(t,"nextSibling")},prev:function(t){return U(t,"previousSibling")},nextAll:function(t){return N(t,"nextSibling")},prevAll:function(t){return N(t,"previousSibling")},nextUntil:function(t,e,n){return N(t,"nextSibling",n)},prevUntil:function(t,e,n){return N(t,"previousSibling",n)},siblings:function(t){return T((t.parentNode||{}).firstChild,t)},children:function(t){return T(t.firstChild)},contents:function(t){return null!=t.contentDocument&&i(t.contentDocument)?t.contentDocument:(O(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(n,o){var r=E.map(this,e,n);return"Until"!==t.slice(-5)&&(o=n),o&&"string"==typeof o&&(r=E.filter(o,r)),this.length>1&&(L[t]||E.uniqueSort(r),R.test(t)&&r.reverse()),this.pushStack(r)}}));var F=/[^\x20\t\r\n\f]+/g;function B(t){return t}function P(t){throw t}function j(t,e,n,o){var r;try{t&&g(r=t.promise)?r.call(t).done(e).fail(n):t&&g(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(o))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(F)||[],(function(t,n){e[n]=!0})),e}(t):E.extend({},t);var e,n,o,r,i=[],a=[],s=-1,l=function(){for(r=r||t.once,o=e=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=i.length,n=!1);t.memory||(n=!1),e=!1,r&&(i=n?[]:"")},u={add:function(){return i&&(n&&!e&&(s=i.length-1,a.push(n)),function e(n){E.each(n,(function(n,o){g(o)?t.unique&&u.has(o)||i.push(o):o&&o.length&&"string"!==w(o)&&e(o)}))}(arguments),n&&!e&&l()),this},remove:function(){return E.each(arguments,(function(t,e){for(var n;(n=E.inArray(e,i,n))>-1;)i.splice(n,1),n<=s&&s--})),this},has:function(t){return t?E.inArray(t,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return r=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return r=a=[],n||e||(i=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],o="pending",r={state:function(){return o},always:function(){return i.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(n){E.each(e,(function(e,o){var r=g(t[o[4]])&&t[o[4]];i[o[1]]((function(){var t=r&&r.apply(this,arguments);t&&g(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,o,r){var i=0;function a(t,e,o,r){return function(){var s=this,l=arguments,u=function(){var n,u;if(!(t<i)){if((n=o.apply(s,l))===e.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,g(u)?r?u.call(n,a(i,e,B,r),a(i,e,P,r)):(i++,u.call(n,a(i,e,B,r),a(i,e,P,r),a(i,e,B,e.notifyWith))):(o!==B&&(s=void 0,l=[n]),(r||e.resolveWith)(s,l))}},c=r?u:function(){try{u()}catch(n){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(n,c.stackTrace),t+1>=i&&(o!==P&&(s=void 0,l=[n]),e.rejectWith(s,l))}};t?c():(E.Deferred.getStackHook&&(c.stackTrace=E.Deferred.getStackHook()),n.setTimeout(c))}}return E.Deferred((function(n){e[0][3].add(a(0,n,g(r)?r:B,n.notifyWith)),e[1][3].add(a(0,n,g(t)?t:B)),e[2][3].add(a(0,n,g(o)?o:P))})).promise()},promise:function(t){return null!=t?E.extend(t,r):r}},i={};return E.each(e,(function(t,n){var a=n[2],s=n[5];r[n[1]]=a.add,s&&a.add((function(){o=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(n[3].fire),i[n[0]]=function(){return i[n[0]+"With"](this===i?void 0:this,arguments),this},i[n[0]+"With"]=a.fireWith})),r.promise(i),t&&t.call(i,i),i},when:function(t){var e=arguments.length,n=e,o=Array(n),r=a.call(arguments),i=E.Deferred(),s=function(t){return function(n){o[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||i.resolveWith(o,r)}};if(e<=1&&(j(t,i.done(s(n)).resolve,i.reject,!e),"pending"===i.state()||g(r[n]&&r[n].then)))return i.then();for(;n--;)j(r[n],s(n),i.reject);return i.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&H.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){n.setTimeout((function(){throw t}))};var z=E.Deferred();function q(){y.removeEventListener("DOMContentLoaded",q),n.removeEventListener("load",q),E.ready()}E.fn.ready=function(t){return z.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||z.resolveWith(y,[E]))}}),E.ready.then=z.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?n.setTimeout(E.ready):(y.addEventListener("DOMContentLoaded",q),n.addEventListener("load",q));var W=function(t,e,n,o,r,i,a){var s=0,l=t.length,u=null==n;if("object"===w(n))for(s in r=!0,n)W(t,e,s,n[s],!0,i,a);else if(void 0!==o&&(r=!0,g(o)||(a=!0),u&&(a?(e.call(t,o),e=null):(u=e,e=function(t,e,n){return u.call(E(t),n)})),e))for(;s<l;s++)e(t[s],n,a?o:o.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):i},V=/^-ms-/,G=/-([a-z])/g;function Q(t,e){return e.toUpperCase()}function K(t){return t.replace(V,"ms-").replace(G,Q)}var Y=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function J(){this.expando=E.expando+J.uid++}J.uid=1,J.prototype={cache:function(t){var e=t[this.expando];return e||(e=Object.create(null),Y(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var o,r=this.cache(t);if("string"==typeof e)r[K(e)]=n;else for(o in e)r[K(o)]=e[o];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,o=t[this.expando];if(void 0!==o){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in o?[e]:e.match(F)||[]).length;for(;n--;)delete o[e[n]]}(void 0===e||E.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var X=new J,Z=new J,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function et(t,e,n){var o;if(void 0===n&&1===t.nodeType)if(o="data-"+e.replace(tt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(o))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:$.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return Z.hasData(t)||X.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return X.access(t,e,n)},_removeData:function(t,e){X.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,o,r,i=this[0],a=i&&i.attributes;if(void 0===t){if(this.length&&(r=Z.get(i),1===i.nodeType&&!X.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(o=a[n].name).indexOf("data-")&&(o=K(o.slice(5)),et(i,o,r[o]));X.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){Z.set(this,t)})):W(this,(function(e){var n;if(i&&void 0===e)return void 0!==(n=Z.get(i,t))?n:void 0!==(n=et(i,t))?n:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),E.extend({queue:function(t,e,n){var o;if(t)return e=(e||"fx")+"queue",o=X.get(t,e),n&&(!o||Array.isArray(n)?o=X.access(t,e,E.makeArray(n)):o.push(n)),o||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),o=n.length,r=n.shift(),i=E._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),o--),r&&("fx"===e&&n.unshift("inprogress"),delete i.stop,r.call(t,(function(){E.dequeue(t,e)}),i)),!o&&i&&i.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return X.get(t,n)||X.access(t,n,{empty:E.Callbacks("once memory").add((function(){X.remove(t,[e+"queue",n])}))})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each((function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,o=1,r=E.Deferred(),i=this,a=this.length,s=function(){--o||r.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=X.get(i[a],t+"queueHooks"))&&n.empty&&(o++,n.empty.add(s));return s(),r.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],it=y.documentElement,at=function(t){return E.contains(t.ownerDocument,t)},st={composed:!0};it.getRootNode&&(at=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===E.css(t,"display")};function ut(t,e,n,o){var r,i,a=20,s=o?function(){return o.cur()}:function(){return E.css(t,e,"")},l=s(),u=n&&n[3]||(E.cssNumber[e]?"":"px"),c=t.nodeType&&(E.cssNumber[e]||"px"!==u&&+l)&&ot.exec(E.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)E.style(t,e,c+u),(1-i)*(1-(i=s()/l||.5))<=0&&(a=0),c/=i;c*=2,E.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],o&&(o.unit=u,o.start=c,o.end=r)),r}var ct={};function dt(t){var e,n=t.ownerDocument,o=t.nodeName,r=ct[o];return r||(e=n.body.appendChild(n.createElement(o)),r=E.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ct[o]=r,r)}function ft(t,e){for(var n,o,r=[],i=0,a=t.length;i<a;i++)(o=t[i]).style&&(n=o.style.display,e?("none"===n&&(r[i]=X.get(o,"display")||null,r[i]||(o.style.display="")),""===o.style.display&&lt(o)&&(r[i]=dt(o))):"none"!==n&&(r[i]="none",X.set(o,"display",n)));for(i=0;i<a;i++)null!=r[i]&&(t[i].style.display=r[i]);return t}E.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){lt(this)?E(this).show():E(this).hide()}))}});var pt,ht,mt=/^(?:checkbox|radio)$/i,gt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i;pt=y.createDocumentFragment().appendChild(y.createElement("div")),(ht=y.createElement("input")).setAttribute("type","radio"),ht.setAttribute("checked","checked"),ht.setAttribute("name","t"),pt.appendChild(ht),m.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",m.option=!!pt.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function At(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&O(t,e)?E.merge([t],n):n}function bt(t,e){for(var n=0,o=t.length;n<o;n++)X.set(t[n],"globalEval",!e||X.get(e[n],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,m.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var wt=/<|&#?\w+;/;function Ct(t,e,n,o,r){for(var i,a,s,l,u,c,d=e.createDocumentFragment(),f=[],p=0,h=t.length;p<h;p++)if((i=t[p])||0===i)if("object"===w(i))E.merge(f,i.nodeType?[i]:i);else if(wt.test(i)){for(a=a||d.appendChild(e.createElement("div")),s=(gt.exec(i)||["",""])[1].toLowerCase(),l=yt[s]||yt._default,a.innerHTML=l[1]+E.htmlPrefilter(i)+l[2],c=l[0];c--;)a=a.lastChild;E.merge(f,a.childNodes),(a=d.firstChild).textContent=""}else f.push(e.createTextNode(i));for(d.textContent="",p=0;i=f[p++];)if(o&&E.inArray(i,o)>-1)r&&r.push(i);else if(u=at(i),a=At(d.appendChild(i),"script"),u&&bt(a),n)for(c=0;i=a[c++];)vt.test(i.type||"")&&n.push(i);return d}var Et=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_t=/^([^.]*)(?:\.(.+)|)/;function Nt(){return!0}function Tt(){return!1}function St(t,e){return t===function(){try{return y.activeElement}catch(t){}}()==("focus"===e)}function Ot(t,e,n,o,r,i){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(o=o||n,n=void 0),e)Ot(t,s,n,o,e[s],i);return t}if(null==o&&null==r?(r=n,o=n=void 0):null==r&&("string"==typeof n?(r=o,o=void 0):(r=o,o=n,n=void 0)),!1===r)r=Tt;else if(!r)return t;return 1===i&&(a=r,(r=function(t){return E().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=E.guid++)),t.each((function(){E.event.add(this,e,r,o,n)}))}function Dt(t,e,n){n?(X.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var o,r,i=X.get(this,e);if(1&t.isTrigger&&this[e]){if(i.length)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=a.call(arguments),X.set(this,e,i),o=n(this,e),this[e](),i!==(r=X.get(this,e))||o?X.set(this,e,!1):r={},i!==r)return t.stopImmediatePropagation(),t.preventDefault(),r.value}else i.length&&(X.set(this,e,{value:E.event.trigger(E.extend(i[0],E.Event.prototype),i.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===X.get(t,e)&&E.event.add(t,e,Nt)}E.event={global:{},add:function(t,e,n,o,r){var i,a,s,l,u,c,d,f,p,h,m,g=X.get(t);if(Y(t))for(n.handler&&(n=(i=n).handler,r=i.selector),r&&E.find.matchesSelector(it,r),n.guid||(n.guid=E.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(F)||[""]).length;u--;)p=m=(s=_t.exec(e[u])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=E.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=E.event.special[p]||{},c=E.extend({type:p,origType:m,data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:h.join(".")},i),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,o,h,a)||t.addEventListener&&t.addEventListener(p,a)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),E.event.global[p]=!0)},remove:function(t,e,n,o,r){var i,a,s,l,u,c,d,f,p,h,m,g=X.hasData(t)&&X.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(F)||[""]).length;u--;)if(p=m=(s=_t.exec(e[u])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=E.event.special[p]||{},f=l[p=(o?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=f.length;i--;)c=f[i],!r&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||o&&o!==c.selector&&("**"!==o||!c.selector)||(f.splice(i,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(t,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(t,h,g.handle)||E.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)E.event.remove(t,p+e[u],n,o,!0);E.isEmptyObject(l)&&X.remove(t,"handle events")}},dispatch:function(t){var e,n,o,r,i,a,s=new Array(arguments.length),l=E.event.fix(t),u=(X.get(this,"events")||Object.create(null))[l.type]||[],c=E.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=E.event.handlers.call(this,l,u),e=0;(r=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(i=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==i.namespace&&!l.rnamespace.test(i.namespace)||(l.handleObj=i,l.data=i.data,void 0!==(o=((E.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s))&&!1===(l.result=o)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,o,r,i,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(i=[],a={},n=0;n<l;n++)void 0===a[r=(o=e[n]).selector+" "]&&(a[r]=o.needsContext?E(r,this).index(u)>-1:E.find(r,this,null,[u]).length),a[r]&&i.push(o);i.length&&s.push({elem:u,handlers:i})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&O(e,"input")&&Dt(e,"click",Nt),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&O(e,"input")&&Dt(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&O(e,"input")&&X.get(e,"click")||O(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Nt:Tt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Nt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Nt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Nt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Et.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){E.event.special[t]={setup:function(){return Dt(this,t,St),!1},trigger:function(){return Dt(this,t),!0},delegateType:e}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,o=this,r=t.relatedTarget,i=t.handleObj;return r&&(r===o||E.contains(o,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),E.fn.extend({on:function(t,e,n,o){return Ot(this,t,e,n,o)},one:function(t,e,n,o){return Ot(this,t,e,n,o,1)},off:function(t,e,n){var o,r;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,E(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Tt),this.each((function(){E.event.remove(this,t,n,e)}))}});var It=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Rt(t,e){return O(t,"table")&&O(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ut(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,o,r,i,a,s;if(1===e.nodeType){if(X.hasData(t)&&(s=X.get(t).events))for(r in X.remove(e,"handle events"),s)for(n=0,o=s[r].length;n<o;n++)E.event.add(e,r,s[r][n]);Z.hasData(t)&&(i=Z.access(t),a=E.extend({},i),Z.set(e,a))}}function Bt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&mt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Pt(t,e,n,o){e=s(e);var r,i,a,l,u,c,d=0,f=t.length,p=f-1,h=e[0],v=g(h);if(v||f>1&&"string"==typeof h&&!m.checkClone&&Mt.test(h))return t.each((function(r){var i=t.eq(r);v&&(e[0]=h.call(this,r,i.html())),Pt(i,e,n,o)}));if(f&&(i=(r=Ct(e,t[0].ownerDocument,!1,t,o)).firstChild,1===r.childNodes.length&&(r=i),i||o)){for(l=(a=E.map(At(r,"script"),Lt)).length;d<f;d++)u=r,d!==p&&(u=E.clone(u,!0,!0),l&&E.merge(a,At(u,"script"))),n.call(t[d],u,d);if(l)for(c=a[a.length-1].ownerDocument,E.map(a,Ut),d=0;d<l;d++)u=a[d],vt.test(u.type||"")&&!X.access(u,"globalEval")&&E.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?E._evalUrl&&!u.noModule&&E._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):b(u.textContent.replace(kt,""),u,c))}return t}function jt(t,e,n){for(var o,r=e?E.filter(e,t):t,i=0;null!=(o=r[i]);i++)n||1!==o.nodeType||E.cleanData(At(o)),o.parentNode&&(n&&at(o)&&bt(At(o,"script")),o.parentNode.removeChild(o));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var o,r,i,a,s=t.cloneNode(!0),l=at(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(a=At(s),o=0,r=(i=At(t)).length;o<r;o++)Bt(i[o],a[o]);if(e)if(n)for(i=i||At(t),a=a||At(s),o=0,r=i.length;o<r;o++)Ft(i[o],a[o]);else Ft(t,s);return(a=At(s,"script")).length>0&&bt(a,!l&&At(t,"script")),s},cleanData:function(t){for(var e,n,o,r=E.event.special,i=0;void 0!==(n=t[i]);i++)if(Y(n)){if(e=n[X.expando]){if(e.events)for(o in e.events)r[o]?E.event.remove(n,o):E.removeEvent(n,o,e.handle);n[X.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),E.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return W(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Pt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Rt(this,t).appendChild(t)}))},prepend:function(){return Pt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Rt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Pt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Pt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(At(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return W(this,(function(t){var e=this[0]||{},n=0,o=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!It.test(t)&&!yt[(gt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<o;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(At(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Pt(this,arguments,(function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(At(this)),n&&n.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var n,o=[],r=E(t),i=r.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),E(r[a])[e](n),l.apply(o,n.get());return this.pushStack(o)}}));var Ht=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},qt=function(t,e,n){var o,r,i={};for(r in e)i[r]=t.style[r],t.style[r]=e[r];for(r in o=n.call(t),e)t.style[r]=i[r];return o},Wt=new RegExp(rt.join("|"),"i");function Vt(t,e,n){var o,r,i,a,s=t.style;return(n=n||zt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||at(t)||(a=E.style(t,e)),!m.pixelBoxStyles()&&Ht.test(a)&&Wt.test(e)&&(o=s.width,r=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=o,s.minWidth=r,s.maxWidth=i)),void 0!==a?a+"":a}function Gt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(u).appendChild(c);var t=n.getComputedStyle(c);o="1%"!==t.top,l=12===e(t.marginLeft),c.style.right="60%",a=36===e(t.right),r=36===e(t.width),c.style.position="absolute",i=12===e(c.offsetWidth/3),it.removeChild(u),c=null}}function e(t){return Math.round(parseFloat(t))}var o,r,i,a,s,l,u=y.createElement("div"),c=y.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,E.extend(m,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),o},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),i},reliableTrDimensions:function(){var t,e,o,r;return null==s&&(t=y.createElement("table"),e=y.createElement("tr"),o=y.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",o.style.height="9px",it.appendChild(t).appendChild(e).appendChild(o),r=n.getComputedStyle(e),s=parseInt(r.height)>3,it.removeChild(t)),s}}))}();var Qt=["Webkit","Moz","ms"],Kt=y.createElement("div").style,Yt={};function Jt(t){var e=E.cssProps[t]||Yt[t];return e||(t in Kt?t:Yt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Qt.length;n--;)if((t=Qt[n]+e)in Kt)return t}(t)||t)}var Xt=/^(none|table(?!-c[ea]).+)/,Zt=/^--/,$t={position:"absolute",visibility:"hidden",display:"block"},te={letterSpacing:"0",fontWeight:"400"};function ee(t,e,n){var o=ot.exec(e);return o?Math.max(0,o[2]-(n||0))+(o[3]||"px"):e}function ne(t,e,n,o,r,i){var a="width"===e?1:0,s=0,l=0;if(n===(o?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=E.css(t,n+rt[a],!0,r)),o?("content"===n&&(l-=E.css(t,"padding"+rt[a],!0,r)),"margin"!==n&&(l-=E.css(t,"border"+rt[a]+"Width",!0,r))):(l+=E.css(t,"padding"+rt[a],!0,r),"padding"!==n?l+=E.css(t,"border"+rt[a]+"Width",!0,r):s+=E.css(t,"border"+rt[a]+"Width",!0,r));return!o&&i>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-i-l-s-.5))||0),l}function oe(t,e,n){var o=zt(t),r=(!m.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,o),i=r,a=Vt(t,e,o),s="offset"+e[0].toUpperCase()+e.slice(1);if(Ht.test(a)){if(!n)return a;a="auto"}return(!m.boxSizingReliable()&&r||!m.reliableTrDimensions()&&O(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===E.css(t,"display",!1,o))&&t.getClientRects().length&&(r="border-box"===E.css(t,"boxSizing",!1,o),(i=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+ne(t,e,n||(r?"border":"content"),i,o,a)+"px"}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Vt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,i,a,s=K(e),l=Zt.test(e),u=t.style;if(l||(e=Jt(s)),a=E.cssHooks[e]||E.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,o))?r:u[e];"string"===(i=typeof n)&&(r=ot.exec(n))&&r[1]&&(n=ut(t,e,r),i="number"),null!=n&&n==n&&("number"!==i||l||(n+=r&&r[3]||(E.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,o))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,o){var r,i,a,s=K(e);return Zt.test(e)||(e=Jt(s)),(a=E.cssHooks[e]||E.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=Vt(t,e,o)),"normal"===r&&e in te&&(r=te[e]),""===n||n?(i=parseFloat(r),!0===n||isFinite(i)?i||0:r):r}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,n,o){if(n)return!Xt.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?oe(t,e,o):qt(t,$t,(function(){return oe(t,e,o)}))},set:function(t,n,o){var r,i=zt(t),a=!m.scrollboxSize()&&"absolute"===i.position,s=(a||o)&&"border-box"===E.css(t,"boxSizing",!1,i),l=o?ne(t,e,o,s,i):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(i[e])-ne(t,e,"border",!1,i)-.5)),l&&(r=ot.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),ee(0,n,l)}}})),E.cssHooks.marginLeft=Gt(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Vt(t,"marginLeft"))||t.getBoundingClientRect().left-qt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(n){for(var o=0,r={},i="string"==typeof n?n.split(" "):[n];o<4;o++)r[t+rt[o]+e]=i[o]||i[o-2]||i[0];return r}},"margin"!==t&&(E.cssHooks[t+e].set=ee)})),E.fn.extend({css:function(t,e){return W(this,(function(t,e,n){var o,r,i={},a=0;if(Array.isArray(e)){for(o=zt(t),r=e.length;a<r;a++)i[e[a]]=E.css(t,e[a],!1,o);return i}return void 0!==n?E.style(t,e,n):E.css(t,e)}),t,e,arguments.length>1)}}),E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,o){var r=n.setTimeout(e,t);o.stop=function(){n.clearTimeout(r)}}))},function(){var t=y.createElement("input"),e=y.createElement("select").appendChild(y.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=y.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var re,ie=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return W(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,n){var o,r,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===t.getAttribute?E.prop(t,e,n):(1===i&&E.isXMLDoc(t)||(r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?re:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(o=r.set(t,n,e))?o:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(o=r.get(t,e))?o:null==(o=E.find.attr(t,e))?void 0:o)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&O(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,o=0,r=e&&e.match(F);if(r&&1===t.nodeType)for(;n=r[o++];)t.removeAttribute(n)}}),re={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ie[e]||E.find.attr;ie[e]=function(t,e,o){var r,i,a=e.toLowerCase();return o||(i=ie[a],ie[a]=r,r=null!=n(t,e,o)?a:null,ie[a]=i),r}}));var ae=/^(?:input|select|textarea|button)$/i,se=/^(?:a|area)$/i;function le(t){return(t.match(F)||[]).join(" ")}function ue(t){return t.getAttribute&&t.getAttribute("class")||""}function ce(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}E.fn.extend({prop:function(t,e){return W(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,n){var o,r,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&E.isXMLDoc(t)||(e=E.propFix[e]||e,r=E.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(o=r.set(t,n,e))?o:t[e]=n:r&&"get"in r&&null!==(o=r.get(t,e))?o:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):ae.test(t.nodeName)||se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,n,o,r,i,a,s,l=0;if(g(t))return this.each((function(e){E(this).addClass(t.call(this,e,ue(this)))}));if((e=ce(t)).length)for(;n=this[l++];)if(r=ue(n),o=1===n.nodeType&&" "+le(r)+" "){for(a=0;i=e[a++];)o.indexOf(" "+i+" ")<0&&(o+=i+" ");r!==(s=le(o))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,o,r,i,a,s,l=0;if(g(t))return this.each((function(e){E(this).removeClass(t.call(this,e,ue(this)))}));if(!arguments.length)return this.attr("class","");if((e=ce(t)).length)for(;n=this[l++];)if(r=ue(n),o=1===n.nodeType&&" "+le(r)+" "){for(a=0;i=e[a++];)for(;o.indexOf(" "+i+" ")>-1;)o=o.replace(" "+i+" "," ");r!==(s=le(o))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,o="string"===n||Array.isArray(t);return"boolean"==typeof e&&o?e?this.addClass(t):this.removeClass(t):g(t)?this.each((function(n){E(this).toggleClass(t.call(this,n,ue(this),e),e)})):this.each((function(){var e,r,i,a;if(o)for(r=0,i=E(this),a=ce(t);e=a[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||((e=ue(this))&&X.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":X.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,o=0;for(e=" "+t+" ";n=this[o++];)if(1===n.nodeType&&(" "+le(ue(n))+" ").indexOf(e)>-1)return!0;return!1}});var de=/\r/g;E.fn.extend({val:function(t){var e,n,o,r=this[0];return arguments.length?(o=g(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=o?t.call(this,n,E(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,(function(t){return null==t?"":t+""}))),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(de,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:le(E.text(t))}},select:{get:function(t){var e,n,o,r=t.options,i=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?i+1:r.length;for(o=i<0?l:a?i:0;o<l;o++)if(((n=r[o]).selected||o===i)&&!n.disabled&&(!n.parentNode.disabled||!O(n.parentNode,"optgroup"))){if(e=E(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,o,r=t.options,i=E.makeArray(e),a=r.length;a--;)((o=r[a]).selected=E.inArray(E.valHooks.option.get(o),i)>-1)&&(n=!0);return n||(t.selectedIndex=-1),i}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},m.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),m.focusin="onfocusin"in n;var fe=/^(?:focusinfocus|focusoutblur)$/,pe=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,o,r){var i,a,s,l,u,c,d,p,h=[o||y],m=f.call(t,"type")?t.type:t,A=f.call(t,"namespace")?t.namespace.split("."):[];if(a=p=s=o=o||y,3!==o.nodeType&&8!==o.nodeType&&!fe.test(m+E.event.triggered)&&(m.indexOf(".")>-1&&(A=m.split("."),m=A.shift(),A.sort()),u=m.indexOf(":")<0&&"on"+m,(t=t[E.expando]?t:new E.Event(m,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=A.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+A.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),e=null==e?[t]:E.makeArray(e,[t]),d=E.event.special[m]||{},r||!d.trigger||!1!==d.trigger.apply(o,e))){if(!r&&!d.noBubble&&!v(o)){for(l=d.delegateType||m,fe.test(l+m)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(o.ownerDocument||y)&&h.push(s.defaultView||s.parentWindow||n)}for(i=0;(a=h[i++])&&!t.isPropagationStopped();)p=a,t.type=i>1?l:d.bindType||m,(c=(X.get(a,"events")||Object.create(null))[t.type]&&X.get(a,"handle"))&&c.apply(a,e),(c=u&&a[u])&&c.apply&&Y(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=m,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(h.pop(),e)||!Y(o)||u&&g(o[m])&&!v(o)&&((s=o[u])&&(o[u]=null),E.event.triggered=m,t.isPropagationStopped()&&p.addEventListener(m,pe),o[m](),t.isPropagationStopped()&&p.removeEventListener(m,pe),E.event.triggered=void 0,s&&(o[u]=s)),t.result}},simulate:function(t,e,n){var o=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(o,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}}),m.focusin||E.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){E.event.simulate(e,t.target,E.event.fix(t))};E.event.special[e]={setup:function(){var o=this.ownerDocument||this.document||this,r=X.access(o,e);r||o.addEventListener(t,n,!0),X.access(o,e,(r||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,r=X.access(o,e)-1;r?X.access(o,e,r):(o.removeEventListener(t,n,!0),X.remove(o,e))}}})),E.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+t),e};var he,me=/\[\]$/,ge=/\r?\n/g,ve=/^(?:submit|button|image|reset|file)$/i,ye=/^(?:input|select|textarea|keygen)/i;function Ae(t,e,n,o){var r;if(Array.isArray(e))E.each(e,(function(e,r){n||me.test(t)?o(t,r):Ae(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,o)}));else if(n||"object"!==w(e))o(t,e);else for(r in e)Ae(t+"["+r+"]",e[r],n,o)}E.param=function(t,e){var n,o=[],r=function(t,e){var n=g(e)?e():e;o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){r(this.name,this.value)}));else for(n in t)Ae(n,t[n],e,r);return o.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&ye.test(this.nodeName)&&!ve.test(t)&&(this.checked||!mt.test(t))})).map((function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(t){return{name:e.name,value:t.replace(ge,"\r\n")}})):{name:e.name,value:n.replace(ge,"\r\n")}})).get()}}),E.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return g(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=g(t);return this.each((function(n){E(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},m.createHTMLDocument=((he=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===he.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((o=(e=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,e.head.appendChild(o)):e=y),i=!n&&[],(r=D.exec(t))?[e.createElement(r[1])]:(r=Ct([t],e,i),i&&i.length&&E(i).remove(),E.merge([],r.childNodes)));var o,r,i},E.offset={setOffset:function(t,e,n){var o,r,i,a,s,l,u=E.css(t,"position"),c=E(t),d={};"static"===u&&(t.style.position="relative"),s=c.offset(),i=E.css(t,"top"),l=E.css(t,"left"),("absolute"===u||"fixed"===u)&&(i+l).indexOf("auto")>-1?(a=(o=c.position()).top,r=o.left):(a=parseFloat(i)||0,r=parseFloat(l)||0),g(e)&&(e=e.call(t,n,E.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),c.css(d))}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,n,o=this[0];return o?o.getClientRects().length?(e=o.getBoundingClientRect(),n=o.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,o=this[0],r={top:0,left:0};if("fixed"===E.css(o,"position"))e=o.getBoundingClientRect();else{for(e=this.offset(),n=o.ownerDocument,t=o.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==o&&1===t.nodeType&&((r=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),r.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-E.css(o,"marginTop",!0),left:e.left-r.left-E.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||it}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;E.fn[t]=function(o){return W(this,(function(t,o,r){var i;if(v(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===r)return i?i[e]:t[o];i?i.scrollTo(n?i.pageXOffset:r,n?r:i.pageYOffset):t[o]=r}),t,o,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=Gt(m.pixelPosition,(function(t,n){if(n)return n=Vt(t,e),Ht.test(n)?E(t).position()[e]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,o){E.fn[o]=function(r,i){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===i?"margin":"border");return W(this,(function(e,n,r){var i;return v(e)?0===o.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?E.css(e,n,s):E.style(e,n,r,s)}),e,a?r:void 0,a)}}))})),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,o){return this.on(e,t,n,o)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var be=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,o,r;if("string"==typeof e&&(n=t[e],e=t,t=n),g(t))return o=a.call(arguments,2),(r=function(){return t.apply(e||this,o.concat(a.call(arguments)))}).guid=t.guid=t.guid||E.guid++,r},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=O,E.isFunction=g,E.isWindow=v,E.camelCase=K,E.type=w,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(be,"")},void 0===(o=function(){return E}.apply(e,[]))||(t.exports=o);var we=n.jQuery,Ce=n.$;E.noConflict=function(t){return n.$===E&&(n.$=Ce),t&&n.jQuery===E&&(n.jQuery=we),E};var Ee,xe,_e=/^(?:toggle|show|hide)$/,Ne=/queueHooks$/;function Te(){xe&&(!1===y.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(Te):n.setTimeout(Te,E.fx.interval),E.fx.tick())}function Se(){return n.setTimeout((function(){Ee=void 0})),Ee=Date.now()}function Oe(t,e){var n,o=0,r={height:t};for(e=e?1:0;o<4;o+=2-e)r["margin"+(n=rt[o])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function De(t,e,n,o,r){return new De.prototype.init(t,e,n,o,r)}function Ie(t,e,n){for(var o,r=(Me.tweeners[e]||[]).concat(Me.tweeners["*"]),i=0,a=r.length;i<a;i++)if(o=r[i].call(n,e,t))return o}function Me(t,e,n){var o,r,i=0,a=Me.prefilters.length,s=E.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=Ee||Se(),n=Math.max(0,u.startTime+u.duration-e),o=1-(n/u.duration||0),i=0,a=u.tweens.length;i<a;i++)u.tweens[i].run(o);return s.notifyWith(t,[u,o,n]),o<1&&a?n:(a||s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:Ee||Se(),duration:n.duration,tweens:[],createTween:function(e,n){var o=E.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(o),o},stop:function(e){var n=0,o=e?u.tweens.length:0;if(r)return this;for(r=!0;n<o;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(!function(t,e){var n,o,r,i,a;for(n in t)if(r=e[o=K(n)],i=t[n],Array.isArray(i)&&(r=i[1],i=t[n]=i[0]),n!==o&&(t[o]=i,delete t[n]),(a=E.cssHooks[o])&&"expand"in a)for(n in i=a.expand(i),delete t[o],i)n in t||(t[n]=i[n],e[n]=r);else e[o]=r}(c,u.opts.specialEasing);i<a;i++)if(o=Me.prefilters[i].call(u,t,c,u.opts))return g(o.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=o.stop.bind(o)),o;return E.map(c,Ie,u),g(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),E.fx.timer(E.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}return E.Tween=De,De.prototype={constructor:De,init:function(t,e,n,o,r,i){this.elem=t,this.prop=n,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=o,this.unit=i||(E.cssNumber[n]?"":"px")},cur:function(){var t=De.propHooks[this.prop];return t&&t.get?t.get(this):De.propHooks._default.get(this)},run:function(t){var e,n=De.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):De.propHooks._default.set(this),this}},De.prototype.init.prototype=De.prototype,De.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[Jt(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},De.propHooks.scrollTop=De.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=De.prototype.init,E.fx.step={},E.Animation=E.extend(Me,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,ot.exec(e),n),n}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(F);for(var n,o=0,r=t.length;o<r;o++)n=t[o],Me.tweeners[n]=Me.tweeners[n]||[],Me.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var o,r,i,a,s,l,u,c,d="width"in e||"height"in e,f=this,p={},h=t.style,m=t.nodeType&&lt(t),g=X.get(t,"fxshow");for(o in n.queue||(null==(a=E._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,E.queue(t,"fx").length||a.empty.fire()}))}))),e)if(r=e[o],_e.test(r)){if(delete e[o],i=i||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[o])continue;m=!0}p[o]=g&&g[o]||E.style(t,o)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(p))for(o in d&&1===t.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=g&&g.display)&&(u=X.get(t,"display")),"none"===(c=E.css(t,"display"))&&(u?c=u:(ft([t],!0),u=t.style.display||u,c=E.css(t,"display"),ft([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===E.css(t,"float")&&(l||(f.done((function(){h.display=u})),null==u&&(c=h.display,u="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=X.access(t,"fxshow",{display:u}),i&&(g.hidden=!m),m&&ft([t],!0),f.done((function(){for(o in m||ft([t]),X.remove(t,"fxshow"),p)E.style(t,o,p[o])}))),l=Ie(m?g[o]:0,o,f),o in g||(g[o]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?Me.prefilters.unshift(t):Me.prefilters.push(t)}}),E.speed=function(t,e,n){var o=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||g(t)&&t,duration:t,easing:n&&e||e&&!g(e)&&e};return E.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in E.fx.speeds?o.duration=E.fx.speeds[o.duration]:o.duration=E.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){g(o.old)&&o.old.call(this),o.queue&&E.dequeue(this,o.queue)},o},E.fn.extend({fadeTo:function(t,e,n,o){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,n,o)},animate:function(t,e,n,o){var r=E.isEmptyObject(t),i=E.speed(e,n,o),a=function(){var e=Me(this,E.extend({},t),i);(r||X.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(t,e,n){var o=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",i=E.timers,a=X.get(this);if(r)a[r]&&a[r].stop&&o(a[r]);else for(r in a)a[r]&&a[r].stop&&Ne.test(r)&&o(a[r]);for(r=i.length;r--;)i[r].elem!==this||null!=t&&i[r].queue!==t||(i[r].anim.stop(n),e=!1,i.splice(r,1));!e&&n||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=X.get(this),o=n[t+"queue"],r=n[t+"queueHooks"],i=E.timers,a=o?o.length:0;for(n.finish=!0,E.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<a;e++)o[e]&&o[e].finish&&o[e].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var n=E.fn[e];E.fn[e]=function(t,o,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Oe(e,!0),t,o,r)}})),E.each({slideDown:Oe("show"),slideUp:Oe("hide"),slideToggle:Oe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,n,o){return this.animate(e,t,n,o)}})),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(Ee=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),Ee=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){xe||(xe=!0,Te())},E.fx.stop=function(){xe=null},E.fx.speeds={slow:600,fast:200,_default:400},E}(window)),function(t,e){if(!(e&&e.$&&e.hasOwnProperty("browser")&&e.logger)){var n,o,r=e,i=r.$,a=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.\%]+)\s*\)/,l=((n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1}).acceptNode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1},n),u=(o={log:!1,debug:!1,warn:!1,error:!0,trace:!1,prefix:"LoopIndex "},{_logs:[],config:function(t){return i.extend(o,t),i.extend({},o)},ignore:function(){},log:function(){o.log&&this._log("log",Array.prototype.slice.call(arguments))},error:function(){o.error&&this._log("error",Array.prototype.slice.call(arguments))},debug:function(){o.debug&&this._log("log",Array.prototype.slice.call(arguments))},trace:function(){if(o.trace){var t=Error().stack,e=t?[t.replace("Error","Debug:"),"\n"]:[];this._log("log",e.concat(Array.prototype.slice.call(arguments)))}},warn:function(){this._log("warn",Array.prototype.slice.call(arguments))},_log:function(t,e){var n=new Date,r=[n.getMinutes(),n.getSeconds(),n.getMilliseconds()].join(":");e.unshift(r+">"),o.prefix&&e.unshift(o.prefix),this._logs.push({method:t,logs:e}),this.scheduleDump()},dump:function(){var t=this._logs;this._logs=[],t.forEach((function(t){console[t.method].apply(console,t.logs)}))},timeout:null,scheduleDump:function(){this.timeout||(this.timeout=setTimeout(function(){this.timeout=null,this.dump()}.bind(this),100))}}),c=function(){function t(){}return t.prototype.merge=function(t,e,n,o){void 0===o&&(o=!1);var i=null===n?function(t,e){return t===e}:function(t,e){return t&&e&&t[n]===e[n]};t=t||[];var a=[];return(e=e||[]).forEach((function(e){for(var n=!1,s=0,l=t.length;!n&&s<l;++s){var u=t[s];i(u,e)&&(t[s]=o&&u&&e?r.$.extend(u,e):e,n=!0)}n||a.push(e)})),a.length&&t.push.apply(t,a),t},t}(),d=function(){function t(){}return t.prototype.getRealTextLength=function(t){if(!t)return 0;for(var e=t.length;e&&r.utils.strings.isEmptyString(t[e-1]);)--e;return e},t.prototype.toMap=function(t,e,n){for(var o,r,i={},a=Boolean(e),s=Boolean(n),l=0,u=t&&t.length||0;l<u;++l)null!=(r=t[l])&&(o="*"===n?r:s?r[n]:1,a?i[String(r[e])]=o:i[String(r)]=1);return i},t.prototype.toStringMap=function(t,e){for(var n={},o=e?"upper"===e?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}:null,r=0,i=t&&t.length||0;r<i;++r)n[String(o?o(t[r]):t[r])]=1;return n},t.prototype.toStringArray=function(t,e){if(!t)return[];var n,o="upper"===e?String.prototype.toUpperCase:"lower"===e?String.prototype.toLowerCase:null;if("string"==typeof t)n=t.split(",");else{if(!i.isArray(t))return r.logger.warn("illegal format of string array"),[];n=t}return n.forEach((function(t,e){(t=t&&String(t).trim())&&o&&(t=o.apply(t)),n[e]=t})),n},t.prototype.padString=function(t,e,n,o){var r;r=null==t?"":String(t);for(var i=(n=String(n)).length,a=[r],s=r.length;s<e;s+=i)o?a.push(n):a.unshift(n);return a.join("")},t.prototype.padNumber=function(t,e){return r.utils.strings.padString(t,e,"0",!1)},t.prototype.randomString=function(t){(!t||isNaN(t)||t<1)&&(t=6);for(var e=String((1+Math.random())*Date.now()),n=btoa(e).replace(/[^a-z]/gi,"");n.length<t;)n+=n;return n.length>t&&(n=n.substring(n.length-t)),n},t.prototype.isEmptyString=function(t){for(var e,n=t&&t.length||0;n>0;)if(0!==(e=t.charCodeAt(--n))&&8203!==e&&65279!==e)return!1;return!0},t.prototype.getEffectiveStringLength=function(t){for(var e,n=t&&t.length||0,o=0;n>0;)0!==(e=t.charCodeAt(--n))&&8203!==e&&65279!==e&&++o;return o},t.prototype.getEffectiveStringIndex=function(t,e){if(isNaN(e)||e<0)return 0;var n,o=t&&t.length||0;if(e>=o)return o;for(var r=0,i=0;i<o;++i)if(0!==(n=t.charCodeAt(i))&&8203!==n&&65279!==n&&++r>e)return i;return o},t}(),f=function(){function t(){this._matchSelector=null}return t.myNormalizeNode=function(e){if(e&&1===e.nodeType)for(var n=e.firstChild;n;){if(1===n.nodeType)t.myNormalizeNode(n);else if(3==n.nodeType)for(var o=void 0;(o=n.nextSibling)&&3==o.nodeType;){var r=o.nodeValue;r&&(n.nodeValue=n.nodeValue+r),e.removeChild(o)}n=n.nextSibling}},t.prototype.getPositioningParent=function(t){for(var e,n=this.toJQuery(t),o=n;(n=n.parent()).length&&n[0].ownerDocument&&"relative"!==(e=(o=n).css("position"))&&"absolute"!==e&&"fixed"!==e;);return o},t.prototype.addScriptToDocument=function(t,e){try{var n=(e=e||window.document).createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",t),document.head.appendChild(n),!0}catch(e){return console.error("While loading script "+t+"\n{err}"),!1}},Object.defineProperty(t.prototype,"NodeIteratorUniversalFunction",{get:function(){return l},enumerable:!1,configurable:!0}),t.prototype.isContentEditable=function(t,e,n){for(var o,r=t&&t.parentNode;r&&r!==e;r=r.parentNode)if(1===r.nodeType&&(o=r.getAttribute("contenteditable"))){if("true"===(o=o.toLowerCase()))return!0;if("false"===o)return!1}return n},t.prototype.createTreeWalker=function(t,e,n){var o=t&&t.ownerDocument;if(!o)return null;var i=n?function(){var t=function(t){return n(t)};return t.acceptNode=function(){return 1},t}():r.browser.msie?l:null;return o.createTreeWalker(t,e,i,!1)},t.prototype.createNodeIterator=function(t,e,n){var o=t&&t.ownerDocument;if(!o)return null;var i=n?function(){var t=function(t){return n(t)};return t["]acceptNode"]=function(){return 1},t}():r.browser.msie?l:null;return o.createNodeIterator(t,e,i,!1)},t.prototype.getNodeIndex=function(t){if(!t)return-1;for(var e=0;t=t.previousSibling;)++e;return e},t.prototype.insertNodeAt=function(t,e,n){return!(!t||!e||1!==e.nodeType||n<0)&&(e.insertBefore(t,e.childNodes[n]),!0)},t.prototype.normalizeNode=function(e){return e?r.browser.msie||"function"!=typeof e.normalize?(t.myNormalizeNode(e),e):(e.normalize(),e):null},t.prototype.isEmptyTextNode=function(t){if(!t||3!==t.nodeType)return!1;var e=t;return 0===e.length||r.utils.strings.isEmptyString(e.nodeValue)},t.prototype.getNodeLength=function(t){var e=t&&t.nodeType;return 1===e?t.childNodes.length:3===e?t.length:0},t.prototype.getNodeTextContent=function(t){return i(t).text()},t.prototype.isOnlyChild=function(t){var e=t&&t.parentNode;return e&&e.firstChild===t&&e.lastChild===t},t.prototype.insertAfter=function(t,e,n){return t?(n=n||e&&e.parentNode,e&&e.parentNode!==n&&(e=null),n?e?n.insertBefore(t,e.nextSibling):n.insertBefore(t,n.firstChild):void 0):null},t.prototype.contents=function(t){return i.makeArray(i(t).contents())},t.prototype.extractContent=function(t){for(var e,n=document.createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n},t.prototype.toJQuery=function(t,e){if(void 0===e&&(e=!1),!t)return r.$("");var n=t;return n instanceof r.$||(n=r.$(t)),!e&&n.length>1&&(n=n.eq(0)),n},t.prototype.getRealTextLength=function(t){return t&&t.data?r.utils.strings.getRealTextLength(t.data):0},t.prototype.isDescendantOf=function(t,e){if(!e||!t)return!1;var n="string"==typeof e&&e;if(!n&&1!==e.nodeType)return!1;try{for(;t&&t.parentNode;){if(n){if(r.utils.dom.matchesSelector(t.parentNode,n))return!0}else if(t.parentNode===e)return!0;t=t.parentNode}}catch(t){}return!1},t.prototype.clearNodeBackgroundImage=function(t){t&&t.style&&t.style["background-image"]&&(t.style["background-image"]=null)},t.prototype.getElementPageOffset=function(t,e){if(!t||!t.getBoundingClientRect)return{top:0,left:0};var n=t.getBoundingClientRect(),o=t.ownerDocument,r=o.defaultView,i=o.body,a=o.documentElement,s=r.pageYOffset||a.scrollTop||r.scrollY||i.scrollTop||0,l=r.pageXOffset||a.scrollLeft||r.scrollX||i.scrollLeft||0,u=a.clientTop||i.clientTop||0,c=a.clientLeft||i.clientLeft||0,d=n.top+s-u,f=n.left+l-c,p={top:Math.round(d),left:Math.round(f)};return e&&(p.top+=i.scrollTop||0,p.left+=i.scrollLeft||0),p},t.prototype.compareNodePosition=function(t,e){if(t===e)return 0;var n=t.compareDocumentPosition(e);return 4&n?-1:8&n?-1:1},t.prototype.forAllTextChildren=function(t,e){if(t&&e&&1===t.nodeType)for(var n=t.firstChild,o=n&&n.nextSibling;n;o=(n=o)&&n.nextSibling)1===n.nodeType?this.forAllTextChildren(n,e):3===n.nodeType&&e(n)},t.prototype.getFirstNodeInRange=function(t){var e=t&&t.startContainer;if(!e)return null;if(3===e.nodeType)return e;var n=this.getNthChild(e,t.startOffset);return n||r.utils.dom.createNodeIterator(e,NodeFilter.SHOW_TEXT||NodeFilter.SHOW_ELEMENT).nextNode()},t.prototype.getLastNodeInRange=function(t){var e=t&&t.endContainer;if(!e)return null;if(3===e.nodeType)return e;var n=this.getNthChild(e,t.endOffset-1);return n||r.utils.dom.createNodeIterator(e,NodeFilter.SHOW_TEXT||NodeFilter.SHOW_ELEMENT).previousNode()},t.prototype.hasTextSelection=function(t){if(!t||t.collapsed)return!1;if(3===t.startContainer.nodeType&&t.startOffset<t.startContainer.length)return!0;if(3===t.endContainer.nodeType&&t.endOffset<t.endContainer.length)return!0;var e=!1;return this.walkRange(t,(function(t,n){return!(3===t.nodeType&&t.length>0)||(e=!0,!1)})),e},t.prototype.getNthChild=function(t,e){if(!t||1!==t.nodeType)return null;for(var n=t.firstChild;n&&e>=0;n=n.nextSibling,--e)if(0===e)return n;return null},t.prototype.getSelectedTextNodes=function(t){var e=this;if(!t||t.collapsed)return null;var n=[];return this.walkRange(t,(function(t,o){if(3===t.nodeType){var r=e.processTextNode(t,o);r&&n.push(r)}return!0})),n},t.prototype.extractTextNode=function(t){if(!t||!t.node)return null;if(!t.partial)return t.node;var e=t.node;return t.end<e.length&&e.splitText(t.end),t.start>0&&(e=e.splitText(t.start)),e},t.prototype.extractInlineNode=function(e){var n=e&&e.node;if(!n)return null;var o=function(e){for(;e.parentNode&&t.INLINE_RE.test(r.$(e.parentNode).css("display"));)e=e.parentNode;return e}(n);if(o===n)return r.utils.dom.extractTextNode(e);var i=o,a=r.utils.dom;if(!e.partial)return a.splitNode(i,e.node,e.end);var s=i;return e.end<n.length&&(n=(s=a.splitNode(s,n,e.end)).lastChild),e.start>0&&a.splitNode(s,n,e.start),s},t.prototype.splitNode=function(t,e,n){if(0===n&&(e===t||e===t.firstChild))return t;if(n>=r.utils.dom.getNodeLength(e)&&(e===t||e===t.lastChild))return t;var o=t.parentNode,i=r.utils.dom.getNodeIndex(t),a=e.ownerDocument.createRange();a.setStart(o,i),a.setEnd(e,n);var s=a.extractContents();return o.insertBefore(s,t),t.previousSibling||t},t.prototype.walkRange=function(t,e){if(t&&!t.collapsed){var n,o=this.getFirstNodeInRange(t),i=this.getLastNodeInRange(t);if(o&&i)for(var a=!1,s=!1,l=r.utils.dom.createNodeIterator(t.commonAncestorContainer,NodeFilter.SHOW_ALL);(n=l.nextNode())&&(!s||r.utils.dom.isDescendantOf(n,i));){if(!a){if(n!=o)continue;a=!0}if(!e(n,t))return;n===i&&(s=!0)}}},t.prototype.processTextNode=function(t,e){var n;if(!t||3!==t.nodeType||!(n=t.length))return null;var o={node:t,start:0,end:n,partial:!1};if(t===e.startContainer&&e.startOffset>0){if(e.startOffset>=n)return null;o.partial=!0,o.start=e.startOffset}return t===e.endContainer&&e.endOffset<n&&(o.partial=!0,o.end=e.endOffset),o},t.prototype.hasClass=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t,o=n.classList||n.className&&n.className.split(/\s/);if(o&&o.length)for(var r=o.length-1;r>=0;--r)if(o[r]===e)return!0;return!1},t.prototype.matchesSelector=function(t,e){if(!t||1!==t.nodeType||!e)return!1;if(!this._matchSelector){var n=t,o=void 0;o="function"==typeof n.matches?function(t,e){return t.matches(e)}:"function"==typeof n.msMatchesSelector?function(t,e){return t.msMatchesSelector(e)}:"function"==typeof n.webkitMatchesSelector?function(t,e){return t.webkitMatchesSelector(e)}:function(t,e){return i(t).is(e)},this._matchSelector=o}return this._matchSelector(t,e)},t.INLINE_RE=/inline/i,t}(),p=function(){function t(t){this._doc=t,this._styleId=r.utils.strings.randomString(8),this._loadedStyleIds={}}return Object.defineProperty(t.prototype,"document",{get:function(){return this._doc},enumerable:!1,configurable:!0}),t.prototype.getOwnStyleSheet=function(t){var e=this._doc.getElementById(this._styleId);return!e&&t&&((e=this._doc.createElement("style")).appendChild(this._doc.createTextNode("")),e.setAttribute("id",this._styleId),this._loadedStyleIds[this._styleId]=!0,this.$head.append(e)),e&&e.sheet},t.prototype.loadCSSString=function(t,e){var n=r.utils.getUniqueId("li-style"),o=this.$head,i=this._doc.createElement("style");i.id=n,this._loadedStyleIds[n]=!0,i.appendChild(this._doc.createTextNode(t)),o.append(i)},t.prototype.loadCSS=function(t,e,n){var o=this,a=this.$head,s=this._doc;(t||[]).forEach((function(t){!function(t){if(t){var l="loopindex-"+t.replace(/[^0-9a-z]+/gi,"_")+"-"+r.utils.getUniqueNumber();if(0===i(a).find("#"+l).length){var u=i(s.createElement("link"));u.attr({rel:"stylesheet",type:"text/css",id:l,href:r.utils.isAbsoluteUrl(t)?t:r.utils.joinPath(e,t)}),o._loadedStyleIds[l]=!0,n&&o._attachCBToLink(u[0],t,n),a.append(u)}}}(t)}))},t.prototype.addRule=function(t,e){if(e&&"object"==typeof e){var n=this.getOwnStyleSheet(!0);if(n){var o=n.rules&&n.rules.length||0,i=this._makeRule(e);"function"==typeof n.addRule?n.addRule(t,i,o):"function"==typeof n.insertRule?n.insertRule(t+" "+this._makeRule(e)+" }",n.rules&&n.rules.length||0):r.logger.error("CSSLoader addRule: no matching function")}else r.logger.warn("LoopIndex CSSLoader cannot create stylesheet")}},t.prototype.reset=function(){var t=this.getOwnStyleSheet(!1);if(t&&t.deleteRule)for(var e=t.cssRules.length-1;e>=0;--e)t.deleteRule(e)},t.prototype.dispose=function(){if(this._doc){var t=this.$head;Object.keys(this._loadedStyleIds).forEach((function(e){setTimeout((function(){try{t.find("#"+e).remove()}catch(t){}}),0)})),this._loadedStyleIds={},this._doc=null}},Object.defineProperty(t.prototype,"$head",{get:function(){return r.$(this._doc&&(this._doc.head||this._doc.getElementsByTagName("head")[0]))},enumerable:!1,configurable:!0}),t.prototype._makeRule=function(t){return Object.keys(t||{}).map((function(e){return e+": "+t[e]+";"})).join("\n")},t.prototype._attachCBToLink=function(t,e,n){if("function"==typeof n){var o=function(){t.removeEventListener("load",o),t.removeEventListener("error",r),n(e,{loaded:!0})};"function"==typeof t.addEventListener?(t.addEventListener("load",o),t.addEventListener("error",r)):(t.onload=function(){o()},t.onerror=function(t){r(t)})}function r(i){t.removeEventListener("load",o),t.removeEventListener("error",r),n(e,{loaded:!1,error:i})}},t}(),h=function(){function t(){}return t.prototype.logEditorEvents=function(t,e,n,o){if(e&&Boolean(o)!==Boolean(t.savedEditorFireMethod)){var i=e;if(o){t.savedEditorFireMethod=i.fire;var a=n?new RegExp(n.join("|"),"i"):/mouse|selection|click|focus|undo|redo|snapshot|resolvename/i,s=function(t){return!t||a.test(t)};i.fire=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s(e[0])||r.logger.debug("Editor event "+e[0]),t.savedEditorFireMethod.apply(i,e)}}else i.fire=t.savedEditorFireMethod,t.savedEditorFireMethod=null}},t}(),m=function(){function t(){this._dom=new f,this._strings=new d,this.array=new c,this._pluginUtils=new h}return Object.defineProperty(t.prototype,"pluginUtils",{get:function(){return this._pluginUtils},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dom",{get:function(){return this._dom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strings",{get:function(){return this._strings},enumerable:!1,configurable:!0}),t.prototype.clearObject=function(t){return t?(Object.keys(t).forEach((function(e){try{delete t[e]}catch(t){}})),t):{}},t.prototype.getRelativeTimezoneOffset=function(t){if(!t)return 0;try{var e=new Date,n=e.toLocaleString("en-us",{timeZone:t});return Date.parse(n)-e.getTime()}catch(e){return r.logger.error("convertDateToTimezone",t,e),0}},t.prototype.convertDateToTimezone=function(t,e){if(t=t||new Date,!e)return t;try{var n=r.utils.getRelativeTimezoneOffset(e);return new Date(t.getTime()+n)}catch(n){return r.logger.error("convertDateToTimezone",e,n),t}},Object.defineProperty(t.prototype,"CSSLoader",{get:function(){return p},enumerable:!1,configurable:!0}),t.prototype.intensifyColor=function(t,e){var n,o=t.match(a),r=!o&&t.match(s),i=r||r,l=10;i?n=[i[1],i[2],i[3]]:(t.match(s),l=16,(t=String(t).replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),n=[t.substr(0,2),t.substr(2,2),t.substr(4,2)]),e=e||0;for(var u,c=[],d=0;d<3;d++)u=parseInt(n[d],l),c.push(Math.round(Math.min(Math.max(0,u+u*e),255)));return o?"rgb("+c[0]+","+c[1]+","+c[2]+")":r?"rgba("+c[0]+","+c[1]+","+c[2]+", "+r[4]+")":"#"+c.map((function(t){return t<16?"0"+t.toString(16):t.toString(16)})).join("")},t.prototype.getUniqueNumber=function(){return t.nextId++},t.prototype.getUniqueId=function(t,e){return""+t+r.utils.getUniqueNumber()+(e||"")},t.prototype.yes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},t.prototype.no=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!1},t.prototype.always=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t}},t.prototype.getCurrentScriptPath=function(){var t=r.utils.getCurrentScriptURL();if(!t)return null;var e=/^(.+\/)[^\/]+\.js/i.exec(t);return e&&e[1]},t.prototype.getCurrentScriptURL=function(){try{var t=document&&document.currentScript;if(t)return t.src;var e=window.import,n=e&&e.meta;if(void 0!==n&&n.url)return n.url}catch(t){return null}},t.prototype.scrollToElement=function(t){var e=r.utils.dom.toJQuery(t);return e&&e.scrollintoview()},t.prototype.joinPath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.map((function(t){return t&&t.trim()})).filter(Boolean).join("/").replace(/(^|[^:])\/[\/]+/g,"$1/");return n},t.prototype.isAbsoluteUrl=function(t){return!!t&&("/"===t[0]||/^[a-z]+\:\/\//i.test(t))},t.nextId=Math.round(Date.now()%1e4),t}(),g=function(){function t(){this._timeoutMap={}}return t.prototype.clear=function(){var t=this;Object.keys(this._timeoutMap).forEach((function(e){return t.removeTimer(e)}))},t.prototype.setTimer=function(t,e,n){var o="temp-"+Date.now()*Math.random();return this.createTimer(o,{callback:t,timeoutMSecs:e,repeatCount:n,autoDispose:!0}).start()},t.prototype.createTimer=function(t,e){var n=this;if(!t)throw new Error("setTimer requires a timer id");var o=this._timeoutMap[t];if(o)o.update(e);else{if(!e.callback)throw new Error("setTimer: callback required");var r=this.upgradeOptions(e);o=this._timeoutMap[t]=new v(r,(function(){delete n._timeoutMap[t]}))}return o},t.prototype.startTimer=function(t){var e=this._timeoutMap[t];return e&&e.start()},t.prototype.stopAll=function(){var t=this;Object.keys(this._timeoutMap).forEach((function(e){return t.stopTimer(e)}))},t.prototype.stopTimer=function(t){var e=this._timeoutMap[t];return e&&e.stop(),e},t.prototype.removeTimer=function(t){var e=this._timeoutMap[t];return e&&e.dispose(),Boolean(e)},t.prototype.elapsed=function(t){var e=this._timeoutMap[t];return e&&e.elapsed||0},t.prototype.upgradeOptions=function(t){return r.$.extend({},{callback:null,repeatCount:1,timeoutMSecs:-1,maxTimeSecs:0,autoDispose:!0},t)},t.FOREVER=999999999,t}(),v=function(){function t(t,e){var n=this;if(this.done=e,this._elapsed=0,this._callCount=0,this._startTime=0,this._stop=null,!t.callback)throw new Error("Timeout constructor: callback required");this._options=r.$.extend({},t),this._callback=function(){n._elapsed=Date.now()-n._startTime,n._options.maxTimeSecs>0&&1e3*n._options.maxTimeSecs<n._elapsed&&n.stop(),n._options.callback(n);var t=n._options.repeatCount;n._options&&(t<=0||++n._callCount>=t)&&(n.stop(),n._options.autoDispose&&n.dispose())}}return Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this._stop)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t=this;if(this.stop(),Object.keys(this._options).forEach((function(e){return delete t._options[e]})),this._callback=null,this.done){var e=this.done;this.done=null,e()}},t.prototype.start=function(){if(this.isRunning)return this;var t;this.reset();var e=this._options.repeatCount;return(isNaN(e)||"number"!=typeof e||e<0)&&(this._options.repeatCount=1),this._startTime=Date.now(),t=setInterval(this._callback,this._options.timeoutMSecs),this._stop=function(){return clearInterval(t)},this},t.prototype.reset=function(){return this._elapsed=0,this._callCount=0,this.isRunning&&(this.stop(),this.start()),this},t.prototype.stop=function(){if(this._stop){var t=this._stop;this._stop=null,t()}return this},t.prototype.update=function(t){var e=this._options;return t.repeatCount>0&&(e.repeatCount=t.repeatCount),t.timeoutMSecs>=0&&(e.timeoutMSecs=t.timeoutMSecs),t.maxTimeSecs>=0&&(e.maxTimeSecs=t.maxTimeSecs),void 0!==t.data&&(e.data=t.data),this},Object.defineProperty(t.prototype,"elapsed",{get:function(){return this._elapsed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRepeating",{get:function(){return this._options.repeatCount>0},enumerable:!1,configurable:!0}),t}(),y=function(){this.msie=!1,this.type="unknown",this.webkit=!1,this.chrome=!1,this.safari=!1,this.firefox=!1,this.webkitType=null;var t=navigator.userAgent.toLowerCase(),e=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}}(t);e.browser&&(this[e.browser]=!0,this.version=e.version||"0",this.type=e.browser),this.chrome?this.webkit=!0:this.webkit&&(this.safari=!0),this.webkit&&(this.type="webkit",this.webkitType="webkit"!==this.type?null:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?"safari":"chrome"),this.firefox=!0===/firefox/i.test(t),this.msie||(this.msie=Boolean(/trident/i.test(t)))&&(this.type="msie")},A=function(){function e(){this._args=null,this._url=""}return e.prototype.getArgument=function(t,e){return this._parseLocation(),this._args.hasOwnProperty(t)?decodeURIComponent(this._args[t]):e},e.prototype.getNumericArgument=function(t,e){var n=this.getArgument(t,""),o=parseInt(n,10);return isNaN(o)&&(o=e),o},e.prototype.getAllArguments=function(){this._parseLocation();var t,e={};for(t in this._args)this._args.hasOwnProperty(t)&&(e[t]=this._args[t]);return e},e.prototype.createSearchString=function(t){if(!t)return"";var e,n,o="";for(e in t)t.hasOwnProperty(e)&&"function"!=typeof(n=t[e])&&(o.length&&(o+="&"),o+=e+"="+decodeURIComponent(n));return o},e.prototype.parse=function(t,e){if(e=e||{},"string"!=typeof t||t.length<1)return{};var n=t.charAt(0);"?"!==n&&"#"!==n||(t=t.substring(1));var o,r,i,a,s=t.split("&"),l={true:!0,false:!1};for(o=s.length-1;o>=0;--o)(r=s[o])&&(i=r.indexOf("="))>0&&(a=decodeURIComponent(r.substring(i+1)),l.hasOwnProperty(a)&&(a=l[a]),e[r.substring(0,i)]=a);return e},e.prototype._parseLocation=function(){var e=t.location;if(this._url!==e.href||!this._args){this._url=e.href;var n={};this.parse(e.search,n),this.parse(e.hash,n),this._args=n}return this._args},e}(),b={mixin:function(t){var e={},n=!1,o=function(t){return e[t]=e[t]||[]},a=function(){var t=e;Object.keys(t).forEach((function(e){var n=t[e];n&&n.length||delete t[e]}))},s=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){if(!n){var s=o(t),l=s.slice(),u=[];l.forEach((function(t){t.muted||t.callback.apply(t.scope,e),t.options&&t.options.count&&(--t.options.count,t.options.count<=0&&u.push(t))})),u.length&&(u.forEach((function(t){s.splice(s.indexOf(t),1)})),a())}}else r.logger.warn("cannot trigger empty event")},l={on:function(t,e,n,a){var s=this;if(!t)return r.logger.warn("cannot register to empty event"),this;if(i.isArray(t))t.forEach((function(t){s.addListener(t,e,n,a)}));else if("function"==typeof e){o(t).push({scope:n,muted:!1,callback:e,options:a})}else r.logger.error("events mixin addListener: bad callback",e);return this},off:function(t,n){var o=this;if(!t&&!n)return this.removeAllListeners();if(!n&&t&&"object"==typeof t&&(n=t,t=null),t&&t instanceof Array)return t.forEach((function(t){o.off(t,n)})),this;function r(t,e){return t&&(!n||t.scope===n||t.callback===n)}var i=e;return Object.keys(i).forEach((function(e){t&&t!==e||i[e].filter(r).forEach((function(t){var n=i[e].indexOf(t);n>=0&&i[e].splice(n,1)}))})),a(),this},removeAllListeners:function(){return Object.keys(e).forEach((function(t){return e[t]=void 0})),this},muteListener:function(t,n){if(!t)return this;n=Boolean(n);var o=e;return Object.keys(o).forEach((function(e){var r=o[e];r&&r.forEach((function(e){e&&e.scope===t&&(e.muted=n)}))})),this},muteEvents:function(){return n=!0,this},unmuteEvents:function(){return n=!1,this},once:function(t,e,n,o){return(o=o||{}).count=1,this.on(t,e,n,o)},trigger:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return s.apply(this,[t].concat(e)),this}};Object.keys(l).forEach((function(e){var n=l[e];"function"==typeof n&&Object.defineProperty(t,e,{value:n,enumerable:!0,writable:!1,configurable:!1})}));var u={fire:l.trigger,removeListener:l.off,bind:l.on,addListener:l.on};return Object.keys(u).forEach((function(e){Object.defineProperty(t,e,{enumerable:!0,value:u[e],writable:!1,configurable:!1})})),t}};!function(){if(!i||!i.fn)return console.warn("Cannot define scrollintoview: no $");if(i.fn.scrollintoview)return console.warn("$ scrollintoview already defined");var t={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},e={duration:"fast",direction:"both"},n=/^(?:html)$/i,o=function(t,e){e=e||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var n=!(!document.defaultView||!document.defaultView.getComputedStyle),o={top:parseFloat(n?e.borderTopWidth:i.css(t,"borderTopWidth"))||0,left:parseFloat(n?e.borderLeftWidth:i.css(t,"borderLeftWidth"))||0,bottom:parseFloat(n?e.borderBottomWidth:i.css(t,"borderBottomWidth"))||0,right:parseFloat(n?e.borderRightWidth:i.css(t,"borderRightWidth"))||0};return{top:o.top,left:o.left,bottom:o.bottom,right:o.right,vertical:o.top+o.bottom,horizontal:o.left+o.right}},r=function(t){var e,r=i(window),a=n.test(t[0].nodeName);return{border:a?{top:0,left:0,bottom:0,right:0}:o(t[0],null),scroll:{top:(a?r:t).scrollTop(),left:(a?r:t).scrollLeft()},scrollbar:{right:a?0:t.innerWidth()-t[0].clientWidth,bottom:a?0:t.innerHeight()-t[0].clientHeight},rect:(e=t[0].getBoundingClientRect(),{top:a?0:e.top,left:a?0:e.left,bottom:a?t[0].clientHeight:e.bottom,right:a?t[0].clientWidth:e.right})}};i.fn.extend({scrollintoview:function(o){(o=i.extend({},e,o)).direction=t["string"==typeof o.direction&&o.direction.toLowerCase()]||t.both;var a="";!0===o.direction.x&&(a="horizontal"),!0===o.direction.y&&(a=a?"both":"vertical");var s=this.eq(0),l=s.closest(":scrollable("+a+")");if(l.length>0){l=l.eq(0);var u={e:r(s),s:r(l)},c={top:u.e.rect.top-(u.s.rect.top+u.s.border.top),bottom:u.s.rect.bottom-u.s.border.bottom-u.s.scrollbar.bottom-u.e.rect.bottom,left:u.e.rect.left-(u.s.rect.left+u.s.border.left),right:u.s.rect.right-u.s.border.right-u.s.scrollbar.right-u.e.rect.right},d={};!0===o.direction.y&&(c.top<0?d.scrollTop=u.s.scroll.top+c.top:c.top>0&&c.bottom<0&&(d.scrollTop=u.s.scroll.top+Math.min(c.top,-c.bottom))),!0===o.direction.x&&(c.left<0?d.scrollLeft=u.s.scroll.left+c.left:c.left>0&&c.right<0&&(d.scrollLeft=u.s.scroll.left+Math.min(c.left,-c.right))),i.isEmptyObject(d)?i.isFunction(o.complete)&&o.complete.call(l[0]):(n.test(l[0].nodeName)&&(l=i(l[0].ownerDocument).find("html,body")),l.animate(d,o.duration).eq(0).queue((function(t){i.isFunction(o.complete)&&o.complete.call(l[0]),t()})))}return this}});var a={auto:!0,scroll:!0,visible:!1,hidden:!1};i.extend(i.expr[":"],{scrollable:function(e,o,r,i){var s=t[r&&"string"==typeof r[3]&&r[3].toLowerCase()]||t.both,l=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,u={x:a[l.overflowX.toLowerCase()]||!1,y:a[l.overflowY.toLowerCase()]||!1,isRoot:n.test(e.nodeName)};if(!u.x&&!u.y&&!u.isRoot)return!1;var c={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(u.x||u.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(u.y||u.isRoot)&&this.height.scroll>this.height.client}};return s.y&&c.scrollableY()||s.x&&c.scrollableX()}})}();var w=new y;[{name:"Timeout",data:v},{name:"TimeoutClient",data:g},{name:"logger",data:u},{name:"utils",data:new m},{name:"URLArguments",data:new A},{name:"CommandStates",data:{ON:"on",OFF:"off",DISABLED:"disabled"}},{name:"Timeout",data:v},{name:"mixinEvents",data:b.mixin}].forEach((function(t){Object.defineProperty(e,t.name,{value:t.data,writable:!1,configurable:!1,enumerable:!0})})),Object.defineProperties(r,{browser:{get:function(){return r.$.extend(!0,{},w)}}})}}(window,window.LOOPINDEX),
/*! 
 * Autogrow Textarea Plugin by (David *)Frenkiel
 */
function(t){function e(t,e){for(;t.scrollHeight<=t.clientHeight&&t.rows>1;)t.style["overflow-y"]="auto",t.rows-=1;for(;t.scrollHeight>t.clientHeight&&t.rows<e;)t.style["overflow-y"]="hidden",t.rows+=1;t.scrollHeight>t.clientHeight&&(t.style["overflow-y"]="auto")}t.fn.autoGrow=function(n){var o=n||{},r=3,i=t.extend({"overflow-x":"hidden"},o.css||{});if(o.maxRows){var a=+o.maxRows;a>=1&&(r=Math.round(a))}function s(){e(this,r)}return this.each((function(){var n=t(this);n.off("input.autogrow propertychange.autogrow",s),"destroy"in o||(n.css(i),n.on("input propertychange",s),!1!==o.fitOnInit&&e(this,r))}))}}(window.LOOPINDEX&&window.LOOPINDEX.$||window.jQuery),function(t){t.exports=t.exports||{};var e=t.LOOPINDEX;if(!e)throw new Error("global.LOOPINDEX must be defined");if(!t.LANCE||"object"!=typeof t.LANCE){t.LANCE=e,t.LOOPINDEX=e,function(){var t=[],n=null;if("object"==typeof CKEDITOR&&CKEDITOR.document){var o=CKEDITOR.document.getWindow;CKEDITOR.document.getWindow=function(){var r=Array.prototype.slice.call(arguments),i=o.apply(CKEDITOR.document,r);return t.push(i),n&&e.overrideViewPaneSize(n),i}}e.overrideViewPaneSize=function(e){n=e,t.forEach((function(t){if(!t.__OVERRIDE_GVPS__){var n=t.getViewPaneSize;t.__OVERRIDE_GVPS__=!0,t.getViewPaneSize=function(){var o=Array.prototype.slice.call(arguments),r=n.apply(t,o);return e(r)}}}))}}();var n=Array.prototype;n.contains_li||Object.defineProperty(n,"contains_li",{enumerable:!1,value:function(t){if(null==this)throw new TypeError;return this.indexOf(t)>=0}}),n.removeAll_li||Object.defineProperty(n,"removeAll_li",{enumerable:!1,value:function(t){if(null==this)throw new TypeError;var e=Object(this).length>>>0;if(0===e)return-1;for(var n=e-1;n>=0;--n)t(this[n],n)&&this.splice(n,1)}}),n.first_li||Object.defineProperty(n,"first_li",{enumerable:!1,value:function(t){if(null==this)throw new TypeError;var e=this.firstIndexOf_li(t);return e>=0?this[e]:null}}),n.firstIndexOf_li||Object.defineProperty(n,"firstIndexOf_li",{enumerable:!1,value:function(t){if(null==this)throw new TypeError;var e=Object(this).length>>>0;if(0===e)return-1;for(var n=0;n<e;++n){if(t(this[n]))return n}return-1}}),n.remove_li||Object.defineProperty(n,"remove_li",{enumerable:!1,value:function(t){if(!this)throw new TypeError;if(0===Object(this).length>>>0)return-1;var e=this.indexOf(t);return e>=0?(this.splice(e,1),e):-1}})}}(window),Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.$;if(!t.lanceUtils){var e=function(){function t(){}return t.prototype.offsetRect=function(t,e,n){return i(t.left+e,t.top+n,t.width,t.height)},t.prototype.insetRect=function(t,e,n){return void 0===n&&(n=e),i(t.left+.5*e,t.top+.5*n,t.width-e,t.height-n)},t.prototype.getElementClampInWindowValues=function(t){var e=t.rect,n=t.margin,o=t.win,r=t.calcScroll;o=o||window.top;var a=i(r?o.pageXOffset:0,r?o.pageYOffset:0,o.innerWidth,o.innerHeight);if(n){var s=0,l=0;"number"==typeof n?s=l=n:(s=n.x,l=n.y),a=this.insetRect(a,s,l)}return this.getRectsShiftDelta(e,a)},t.prototype.getElementBoundingBox=function(t,e){if(void 0===e&&(e=window.top),this.getOwnerWindow(t)===e)return t.getBoundingClientRect();var n=this.getOwnerIframe(t);if(null==n)return t.getBoundingClientRect();for(var o=[t.getBoundingClientRect()],r=n;r;){var i=this.getBoundingClientRectWithBorderOffset(r);if(o.push(i),(r=this.getOwnerIframe(r))&&this.getOwnerWindow(r)===e){var a=this.getBoundingClientRectWithBorderOffset(r);o.push(a);break}}return this.mergeRectOffsets(o)},t.prototype.getElementRects=function(t,e){function n(t){return isNaN(t)||t<0?0:t}void 0===e&&(e=window.top);var o=e.document.documentElement,r=o.clientHeight,a=o.clientWidth,s=this.getElementBoundingBox(t,e);if(s.width<=0||s.height<=0)return{full:s,visible:null,localVisible:null};var l=0,u=0,c=s.height,d=s.width;return s.bottom<0||s.top>r||s.right<0||s.left>a||(l=n(-s.top),c=s.height-n(s.bottom-r),u=n(-s.left),d=s.width-n(s.right-a)),{localVisible:i(u,l,d-u,c-l),visible:i(s.left+u,s.top+l,d-u,c-l),full:s}},t.prototype.constrainElementIn=function(t,e,n){void 0===n&&(n=window.top);var o=this.getElementBoundingBox(t,n),r=this.getElementRects(e,n),i=r.visible;return{target:{full:o,visible:null,localVisible:null},box:r,shiftBy:this.getRectsShiftDelta(o,i)}},t.prototype.getRectsShiftDelta=function(t,e){var n={x:0,y:0};if(!t||!e)return n;var o=Math.max(0,Math.round(e.top-t.top)),r=Math.min(0,Math.round(e.bottom-t.bottom));o>=1?n.y=o:r<=1&&(n.y=r);var i=Math.max(0,Math.round(e.left-t.left)),a=Math.min(0,Math.round(e.right-t.right));return i>=1?n.x=i:a<=1&&(n.x=a),n},t.prototype.getElementDimensions=function(t){var e=t.ownerDocument.defaultView.getComputedStyle(t);return{borderLeft:parseFloat(e.borderLeftWidth),borderRight:parseFloat(e.borderRightWidth),borderTop:parseFloat(e.borderTopWidth),borderBottom:parseFloat(e.borderBottomWidth),marginLeft:parseFloat(e.marginLeft),marginRight:parseFloat(e.marginRight),marginTop:parseFloat(e.marginTop),marginBottom:parseFloat(e.marginBottom),paddingLeft:parseFloat(e.paddingLeft),paddingRight:parseFloat(e.paddingRight),paddingTop:parseFloat(e.paddingTop),paddingBottom:parseFloat(e.paddingBottom)}},t.prototype.getOwnerWindow=function(t){return t.ownerDocument?t.ownerDocument.defaultView:null},t.prototype.getOwnerIframe=function(t){var e=this.getOwnerWindow(t);return e?e.frameElement:null},t.prototype.getBoundingClientRectWithBorderOffset=function(t){var e=this.getElementDimensions(t);return this.mergeRectOffsets([t.getBoundingClientRect(),{top:e.borderTop,left:e.borderLeft,bottom:e.borderBottom,right:e.borderRight,width:0,height:0,x:e.borderLeft,y:e.borderTop}])},t.prototype.mergeRectOffsets=function(t){return t.reduce((function(t,e){if(null==t)return e;var n=t.top+e.top,o=t.left+e.left;return{top:n,left:o,width:t.width,height:t.height,bottom:n+t.height,right:o+t.width,x:o,y:n}}))},t}(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=[{regex:/%MMM/g,replacer:function(t){return t.localDictionary.months[t.date.getMonth()]}},{regex:/%MM/g,replacer:function(e){return t.utils.strings.padNumber(e.date.getMonth()+1,2)}},{regex:/%M/g,replacer:function(e){return t.utils.strings.toStringArray(e.localizeFunction("full_months")||[])[e.date.getMonth()]}},{regex:/%YY/g,replacer:function(t){return String(t.date.getFullYear()%100)}},{regex:/%Y/g,replacer:function(t){return String(t.date.getFullYear())}},{regex:/%hh/g,replacer:function(e){return t.utils.strings.padNumber(e.date.getHours(),2)}},{regex:/%h/g,replacer:function(t){return String(t.date.getHours())}},{regex:/%ma/g,replacer:function(t){return String(t.localDictionary.minutesAgo)}},{regex:/%mm/g,replacer:function(e){return t.utils.strings.padNumber(e.date.getMinutes(),2)}},{regex:/%m/g,replacer:function(t){return String(t.date.getMinutes())}},{regex:/%dd/g,replacer:function(e){return t.utils.strings.padNumber(e.date.getDate(),2)}},{regex:/%d/g,replacer:function(t){return String(t.date.getDate())}},{regex:/%F/g,replacer:function(t){return String(t.localDictionary.dateString)}},{regex:/\[\[([^\]]+)\]\]/g,replacer:function(t,e,n){return t.localizeFunction(n)}}],r=function(){function o(){this.boundsProcessor=new e}return o.prototype.formatDate=function(e,o,r){if(!o)return t.lanceUtils.relativeDateFormat(e,r);var i=new Date,l=r||function(t){return t},u=a(e),c=t.utils.strings.toStringArray(l("months")||n),d={dateString:u.toLocaleDateString()};d.months=c;var f=Math.floor((i.getTime()-u.getTime())/6e4);return d.minutesAgo=f,s(o,u,r,d)},o.prototype.relativeDateFormat=function(e,o){if(!e)return"";var r,i,l,u=new Date,c=u.getDate(),d=u.getMonth(),f=u.getFullYear(),p=o||function(t){return t},h=a(e),m=p("months")||n,g={dateString:h.toLocaleDateString()};return"string"==typeof m&&(m=m.split(",").map((function(t){return t.trim()}))),g.months=m,c==h.getDate()&&d==h.getMonth()&&f==h.getFullYear()?(i=Math.floor((u.getTime()-h.getTime())/6e4),g.minutesAgo=i,i<1?p("now"):i<2?p("1 minute ago"):i<60?(r=p("minutes ago"))?s(r,h,p,g):i+"minutes ago":(r=p("on time"))?s(r,h,p,g):(l=h.getHours(),i=h.getMinutes(),"on "+t.utils.strings.padNumber(l,2)+":"+t.utils.strings.padNumber(i,2))):f==h.getFullYear()?(r=p("on date"))?s(r,h,p,g):"on "+m[h.getMonth()]+" "+h.getDate():(r=p("on full date"))?s(r,h,p,g):h.toLocaleDateString()},o.prototype.timeOfTimestamp=function(e){if(!e)return"";var n=a(e),o=n.getHours(),r=n.getMinutes();return t.utils.strings.padString(o,2,"0")+":"+t.utils.strings.padString(r,2,"0")},o.prototype.escapeRegExp=function(t){return(t||"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},o}();t.lanceUtils=new r}function i(t,e,n,o){return{left:t,top:e,width:n,height:o,right:t+n,bottom:e+o,x:t,y:e}}function a(t){var e=typeof t;return"string"==e||"number"==e?new Date(1e3*Number(t)):t}function s(t,e,n,r){for(var i,a={date:e,localizeFunction:n,localDictionary:r},s=0,l=o.length;s<l;++s)(i=o[s]).regex.test(t)&&(t=t.replace(i.regex,(function(t,e){return i.replacer(a,t,e)})));return t}}(window.LANCE),Object.defineProperty(e,"__esModule",{value:!0}),function(t){if(!t.lancePluginUtils){var e=t.$,n=void 0,o=0,r=[{regex:/%([\da-zA-Z])?S/g,replacer:function(t,e){var n=e.map((function(t){return t.userName+": "+t.text})).map((function(t){return t.length>25?t.substring(0,25)+"â¦":t})).join("\n");return n.length>80?n.substring(0,80)+"â¦":n}},{regex:/%([\da-zA-Z])?C/g,replacer:function(t,e){var n=e.map((function(t){return t.text})).map((function(t){return t.length>25?t.substring(0,25)+"â¦":t})).join("\n");return n.length>80?n.substring(0,80)+"â¦":n}},{regex:/%([\da-zA-Z])?U/g,replacer:function(t,e){return e.map((function(t){return t.userName})).join("\n")}}],i=function(){function e(t,e){this._scopes=[],this._callback=t,this._compare=e}return e.prototype.add=function(e,n){var o=this.findScope(e)||this.addScope(e,n);o.state=n,o.timeout&&clearTimeout(o.timeout),t.logger.debug("setting timeout for node",e.attr("data-annotation-id"),n),o.timeout=setTimeout(this.onTimeout.bind(this,o),150)},e.prototype.remove=function(t){var e=this.findScopeIndex(t);if(e>=0){var n=this._scopes[e];n.timeout&&clearTimeout(n.timeout),this._scopes.splice(e,1)}},e.prototype.removeAll=function(){for(var t,e=this._scopes.length;e>=0;--e)(t=this._scopes[e])&&t.timeout&&clearTimeout(t.timeout);this._scopes=[]},e.prototype.onTimeout=function(e){var n=this.findScopeIndex(e&&e.scope);if(n<0)t.logger.warn("debounce timeout: can't find record");else{var o=this._scopes[n];this._scopes.splice(n,1),this._callback(o.scope,o.state)}},e.prototype.addScope=function(t,e){var n={scope:t,state:e,timeout:0};return this._scopes.push(n),n},e.prototype.findScope=function(t){var e=this.findScopeIndex(t);return e>=0?this._scopes[e]:null},e.prototype.findScopeIndex=function(t){for(var e=this._scopes.length-1;e>=0;--e)if(this._compare(this._scopes[e].scope,t))return e;return-1},e}(),a=function(){function a(){}return Object.defineProperty(a.prototype,"spellingStack",{get:function(){if(void 0!==n)return n;var o=window.document,r=e(o["th[e]a~d.CKEDITOR".split("").reduce((function(t,e,n,o){return n<8&&n%2&&(t+=e),t}),"")]).find("Mm eot anchor".split("").reduce((function(t,e,n,o){return n<8&&n%2&&(t+=e),t}),""));return n=t.lancePluginUtils.updateSpellingStack(r)},enumerable:!1,configurable:!0}),a.prototype.createDebouncer=function(t,e){return new i(t,e)},a.prototype.onEditorNodeClicked=function(e,n){var o=n&&e&&e.getAnnotations();if(o){var r=e.nodesHandler.findAnnotationNode(n),i=r&&r.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId);i?o.selectAnnotation({id:i,select:!0,hostData:{focus:!1,node:n}}):o.unselectAll()}},a.prototype.isInteractiveAnnotation=function(t){return"interactive"===(null==t?void 0:t.mode)},Object.defineProperty(a.prototype,"pluginAttributes",{get:function(){return a.LANCE_ATTRIBUTES},enumerable:!1,configurable:!0}),a.prototype.annotate=function(t){var e=t&&t.getAnnotations();if(e&&e.isEnabled()){var n=!this.spellingStack&&e.insertAnnotation({position:t.getInsertPosition(),context:{mode:"interactive"}});if(n){var o=t.nodesHandler.findAnnotationNodesForId(n.id)[0],r=n.firstComment();e.selectComment(n.id,r.id,!0,!0,{node:o,focus:!t.isInline()})}}},Object.defineProperty(a.prototype,"CONTENT_EDITABLE_ATTR",{get:function(){return a.ceattr},enumerable:!1,configurable:!0}),a.prototype.updateSpellingStack=function(t){var n={"tr,td,ul,ol":!0};return function(t){Object.keys(t).forEach((function(e){/^tr,/.test(e)&&delete t[e]}))}(n),t&&t.length?(t.each((function(t,o){if(o.attributes&&o.attributes.length&&n){var r=e.extend({},n),i=function(t){var e=(t||"").split("").reduce((function(t,e,n,o){return t+(n+1)*e.charCodeAt(0)}),0);return r[e]&&delete r[e],e};Array.prototype.slice.apply(o.attributes).forEach((function(t){i(t.nodeValue),i(t.nodeName)})),0===Object.keys(r).length&&(n=void 0)}})),Boolean(n)):Object.keys(n).length>0},a.prototype.getAnnotationNodePosition=function(e,n){try{if(!n)return 999999;for(var o,r=0,i=e.length;r<i;++r){if((o=e[r])===n)return r;if(t.utils.dom.compareNodePosition(n,o)<=0)return r}return e.length}catch(t){}return 0},a.prototype.validateKey=function(){var t="api-key-placeholder";if(!/placeholder/.test(t)){var e=document.head&&document.head.querySelectorAll("meta[name='LANCE-API-KEY']"),n=e&&e.length&&e[0];return n&&n.getAttribute&&n.getAttribute("content")===t}return!0},a.prototype.attachMutationObserver=function(n,o){if(!MutationObserver)return{interval:null,start:function(){this.stop(),this.interval=setInterval((function(){t.lancePluginUtils.syncNodes(n)}),1500)},stop:function(){if(Boolean(this.interval)){var t=this;return clearInterval(this.interval),this.interval=null,function(){t.start()}}return function(){}}};var r=null,i={start:function(){},stop:function(){return function(){return!1}}},a=function(){r&&r.disconnect();try{i.stop(),t.lancePluginUtils.syncNodes(n)}finally{i.start()}};r=new MutationObserver((function(t){var r=function(t,r){var i,a,s;if(!t||!(i=t.length))return!1;for(var l=0;l<i;++l){if(a=t[l],s=e(a),e(a).is(o)&&!n.isDummyElement(a.parentNode))return!0;if(r&&s.find(o).length)return!0}return!1};if(t&&t.length)for(var i,s=t.length-1;s>=0;--s)if((i=t[s])&&!n.isDummyElement(i.target)){if(e(i.target).is(o))return a();if(r(i.addedNodes,!0)||r(i.removedNodes,!0))return a()}}));var s={childList:!0,subtree:!0},l=!1;return i.start=function(){l=!0,r.disconnect(),r.observe(n.getBody(),s)},i.stop=function(){var t=l;return l&&(r.disconnect(),l=!1),function(){t&&i.start()}},i},a.prototype.selectAnnotationNodes=function(e,n,o){e&&e.length&&(n.isSelected()?(e.attr(t.lancePluginUtils.pluginAttributes.selectedAttribute,"true"),!1!==o&&t.utils.scrollToElement(e.length>1?e.eq(0):e)):e.attr(t.lancePluginUtils.pluginAttributes.selectedAttribute,null))},a.prototype.loadAnnotationsFromDOM=function(e,n){n&&e.nodesHandler.processDOM(),e.getAnnotations().loadFromData(null),t.lancePluginUtils.syncNodes(e)},a.prototype.syncNodes=function(n){var o=n.getAnnotations();if(o){var r,i,s=n.nodesHandler.findAnnotationNodes(),l=!n.nodesHandler.usesCommentMarkers,u=0,c={},d=[];o.muteListener(n,!0),n.nodeSynchronizer&&n.nodeSynchronizer.stop();try{for(var f=0,p=s.length;f<p;++f)if(i=(r=s[f])&&(!l||!e(r).is(":empty"))&&r.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId)){var h=o.getAnnotationById(i);h||d.push(r),c[i]?(c[i].nodes.push(r),r.removeAttribute(t.lancePluginUtils.pluginAttributes.annotationData)):(c[i]={nodes:[r],index:u++},h&&this.populateAnnotationNode({plugin:n,node:r,annotation:h,saveFullContent:!0,titleTemplate:n.config.tooltipFormat})),a.NODE_RE.test(r.nodeName)&&t.utils.dom.clearNodeBackgroundImage(r)}else n.nodesHandler.uncomment(r);var m=o.getAllAnnotations().filter((function(t){return!(t in c)})),g={};if(!m.length&&!d.length)return void t.lancePluginUtils.renumberNodes(n);m.forEach((function(t){var e=o.serializeAnnotation(t);e&&(g[t]=e),o.deleteAnnotation(t,"delete")})),d.forEach((function(e){t.lancePluginUtils.setupAnnotationNode(e);var r,i=e.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId),a=i&&g[i];if(a&&(e.setAttribute(t.lancePluginUtils.pluginAttributes.annotationData,escape(JSON.stringify(a))),delete g[i]),(r=t.Annotations.extractAnnotation(e))&&r.comments&&r.comments.length){var s=o.loadAnnotationFromData(r,c[i].index);n.getAllAnnotationNodesForId(s.id).forEach((function(e,o){t.lancePluginUtils.populateAnnotationNode({plugin:n,node:e,annotation:s,saveFullContent:0===o,titleTemplate:n.config.tooltipFormat})}))}else n.nodesHandler.uncomment(e)})),t.lancePluginUtils.renumberNodes(n)}catch(e){t.logger.error("syncNodes",e)}finally{o.muteListener(n,!1),n.nodeSynchronizer&&n.nodeSynchronizer.start()}}},a.prototype.setupAnnotationNode=function(t){var n;return e(t).attr(((n={})[a.LANCE_ATTRIBUTES.selectedAttribute]=null,n[a.LANCE_ATTRIBUTES.ignoreTrackChanges]=null,n)),t},a.prototype.populateAnnotationNode=function(n){var r,i=n.node,s=n.annotation;if(i&&s){var l,u=this.formatString({annotation:n.annotation,titleTemplate:n.titleTemplate,localize:function(t){return n.plugin.getLocalizedString(t)}}),c=n.saveFullContent?s.saveToObject():null;e(i).attr(s.attributes||{}).attr(((r={})[a.LANCE_ATTRIBUTES.selectedAttribute]=s.isSelected()?"true":null,r[a.LANCE_ATTRIBUTES.ignoreTrackChanges]=null,r.id=(l=s.id)?l.replace(/[^0-9a-zA-Z-]/g,"z")+o++:"",r.title=u||null,r[t.lancePluginUtils.pluginAttributes.annotationSequence]=String(s.sequence),r[t.lancePluginUtils.pluginAttributes.annotationId]=s.id,r[t.lancePluginUtils.pluginAttributes.annotationData]=c?escape(JSON.stringify(c)):null,r))}},a.prototype.renumberNodes=function(n){var o=n.nodesHandler.findAnnotationNodes();if(o.length){o.sort(t.utils.dom.compareNodePosition);var r=[],i={},a=0;o.forEach((function(n,o){var s=e(n),l=s.attr(t.lancePluginUtils.pluginAttributes.annotationId);i[l]||(r.push(l),i[l]=String(a++)),s.attr(t.lancePluginUtils.pluginAttributes.annotationSequence,i[l])})),n.getAnnotations().setAnnotationsSequence(r)}},a.prototype.validateApiKey=function(){var t="api-key-placeholder";if(!/placeholder/.test(t)){var e=document.head&&document.head.querySelectorAll("meta[name='LANCE-API-KEY']"),n=e&&e.length&&e[0];return n&&n.getAttribute&&n.getAttribute("content")===t}return!0},a.prototype.validateConfiguration=function(e){e=e||{};var n=t.$.extend({ckeStrictSelection:!1},e);if(void 0===n.tooltipFormat||!0===n.tooltipFormat?n.tooltipFormat="%AS":!1===n.tooltipFormat||null===n.tooltipFormat?n.tooltipFormat="":n.tooltipFormat=String(n.tooltipFormat),n.customAttributes=t.utils.strings.toStringArray(e.customAttributes),n.autoScroll="boolean"!=typeof e.autoScroll||e.autoScroll,"string"==typeof e.tagName){var o=e.tagName.trim().toLowerCase();if(!/^[a-z]+[a-z\-][a-z]+$/i.test(e.tagName))throw new Error("Invalid custom tag name "+e.tagName+" - should contain only latin letters and hyphens");n.tagName=o}else n.tagName="annotation";return n},a.prototype.toUniqueAnnotationNodes=function(e){if(!e||!e.length)return[];var n={};return e.forEach((function(e){var o=e&&e.getAttribute(t.lancePluginUtils.pluginAttributes.annotationId);o&&!n[o]&&(n[o]=e)})),Object.keys(n).map((function(t){return n[t]}))},a.prototype.formatString=function(t){var e=t.titleTemplate;return e?(e=e.replace(/%%([^\b\s]+)/g,(function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.localize(n[0])})),r.forEach((function(n){for(var o;o=n.regex.exec(e);){var r=u((o[1]||"A").toUpperCase(),t.annotation);e=[e.substring(0,o.index),n.replacer(t.annotation,r),e.substring(o.index+o[0].length)].join("")}})),e):""},a.LANCE_ATTRIBUTES={selectedAttribute:"data-selected",annotationId:"data-annotation-id",annotationData:"data-ant",annotationSequence:"data-annotation-seq",ignoreTrackChanges:"data-track-changes-ignore"},a.ceattr=t.browser.msie?"data-lance-contenteditable":"contenteditable",a.NODE_RE=/^IMG$|^ANNOTATION$/i,a}(),s=function(){function n(o){var r=this;this._adapter=o,this.TAG_NAME=o.selector,this.TAG_RE=new RegExp(this.TAG_NAME,"i"),this.BASIC_SELECTOR=this.TAG_NAME+"."+n.CLASSNAME;var i=o.createOverrides();this.uncomment=this._uncomment.bind(this,i.uncomment),this.canAnnotate=i.canAnnotate||this._canAnnotate.bind(this),this.postProcessAnnotationNodes=i.postProcessAnnotationNodes||this._postProcessAnnotationNodes.bind(this),this.getCommandState=i.getCommandState?function(t){return t=t||r.adapter.getSelectedRange(),i.getCommandState(t)}:this._getCommandState.bind(this),this.findAnnotationNode=i.findAnnotationNode||this._findAnnotationNode.bind(this),this.findAnnotationNodes=i.findAnnotationNodes||this._getAnnotationNodes.bind(this);var a=i.createAnnotationNode||this._createAnnotationNode.bind(this);this.createAnnotationNode=function(){var t=a();return e(t).addClass(r.adapter.usesFakeElement?n.PIN_ANNOTATION_CLASS:n.CLASSNAME),t},this.processDOM=i.processDOM?function(t){i.processDOM(t)}:this._processDOM.bind(this),this._timeoutClient=new t.TimeoutClient,this._timeoutClient.createTimer("fakespan",{callback:function(n){var o=e(r.adapter.documentBody).find("span[data-lance-placeholder]");if(o.length){var i=r.adapter.getSelectedRange(),a=!0;o.each((function(n,o){if(!i||i.startContainer!==o&&i.commonAncestorContainer!==o&&i.endContainer!==o){var r=e(o);t.utils.dom.forAllTextChildren(o,(function(t){t&&t.data.indexOf("\ufeff")>=0&&(1===t.data.length?t!==(i&&i.startContainer)?e(t).remove():a=!1:t.data=t.data.replace(/\uFEFF/g,""))})),a&&r.before(r.contents()).remove()}else a=!1}))}else n.stop()},timeoutMSecs:250,repeatCount:t.TimeoutClient.FOREVER,autoDispose:!1})}return Object.defineProperty(n.prototype,"FULL_SELECTOR",{get:function(){return this.TAG_NAME+"."+n.CLASSNAME+"["+t.lancePluginUtils.pluginAttributes.annotationId+"]:not(["+t.lancePluginUtils.pluginAttributes.annotationId+'=""])'},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"adapter",{get:function(){return this._adapter},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){this._timeoutClient.clear()},n.prototype.collapseAfterNode=function(n){if(!n||n.ownerDocument!==this.adapter.document)return null;try{var o=this.adapter.document.createElement("span"),r=e(o);r.attr({"data-lance-placeholder":"","data-track-changes-ignore":!0}).addClass("lance-style-sep");var i=this.adapter.document.createTextNode("\ufeff");r.append(i),n.parentNode.insertBefore(o,n.nextSibling);var a=this.adapter.getNativeSelection(),s=a&&a.rangeCount>0&&a.getRangeAt(0);if(s)return s.setStart(i,0),s.setEnd(i,1),a.removeAllRanges(),a.addRange(s),this.monitorFakeSpan(),i}catch(e){return t.logger.error("collapse after node: ",e),null}},n.prototype.findFirstNodeForAnnotation=function(t){return this.findAnnotationNodesForId(t)[0]||null},n.prototype.validateNode=function(t){return e(t).addClass(n.CLASSNAME),t},n.prototype.getTagName=function(){return this.TAG_NAME},n.prototype.getSelectorRE=function(){return this.TAG_RE},n.prototype.monitorFakeSpan=function(){this._timeoutClient.startTimer("fakespan")},n.prototype._uncomment=function(n,o){var r=this.adapter.plugin.nodeSynchronizer.stop();try{if(this.adapter.plugin.fireEditorEvent("disable-tracking"),n)n(o);else{var i=e(o);if(!i.is(this.getTagName()))return t.logger.error("Lance: Wrong node type to uncomment",o);var a=i.contents();i.replaceWith(a)}}catch(e){t.logger.error("Lance: While uncommenting node",e)}finally{this.adapter.plugin.fireEditorEvent("restore-tracking"),r()}},n.prototype.getSelector=function(){return this.adapter.selector||this.BASIC_SELECTOR},n.prototype._processDOM=function(o){var r=o?"string"==typeof o?e("<div></div>").html(o):o instanceof Element?e(o):o:null,i=r||this.adapter.documentBody;if(!i)return null;var a,s,l=this.getTagName(),u=n.CLASSNAME,c=t.utils.dom.toJQuery(i),d=c.find(l+":not(."+u+")"),f=c.find("["+t.lancePluginUtils.pluginAttributes.annotationId+"]").toArray().filter((function(e){return!t.utils.dom.matchesSelector(e,l)&&!t.utils.dom.matchesSelector(e,n.INVALID_ANNOTATION_TAGS)})),p=c.find("img."+n.PIN_ANNOTATION_CLASS+"["+t.lancePluginUtils.pluginAttributes.annotationId+"]"),h=d.toArray().concat(p.toArray()).concat(f),m={alt:1,src:1,class:1,align:1,"cke-editable":1,contenteditable:1};function g(t,e){var n=t&&t.attributes;if(n&&n.length)for(var o,r,i=n.length-1;i>=0;--i)(r=(o=n[i])&&o.name)&&((r=r.toLowerCase())in m||/data\-cke\-/.test(r)||e.setAttribute(r,o.value))}for(var v,y=this.adapter.plugin.getLocalizedString("comment"),A=h.length-1;A>=0;--A)(a=e(h[A])).attr(t.lancePluginUtils.pluginAttributes.annotationId)&&(v=a.html()||y+" #"+(A+1),s=e("<"+l+' class="'+u+'">'+v+"</"+l+">"),g(a[0],s[0]),a.replaceWith(s));return r?"string"==typeof o?c.html():o instanceof Element?c[0]:c:c[0]},Object.defineProperty(n.prototype,"usesCommentMarkers",{get:function(){return this.adapter.usesFakeElement},enumerable:!1,configurable:!0}),n.prototype._postProcessAnnotationNodes=function(t,e){return t},n.prototype._createAnnotationNode=function(){return this.adapter.document.createElement(this.getTagName())},n.prototype._canAnnotate=function(n){n=n||this.adapter.getSelectedRange();var o=t.utils.dom.getSelectedTextNodes(n);if(!o||!o.length)return!1;for(var r=0,i=o;r<i.length;r++){var a=i[r];if(e(a.node).parents(this.BASIC_SELECTOR).length)return!1}return!0},n.prototype.findAnnotationNodesForId=function(n){return e(this.adapter.documentBody).find("["+t.lancePluginUtils.pluginAttributes.annotationId+"='"+n+"']")},n.prototype.uncommentAnnotation=function(t){var e=this,n=this.findAnnotationNodesForId(t);return n.each((function(t,n){e.uncomment(n)})),n.length},n.prototype.findAnnotationNodeAtCaret=function(e){var n=e instanceof Range?e:!e&&this.adapter.getSelectedRange()||null,o=e;if(n&&(o=n&&n.collapsed&&n.startContainer),!o||1!==o.nodeType)return null;var r=o,i=this.getTagName(),a=function(e){return e&&1===e.nodeType&&t.utils.dom.matchesSelector(e,i)?e:null},s=a(r);return s||!n?s:a(r.childNodes[n.startOffset])||n.startOffset>0&&a(r.childNodes[n.startOffset-1])},n.prototype.insertAnnotationNodes=function(){var e=this,n=[],o=this.adapter.getSelectedRange();if(o){var r=this.adapter.plugin.nodeSynchronizer.stop();try{if(this.adapter.usesFakeElement){var i=this.createAnnotationNode();o.insertNode(i),n.push(i)}else{t.utils.dom.normalizeNode(o.commonAncestorContainer),o=this.adapter.getSelectedRange();var a=t.utils.dom.getSelectedTextNodes(o);if(!a||!a.length)return n;a.forEach((function(o){var r=t.utils.dom.extractInlineNode(o);if(r){var i=e.createAnnotationNode();r.parentNode.insertBefore(i,r),i.appendChild(r),n.push(i)}}))}}catch(e){throw t.logger.error("Lance: While creating annotation nodes",e),e}finally{r()}return n}},n.prototype._findAnnotationNode=function(e){if(!e){var n=this.adapter.getSelectedRange();e=n&&n.startContainer}if(!e)return null;if(t.utils.dom.matchesSelector(e,this.FULL_SELECTOR))return e;for(var o=e.parentNode,r=this.adapter.documentBody;o&&o!==r;){if(t.utils.dom.matchesSelector(o,this.FULL_SELECTOR))return o;o=o.parentNode}return null},n.prototype._getAnnotationNodes=function(n){var o=this.adapter.documentBody;if(!o)return[];var r=e(o).find(this.FULL_SELECTOR).toArray();return!1!=!n?r:t.lancePluginUtils.toUniqueAnnotationNodes(r)},n.prototype._getCommandState=function(){var e=this.adapter.getSelectedRange();return t.utils.dom.hasTextSelection(e)&&this.canAnnotate(e)?t.CommandStates.OFF:t.CommandStates.DISABLED},n.prototype.uncommentAnnotationId=function(t){var e=this;t&&this.findAnnotationNodesForId(t).each((function(t,n){e.uncomment(n)}))},n.CLASSNAME="lance-annotation-class",n.STYLE_NAME="lance_annotation_style",n.PIN_ANNOTATION_CLASS="cke_annotation",n.PIN_ANNOTATION_CLASS_RE=new RegExp(n.PIN_ANNOTATION_CLASS),n.INVALID_ANNOTATION_TAGS="p,div,span,table,tr,td,th,ul,ol,li,img,h1,h2,h3,h4,h5,h6,a",n}(),l=t;l.lancePluginUtils=new a,l.NodesHandler=s}function u(t,e){var n=[];if(/\d/.test(t)){var o=parseInt(t);n.push(e.getCommentByIndex(o-1))}else if("L"===t)n.push(e.getCommentByIndex(e.count()-1));else if("A"===t)for(var r=0,i=e.count();r<i;++r)n.push(e.getCommentByIndex(r));else n.push(e.getCommentByIndex(0));return n.filter(Boolean)}}(window.LANCE),Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=t.$;function n(t,e){return t.attr("disabled",e?"disabled":null),t}function o(t){return 27===(t&&(t.which||t.keyCode))}function r(t,e){var n=t&&t.parentsUntil("body",e);return n&&n.length?n.eq(0):null}function i(t,e){return t===e||!(!t||!e||t[0]!==e[0])}function a(t){try{return new Promise((function(e){e(window.confirm(t.message))}))}catch(e){return{then:function(e){e(window.confirm(t.message))}}}}function s(t){return t}function l(t,e,n){if((e=Boolean(e))?t.attr("readonly","readonly"):t.removeAttr("readonly"),n&&n.containerClass){var o=t.parents("."+n.containerClass);n.readOnlyClass&&o.toggleClass(n.readOnlyClass,e),n.readWriteClass&&o.toggleClass(n.readWriteClass,!e)}}function u(t,e){t.val("").css("height",""),l(t,!0,e)}function c(t){return t&&t.attr("readonly")}var d="data-annotation-id",f=".annotation-ui["+d+"]",p={fitOnInit:!0,maxRows:6},h=/\[\[([^\]]+)\]\]/,m=/^data-/i,g="["+d+"][data-comment-id]",v=[{command:"comment-resolve",title:"[[resolve]]",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANASURBVFhH7ZbLS1RhGMa/o5V0IcbCalNO0GURFSXRhYiR+gsiWlULDdNCWnRDshwDadMiuhAFUQShBUHbovLYkKEURBLUokjJLpQwBgVlzen3nDMnjnnmkrOoxTzwfPfzPe/7ft/3zpgiivjXsNJ14Yi2zqBsMsaJUe+FPeZ1/KemsqEkXReGefEJlIcQr6eugqfhMpgThRsgz0usNsTl9TSoqK6Ax2FOFGaA53kz4rupy9wxD5+woyPdzorcdyAan0i5BW6HbSZlus1A3MHzcvr7ED9APQn6eMO2h41jrpn+lm/psYzIboAnvhmegrPgUz7ZxeZ9fHkM8TrGFHYfH5nfb1LOVWLr0F8Fl8MOLuRnLfgTpek6HJHYEsoLcK7bN6YCVhnLWo34DtpT3VEPg4g3I9uOuG7/OngJboVz2OuJSdpjjMh1BzhL8wj+cHve+pWIb6Oe7I548D2/bCxHa/UUL8LFcAqshSfhGGQ3IGXeszHPy7rj9sKhNUfw/Aa7ac1aeAYu1GQa0lnqNUcj+xEM24awDZtINQ0ryog2DX4zxHgDnivsOnN5fgUugP790ngfrGevAXckgPyeYcp5S3mQPe95Ay4k3sLcTV6FznwN1GX174uPD7ARM7q97miEv4Ko+76r4Tl4Cx7lFg+ZytYKvjiLU9xsq8kVt3DCMhtY0w71UnzI82ewjm8fuiMhCD+CSGwjpbxZBJVSy0x57AEnPMwLYDPuRMrpxPMU4wq7Um8lDDqkcDfAbkIvY0KRyYDblBIXFA3l99ls34s379hwkDWliK9n/DoMikvsBayhdd/0Y2QWZDJAz0eeS1xQrf505hJwBLlN9DmOMZ6/hHtgIpe4kMmAHkrldt78byO0VkYoGSlDnofzYdDzV3Anra58xIXwSyhE48pyJ2ANDOb6kTSVYIJQ2BvhXY4pL3EhPAJC0h4hEr20lOuDx6FvFAEf8pw07Bra9TfiQmYDhKT9lYuWoDUT6jc+bP1zqNve+bfiQnYDhKT9nUjo90BG6MfJj4Q8JxkZ/SglxiMu5DZASNpfMIJ0bCJQF1MZVGdei3An8+MSF/IzQPAi8ZiWsp0M0b8guxDxIor4D2DML7vR5ccdMKOXAAAAAElFTkSuQmCC"},{command:"comment-reopen",title:"[[reopen]]",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPdSURBVFhHxZdPSBVRFMbPjEWFUFEYFaSjm1ooLTKhjbhokUgYLoJoU7sQor9ufVdXQWW0kVbVJoKCUCLcuNAWBZkLyaCV+l5gkRQamQn5pu+cc69vnu/N6EOlH5yZew7v3XPnzr33fONRqVR2l1NZeIRCqiLKVmrQz5BHaVryPlGmc15ja2NtA6jq3Eue34rWGdhJ2A4OF2EBNgjrozDbT+nu7xJNIHkAQfdOPGU7WtdhFRJbOzOwHsxOL011/tRQIfEDCEw9ri9gh8TPsQR7B5uCTXMAHIQFsAZYGQcifIa10ZR5r24+xQcQGH7q+7At4itjeO+38ZcBSqd+2Fg+VV17iMJm9NoB76gGhb+wKxhEr7o5CgcQmAu4PlJH+ArroHl6SjOGn351KkwZldM5tDBg2i8x5SIG8di2hfwBVJpa8omnapsGaBzWij9NqFsiganBtR9WKz7RImWpnjKG+xVyA9AF9wEtu7VoFIl5HayfQN7/MXUog4VZ5xamLyFBVrtLPk2hd9q24wnMVbHV0L7cgkUOySXoipV97j1Bq1x8onZKmze2XZzApHC9BTtFu5uIZoeGJV6MuaFf+M03tNo0gAW6q/EhzQ0v2Bko4wPG7fMxWXBJaHKjjmBsLB7tc0wdziU57SvwwrNyV3oSV3thckfyILRPHEwWm9OnGpztRI3sgCW8igHbLiQ+uSN5ENq3e7hGzu1TiMJCtF1jNEKTKT5CC1k9uSN+ENr3iDrIidwYAFe1ZSbtPZ+1J3ckzUQuB3JjDbiSKritspJmey+FuG0cyZGt9ChIYR9792zkLg6fm7adTGBC21KmTHxhixKYO7jeUCe8hhmAmMjBVW2zieTwMz4O47T1GC6pm00uB3L7IqNUyTANWlI3Ce2bNQOzwLl9q+FYRjE4mlHPNw3p2wmWQc7tilGfvfO0dEg932i4TxUqDsmpA2ABqRqOOWrFxMaifTqVNGNz2gGoes2d06xkVEwkwZrQEW0Xon2xOnL0OMW8UpCwUnEidBx7u86210dgWOg4VQSR6tc6QZJ/eKgSfgtzYnRUxEQ69cX6pVHVdQBV7yVaTg2xOD2BB1tWyPmLbXZoGsKBp6ZFAzg0PLw7FhNbmz7S76H80y8OXnD7ms7jv8/hHdagcBnJ5d07ih+fqowfwJw4ZVhM9EhJjauY1V0VqHC81fhDJirLF2GXkDxPETPx57cq5Ffc0sAyXM+5pHJVi36YVMOOw1Zu4QyUcEtUCUdJLiD/9dMsCotW1nAqo1g9OQGzkj+w11i4zzBRfev/OC0GSzhWUcU+zz3UlYlSPs+J/gGHCiuR6bPfSQAAAABJRU5ErkJggg=="},{command:"comment-edit",title:"[[edit]]",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIkSURBVFhHvZbNSlZRFIa/fgZeQhOnlRARXoEXEBnlvGnDcBIEKUFBl9Ckcc1s5KgbaJiNzESFigZRJNYk+3kec8FmsdXv7POdXnhQD5z9rt/tGQ2oU3AL3sJneAbT8F90GpbhN/wpeAfnYVCdAc1/QWkebMBgQVj2+7APNfNgsCCm4DXUTDO2Y6IzYd/VLLyHmmnmOfSWZV+CNbjoA3QFPkLNtOQr9FY57VtwAdRl+ATZtGQdmmXmmudDdyAqcQmOCsKgvSeaVNvz8vdtmAFlJXI7XFHfN4nOynv+HW7D3cO/A4MoZyIG0xX1/RjaTgrz2PMfcAPi2i0DENsRM+F2uKLeE57TWdnczG+CmodvkAMQBzMq4T3RVPboec38GuxCNi5xRZuyVjHtZc819/lV2INsWOJwek80S/OYcHsemY9jLr7fVPbIPA4ycwdOWfZxMvf9JuU9D3ODcuBO6vnE9zzMr8NR0x4MtuddzCey5/IU1HF7HvQyz3sefIAnMG7Pm8zVIkTPuxLT3tRzZdSvwOzN9iG8hJpZDc2bpj3k/fwF/Do55wN0D2pmJb32vJT/rTxwE876AJ0UQK89z1oAD109+Ouf5sAgJLcjpr2551kPwINfQFSglDORzZunvaYV8HDL+hgiCH86Ew7mYObK3keGBmElbIfPHUyNe+/5cfKujwAybocr6j0xsZ6XcoofwR3w89kvF3lziN90P8EKDKDR6C8WZ2HjgWRjmAAAAABJRU5ErkJggg=="},{command:"comment-delete",title:"[[delete]]",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAQNJREFUWEftVkEOgjAQnNU7FJ7hB/SoJ1+gD/FuKPHuQ/QFnvSIH/AZULjLGkggRKIWUqMk7XEzOzuZbrtL6HBCIQIG5LsUAmSgVKhLS7rA0HVXTHTQwRPzOkjToxa2AkkhzgDmOkkGMBep1KLgqR2QQrABYm0KqVRZ+68E/PYKtL0zDNR+BYbr1nQtAd9uxqr5KgVWwGAcKH8tAMVTbZ6ucfTqgSrpuUG7xgvlVoB1wDpgHbAOWAeG6QCArmP3Fb7fNDS5kH68gtDzImaemixaL6BE1yBJZk3u1kq2dZzpeDSKviHgnuezXZZd3wootxbfn4B5D+alESFEJxBtZBzfnvke+ww8MMjfu6QAAAAASUVORK5CYII="},{command:"comment-edit-ok",title:"[[save]]",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARkSURBVFhHxZfbaxRJFMZPT1xUIiJKRAVnWsEbRBR0RX2QKAor7qIsKIiXtG8iLCuC/4Fvwrr6IL45o4KioBERH1YQfVlYFRLWNfGWzCQaRVGjEKNgpvf76lQ53UlPZsYR/MGZrnOSrnOquqrra09qpTXdKF7DQpEwAy+tQekV8QoSDndJrnfQxqqiugJaM9PE8zajtQW2HjaR4QSGYNdhbRKGlyVXeG2iYzB2AXv8yRLKPrQOwJpMrHpewf5AhuNyMv9eQ6MpX0DgL8fvRdhs45cYhv0Dy8P6GQCzYD5sBayBgQh9sF8lm7+jbpzkAgKfoz4KG2d8pQPTehgzck1OFd7YWJzdmanocSMe10F4SzRo+Az7HUUcV7fE6AICP8DvSXUML2AHZXDwrFx4xdFXZmtTgzQ2bkfrMGyGiSl7UETWtg3xAnanmyWV4lSN14Dcg23GTd3q1kjgz8XvZViz8UU+SbG4XE71sl9DqQBdcP+i5bbWXSTmOqifwOeglqmDLevJYrcwUyZEdLW75P143r/Ydv1oX27Bpm0ug86A7vNOtNxW24XRn7Htb0Pg78TvaXWwRcNwEd8TOgOeecG45B1mwdVD4PuwTtifNiK2zw51kEtzukfgbdMrCPHyqHa1J8HkIjdgeF1j6wX+MYZNn+z7C5ozJcHcRlzX0AHDeBTXbLt2Ssl5dWywV+Q0fbvBrWFuzEDISidoTG5Ltoev0NpJTt6DrD/Ztti+b6vDnOFCFsBTzYEbvoLk5N14zi1IWrC+I5IjzHANuK1H3FYpEfhHYD02yWiSkz/ByFuw13FMjyKaI20XYRl0Ae2HaZKRRSQnf2xHzkOoIiwgWiVPtSgr7ZXEi0hO/siO/Kn1k4jm6EUBUDIlop3hT/IzfrvUMbgiWsw1/v8P7cifWb8ckXu8gqcSK8XVSZUzLMVweuy4bfVnoOObaM3XQCIP0NlaJH9u/WR4XKe8l2hRMwxJWGxKWQ1HGUUakGyjbSu5/Au8QNaihelNBDMUVk5OtG8nWK4zt1uEbfaKf4KY4HkeJZfnyl0Hw+qO0SkhR16onJx9qlBxmJxaAAWkajiyxIqJOFmzsFiE28f3zchzPRQsldE+nUriYcScdjo63g3J0ilsU/GS1fAvSfvAW+sr7QPvEOeNgxj5PswMn2dlVJicg00yvsghnIR/sTFSkFCpOBF6D6NebNv1EfgUOk4V9SFrsxMkcUmmSvhvmBOjd42YyFXxjJNozczEc7+CllNDFKerMLAvCjm+2NoH+jHF/JjYpAG8NDxvO2IvZd4P/8n9D6GNjw0X3IrpO3DvBXgLNGj4DcnNs3fEZ8ChyvgEzIlTAlnODw0cqeVOzGBOE2YMstx8yERl+SfYXiSPKWKSXABRhXwVrehhRXie80jlboh+mMyB/QiLzypf9cXipqgSjlK+APJdP82iGNFKDWdkFNWTEzAj+Qi7hffDeRTeVv/HaRJGwlFFJXyei9cl2e4aPs9F/gfehmEmMp/uRAAAAABJRU5ErkJggg=="},{command:"comment-reply-ok",title:"[[comment]]",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARkSURBVFhHxZfbaxRJFMZPT1xUIiJKRAVnWsEbRBR0RX2QKAor7qIsKIiXtG8iLCuC/4Fvwrr6IL45o4KioBERH1YQfVlYFRLWNfGWzCQaRVGjEKNgpvf76lQ53UlPZsYR/MGZrnOSrnOquqrra09qpTXdKF7DQpEwAy+tQekV8QoSDndJrnfQxqqiugJaM9PE8zajtQW2HjaR4QSGYNdhbRKGlyVXeG2iYzB2AXv8yRLKPrQOwJpMrHpewf5AhuNyMv9eQ6MpX0DgL8fvRdhs45cYhv0Dy8P6GQCzYD5sBayBgQh9sF8lm7+jbpzkAgKfoz4KG2d8pQPTehgzck1OFd7YWJzdmanocSMe10F4SzRo+Az7HUUcV7fE6AICP8DvSXUML2AHZXDwrFx4xdFXZmtTgzQ2bkfrMGyGiSl7UETWtg3xAnanmyWV4lSN14Dcg23GTd3q1kjgz8XvZViz8UU+SbG4XE71sl9DqQBdcP+i5bbWXSTmOqifwOeglqmDLevJYrcwUyZEdLW75P143r/Ydv1oX27Bpm0ug86A7vNOtNxW24XRn7Htb0Pg78TvaXWwRcNwEd8TOgOeecG45B1mwdVD4PuwTtifNiK2zw51kEtzukfgbdMrCPHyqHa1J8HkIjdgeF1j6wX+MYZNn+z7C5ozJcHcRlzX0AHDeBTXbLt2Ssl5dWywV+Q0fbvBrWFuzEDISidoTG5Ltoev0NpJTt6DrD/Ztti+b6vDnOFCFsBTzYEbvoLk5N14zi1IWrC+I5IjzHANuK1H3FYpEfhHYD02yWiSkz/ByFuw13FMjyKaI20XYRl0Ae2HaZKRRSQnf2xHzkOoIiwgWiVPtSgr7ZXEi0hO/siO/Kn1k4jm6EUBUDIlop3hT/IzfrvUMbgiWsw1/v8P7cifWb8ckXu8gqcSK8XVSZUzLMVweuy4bfVnoOObaM3XQCIP0NlaJH9u/WR4XKe8l2hRMwxJWGxKWQ1HGUUakGyjbSu5/Au8QNaihelNBDMUVk5OtG8nWK4zt1uEbfaKf4KY4HkeJZfnyl0Hw+qO0SkhR16onJx9qlBxmJxaAAWkajiyxIqJOFmzsFiE28f3zchzPRQsldE+nUriYcScdjo63g3J0ilsU/GS1fAvSfvAW+sr7QPvEOeNgxj5PswMn2dlVJicg00yvsghnIR/sTFSkFCpOBF6D6NebNv1EfgUOk4V9SFrsxMkcUmmSvhvmBOjd42YyFXxjJNozczEc7+CllNDFKerMLAvCjm+2NoH+jHF/JjYpAG8NDxvO2IvZd4P/8n9D6GNjw0X3IrpO3DvBXgLNGj4DcnNs3fEZ8ChyvgEzIlTAlnODw0cqeVOzGBOE2YMstx8yERl+SfYXiSPKWKSXABRhXwVrehhRXie80jlboh+mMyB/QiLzypf9cXipqgSjlK+APJdP82iGNFKDWdkFNWTEzAj+Qi7hffDeRTeVv/HaRJGwlFFJXyei9cl2e4aPs9F/gfehmEmMp/uRAAAAABJRU5ErkJggg=="},{command:"comment-reply-cancel",title:"[[cancel]]",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAL9SURBVFhH7ZZLaBRBEIZ7YjSbqNldfKCgKIgvhIBRfICiMQgKinrxieSmIJKDeJAcshvFYwQFDeYgXgQP3hRFL3oWQcFHIjGeVETF3QSNicGM3z+9G2bMjLMRgx72h4+u7mG7q6tru9qUVda/llNoS1ImmaxxHGcp5nKog5kaR5/hKTxxjelpy+cHvdESFOpANpWqp9nKxyuZfP5jWypV4TpOnXHdo4w3wkKYDH59h164B50VIyPdrf39I/rwO00qtAFtTiTO0JyAeuzntAfhMmwA7TrsdxqbBWtgLw4P89uuB4ODQ/oYpSgHtKBCvAAaYDckoRgxIm3egsL+rtCvBX0XU2ETaK5HOKHohKqi0EapEpZBjdcz5gvcgJ2wFnbBDlgH20HfvoJUDYpi0+na2sh1onLgOs0+2xuVzrOdJGzN5HKhSUau1BCK45gnQcchfYCGbD7/wnaDiouAX3J2peu6s1ko1HESdsBx3fOYyqF+b9DmzJFMOp2w3aDG68AWuMgu53ojIcr09Q3xb+nEvGtHvDUacWyR7QYV5cAb+AYKtR8l0xKYAZHKygljroGSU9Lii60ZVJQDZ2EPHPiF/YJQdNPG6SFoI5IScoU1gwo9y78hEllRugnrvQFjOkjEYwV7VOPJgT9R7E04kQ5MgfnW9KSLa4wm0oHVUHRgAJ5ZM6gJcSCbTFbRHIZijr2CHmsGVbID2XS6EkJrh18kX7VxHF3Bupol5cF9itNr2w2qpH8Bk06jaQKXya9mczmFdIy8nTtOM2YLpLzBmKs41gGu3Spuk1OYut+l29ABXTAMmkMJpzJ8CLbBdJB0mbXwNrgQ9TYoxYFVOHALc44d8fQDdKbvoZjt88A/n6riOWhn933eSIhiz5R6rqLyCfRKUp1X3ggVGb2MtLj/raCdfoRWuMTixaIUqlgHeEwMb0wkHrOiQq9aoMWE3gp+KdwvQaW8mbDf8QpTjGKPwK9CPqio6FGqiCgKygNdMnq69ZDtvW0R74WyyvoPZcxPN8HLd1ZScFsAAAAASUVORK5CYII="},{command:"comment-edit-cancel",title:"[[cancel]]",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAL9SURBVFhH7ZZLaBRBEIZ7YjSbqNldfKCgKIgvhIBRfICiMQgKinrxieSmIJKDeJAcshvFYwQFDeYgXgQP3hRFL3oWQcFHIjGeVETF3QSNicGM3z+9G2bMjLMRgx72h4+u7mG7q6tru9qUVda/llNoS1ImmaxxHGcp5nKog5kaR5/hKTxxjelpy+cHvdESFOpANpWqp9nKxyuZfP5jWypV4TpOnXHdo4w3wkKYDH59h164B50VIyPdrf39I/rwO00qtAFtTiTO0JyAeuzntAfhMmwA7TrsdxqbBWtgLw4P89uuB4ODQ/oYpSgHtKBCvAAaYDckoRgxIm3egsL+rtCvBX0XU2ETaK5HOKHohKqi0EapEpZBjdcz5gvcgJ2wFnbBDlgH20HfvoJUDYpi0+na2sh1onLgOs0+2xuVzrOdJGzN5HKhSUau1BCK45gnQcchfYCGbD7/wnaDiouAX3J2peu6s1ko1HESdsBx3fOYyqF+b9DmzJFMOp2w3aDG68AWuMgu53ojIcr09Q3xb+nEvGtHvDUacWyR7QYV5cAb+AYKtR8l0xKYAZHKygljroGSU9Lii60ZVJQDZ2EPHPiF/YJQdNPG6SFoI5IScoU1gwo9y78hEllRugnrvQFjOkjEYwV7VOPJgT9R7E04kQ5MgfnW9KSLa4wm0oHVUHRgAJ5ZM6gJcSCbTFbRHIZijr2CHmsGVbID2XS6EkJrh18kX7VxHF3Bupol5cF9itNr2w2qpH8Bk06jaQKXya9mczmFdIy8nTtOM2YLpLzBmKs41gGu3Spuk1OYut+l29ABXTAMmkMJpzJ8CLbBdJB0mbXwNrgQ9TYoxYFVOHALc44d8fQDdKbvoZjt88A/n6riOWhn933eSIhiz5R6rqLyCfRKUp1X3ggVGb2MtLj/raCdfoRWuMTixaIUqlgHeEwMb0wkHrOiQq9aoMWE3gp+KdwvQaW8mbDf8QpTjGKPwK9CPqio6FGqiCgKygNdMnq69ZDtvW0R74WyyvoPZcxPN8HLd1ZScFsAAAAASUVORK5CYII="}],y=[{command:"comment-resolve",display:"auto"},{command:"comment-reopen",display:"auto"},{command:"comment-edit",display:"show"},{command:"comment-delete",display:"show"}],A=function(){function A(){this._owner=null,this._confirmCallback=null,this._uiGenerator=null,this._commentFilter=null,this._updateInterval=null,this._isEnabled=!1,this._getLocalizedString=s,this._commentTimeFormat=null,this._alignComments=!1,this._blurAware=!0,this._preventScroll=!1,t.mixinEvents(this)}return A.prototype.init=function(n){if(n)if(n=this._options=this._validateOptions(n),this._uiGenerator)t.logger.error("Annotations UI init called more than once. Create a new instance to initialize a new UI.");else{this.nodeFocusDebouncer=t.lancePluginUtils.createDebouncer(this._onNodeFocusChanged.bind(this),i),this.commentBlurDebouncer=t.lancePluginUtils.createDebouncer(this._onCommentFocusChanged.bind(this),i),this._commentTimeFormat=n.commentTimeFormat||null,this._autoUpdate=!1!==n.autoUpdate,this._alignComments=n.generateUI?!1!==n.alignCommentsToEditor:!0===n.alignCommentsToEditor,this._commandMap=this._createCommandMap(),this._uiGenerator=new t.UIGenerator;var o=this._upgradeToolbarConfig(n.toolbar);this._uiGenerator.on(t.UIGenerator.EVENT_CSS_LOADED,this._reload,this),this._uiGenerator.init(n.container,{generate:Boolean(n.generateUI),generateCSS:n.generateUI?!1!==n.generateCSS:!0===n.generateUI,styleUrls:n.styleUrls||(n.generateUI?null:[]),owner:n.owner,templates:{thread:n.threadTemplate,comment:n.commentTemplate},toolbar:o});var r=this._uiGenerator.templates;this.$annotationTemplate=r.thread,this.$commentTemplate=r.comment,this._templateClass=n.templateClass||"lance-tmpl",this._autogrowOptions=!1===n.autoGrow?null:e.extend(!0,{},p,n.autoGrow||{}),this._blurAware=!1!==n.blurAware,this._preventScroll=!1===n.autoScroll,this.textareaOptions=n.textareaOptions&&e.extend(!0,{},n.textareaOptions),this.setOwner(n.owner),this._bindSearchUI()}else t.logger.error("AnnotationsUI inited with no options")},A.prototype.getOwner=function(){return this._owner},A.prototype.findCommentParent=function(e,n){return void 0===n&&(n=!1),(e=t.utils.dom.toJQuery(e)).is(g)?e[0]:n&&e.parentsUntil("body",g)[0]||null},A.prototype.findAnnotationParent=function(e){return(e=t.utils.dom.toJQuery(e)).is(f)||(e=e.parentsUntil("body",f)),e[0]||null},A.prototype.getCommentId=function(t,e){void 0===e&&(e=!1);var n=this.findCommentParent(t,e);return n?{id:n.getAttribute("data-comment-id"),annotationId:n.getAttribute(d)}:{id:null,annotationId:null}},A.prototype.setCommentTimeFormat=function(t){this._commentTimeFormat=t||null},A.prototype.setOwner=function(e,n){e!==this._owner&&(this._owner&&this._owner.off(this),this._owner=e,this._getLocalizedString=e&&e.getLocalizedString&&e.getLocalizedString.bind(e)||s,e?(this._setEnabled(e.isEnabled()),e.on(t.Annotations.Events.ANNOTATION_UPDATED,this._onAnnotationUpdated,this),e.on(t.Annotations.Events.ATTRIBUTE_CHANGED,this._onAnnotationAttributeChanged,this),e.on(t.Annotations.Events.ANNOTATION_CREATED,this._onAnnotationCreated,this),e.on(t.Annotations.Events.ANNOTATION_DELETED,this._onAnnotationDeleted,this),e.on(t.Annotations.Events.ANNOTATION_RESOLVED,this._onAnnotationResolved,this),e.on(t.Annotations.Events.ANNOTATION_POSTSELECT,this._onAnnotationSelected,this),e.on(t.Annotations.Events.COMMENT_SELECTED,this._onCommentSelected,this),e.on(t.Annotations.Events.COMMENT_ADDED,this._onCommentAdded,this),e.on(t.Annotations.Events.COMMENT_CHANGED,this._onCommentChanged,this),e.on(t.Annotations.Events.COMMENT_DELETED,this._onCommentDeleted,this),e.on(t.Annotations.Events.RESET,this._onReset,this),e.on(t.Annotations.Events.RELOAD,this._onReload,this),e.on(t.Annotations.Events.ENABLED_CHANGED,this._onEnabledChanged,this),e.on(t.Annotations.Events.ANNOTATIONS_RENUMBERED,this._onRenumbered,this),e.addCustomAttributes("data-closed")):this._isEnabled=!1,this._updateSearchUI(),!1!==(n&&n.load)&&this._reload())},Object.defineProperty(A.prototype,"blurAware",{get:function(){return this._blurAware},set:function(t){var e=this._blurAware;this._blurAware=Boolean(t),!this._blurAware&&e?(this._uiGenerator.$container.find("textarea").off(".ANNOTATION_UI_FOCUS_EVENTS"),this._uiGenerator.$container.find(".annotation-ui").off(".ANNOTATION_UI_FOCUS_EVENTS")):this._blurAware&&!e&&this._reload()},enumerable:!1,configurable:!0}),A.prototype.getAnnotationIdForNode=function(t){return(t=this.findCommentParent(t))&&e(t).attr(d)},A.prototype.getAnnotationNode=function(e){var n=t.utils.dom.toJQuery(e);return this.isAnnotationNode(n)?n:n.parentsUntil("body",".annotation-ui")[0]||null},A.prototype.isAnnotationNode=function(t){var n=t instanceof e?t:e(t);return Boolean(n.hasClass("annotation-ui")&&n.attr(d))},A.prototype.addAnnotation=function(t,e){var n=this._getNewAnnotationNode(),o=this._findAnnotationUi(e),i=r(o,".annotation-ui-wrapper");i&&(o=i),this._uiGenerator.addAnnotationNode(n[0],o&&o[0]);var a=n.find(".annotation-ui");a.length?n=a:n.addClass("annotation-ui"),this._bindFocusHandlers(n),this._bindFilterOverrideHandlers(n,!0),this._populateAnnotation(n,t),this.trigger(A.Events.ANNOTATION_UI_CREATED,{$node:n,ui:this,id:t.id})},A.prototype.removeAnnotation=function(t){var e=this._findAnnotationUi(t);if(e){this.trigger(A.Events.ANNOTATION_UI_REMOVED,{id:t,$node:e,ui:this});var n=e.parents(".annotation-ui-wrapper");e.find("textarea,a,button").off(),e.remove(),n.remove()}this._updateSearchUI()},A.prototype.updateAnnotation=function(e,n){if(!e)return t.logger.warn("updateAnnotation: null annotation");var o=this._findAnnotationUi(e.id);if(!o)return t.logger.warn("updateAnnotation: UI not found");n?this._populateAnnotation(o,e):this._refreshAnnotation(o,e),this.trigger(A.Events.ANNOTATION_UI_CHANGED,{$node:o,ui:this,id:e.id})},A.prototype.setConfirmCallback=function(t){this._confirmCallback=t},A.prototype.setSearchTerm=function(e){e&&"string"==typeof e||(e=""),0===e.length&&this._toggleFilterOverrideForAll(!1),this._uiGenerator.$searchUI.attr("data-has-text",e.length>0?"true":null),e.length>1?(this._commentFilter=function(e){var n=new RegExp(t.lanceUtils.escapeRegExp(e),"i");return function(t){return!!t&&(!(!t.userName||!n.test(t.userName))||!(!t.text||!n.test(t.text)))}}(e),this._refreshAllAnnotations()):this._commentFilter&&(this._commentFilter=null,this._refreshAllAnnotations())},A.prototype.selectAnnotation=function(e,n,o){var r="string"==typeof e?this._owner.getAnnotationById(e):e;if(!r)return t.logger.error("select annotation: null annotation");var i=this._findAnnotationUi(r.id);return i?(n=Boolean(n),this._selectAnnotationDispatcher(i,r,n,o)):t.logger.error("select annotation: no ui for "+r.id)},A.prototype._updateComment=function(t,n,o){if(t&&n){var r=this._findCommentUi(t.id,n.id);r&&(o=o||this._owner&&this._owner.getCommentStatus(t.id,n.id),this._populateComment(r,n,t.id,o),this.trigger(A.Events.COMMENT_UI_CHANGED,{$node:e(r),ui:this,id:t.id}))}},A.prototype._selectAnnotationDispatcher=function(t,e,n,o){this._alignComments?this._selectAnnotationWithAlignment(e,t,n,o):this._oldSelectAnnotation(e,t,n)},A.prototype._selectAnnotationWithAlignment=function(t,n,o,r){var i=this;if(!(n.attr("data-selected")===String(o))){var a=null;if(r=r||{},o){var s=void 0,l=void 0,u=void 0,c=void 0,f=void 0;this._preventScroll&&(c=(u=n[0].ownerDocument)&&(u.defaultView||u.parentWindow))&&(s=(f=e(c)).scrollLeft(),l=f.scrollTop()),!1===r.focus||n.is(":focus")||this._handleAnnotationFocus(n),"number"==typeof l&&c.scrollTo(s,l)}else if(n.find(".comment-ui").attr("data-selected","false"),n.find(".comment-ui[data-comment-insert='true']").each((function(t,n){i._onAddCommentText(e(n))})),n.find(".comment-ui[data-comment-edit=true]").each((function(t,n){i._onCancelCommentText(e(n))})),this._blurAware&&t){var p=t.id;a=function(){i._owner.compactAnnotation(p)}}this._setAnnotationUISelectedState(n,o,r),this.trigger(A.Events.ANNOTATION_UI_SELECTED,{isSelected:o,$node:n,ui:this,id:n.attr(d)}),a&&a.call(this)}},A.prototype._oldSelectAnnotation=function(t,n,o){var r="true"===n.attr("data-selected"),i=this;if(n.attr("data-selected",String(Boolean(o))),o){var a,s,l,u,c;if(this._preventScroll&&(u=(l=n[0].ownerDocument)&&(l.defaultView||l.parentWindow))&&(a=(c=e(u)).scrollLeft(),s=c.scrollTop()),n.focus(),this._handleAnnotationFocus(n),!r)n.find(".comment-ui").length;"number"==typeof s&&u.scrollTo(a,s),this.trigger(A.Events.ANNOTATION_UI_SELECTED,{isSelected:!0,$node:n,ui:this,id:n.attr(d)})}else n.find(".comment-ui").attr("data-selected","false"),n.find(".comment-ui[data-comment-insert=true]").each((function(t,n){i._onAddCommentText(e(n))})),n.find(".comment-ui[data-comment-edit=true]").each((function(t,n){i._onCancelCommentText(e(n))})),this.trigger(A.Events.ANNOTATION_UI_SELECTED,{isSelected:!1,$node:n,ui:this,id:n.attr(d)}),this._blurAware&&this._owner.compactAnnotation(t.id)},A.prototype._setAnnotationUISelectedState=function(t,e,n){var o=String(Boolean(e)),r=this._findAnnotationUIWrapper(t);if(r.attr("data-selected")!==o){var i=r.next(".annotation-ui-wrapper"),a=r.prev(".annotation-ui-wrapper");e?this._setAlignedAnnotationPosition(t,r,n&&n.node):(r.blur(),this._alignCommentTip(r,0),r.css({top:"",left:"",width:""}),i.css("margin-top",""),a.css("margin-bottom",""),i.css("margin-bottom",""),a.css("margin-top",""),t.attr("data-selected",o),r.attr("data-selected",o))}},A.prototype._setAlignedAnnotationPosition=function(e,n,o){var r,i,a=null===(r=this._uiGenerator)||void 0===r?void 0:r.$container,s=n.next(".annotation-ui-wrapper"),l=n.prev(".annotation-ui-wrapper"),u=n.height(),c=n.width();s.length?s.css("margin-top",Math.round(u)):l.length&&l.css("margin-bottom",Math.round(u)),e.attr("data-selected","true"),n.attr("data-selected","true");var d=t.lanceUtils.boundsProcessor.getElementBoundingBox(n[0]),f=t.lanceUtils.boundsProcessor.getElementRects(a[0]),p=parseInt(n.css("top")),h=null;if(o){h=t.lanceUtils.boundsProcessor.getElementBoundingBox(o);var m=d.top-h.top;p-=m,d=t.lanceUtils.boundsProcessor.offsetRect(d,0,-m)}if(f.visible){var g=t.lanceUtils.boundsProcessor.getRectsShiftDelta(d,f.visible);p+=g.y,d=t.lanceUtils.boundsProcessor.offsetRect(d,0,g.y)}var v=null===(i=n[0].ownerDocument)||void 0===i?void 0:i.defaultView,y=t.lanceUtils.boundsProcessor.getElementClampInWindowValues({rect:d,margin:this._options.verticalMargin,win:v});if(p+=y.y,d=t.lanceUtils.boundsProcessor.offsetRect(d,0,y.y),h){var A=h.top-d.top;this._alignCommentTip(n,A)}n.css({top:Math.round(p),width:Math.round(c)})},A.prototype._alignCommentTip=function(t,e){var n=t.find(".annotation-tip");if(n.css("top",""),n.length&&e>5||e<-5){var o=t.height(),r=n.height();r&&!isNaN(r)||(r=parseInt(n.css("height")));var i=Math.max(10,Math.min(e,o-r-25));n.css("top",i+"px")}},A.prototype._reload=function(){var t=this._owner;if(this._onReset(),t)for(var e=void 0,n=0,o=t.countAnnotations();n<o;++n)e=t.getAnnotationByIndex(n),this.addAnnotation(e,null)},A.prototype._selectComment=function(t,e,n,o){if(t&&e){var r=this._findCommentUi(t.id,e.id);if(r){if(n=Boolean(n),o=Boolean(o),n){var i=this._findAnnotationUi(t.id);this._selectCommentNode(i.find(".comment-ui[data-selected='true']"),{select:!1})}this._selectCommentNode(r,{select:n,edit:o})}}},A.prototype._upgradeToolbarConfig=function(e){return e?{buttons:e.buttons||y.slice(),commands:t.utils.array.merge(v,e.commands,"command",!0)}:{buttons:y.slice(),commands:v.slice()}},A.prototype._selectCommentNode=function(e,n){var o=this;if((e=t.utils.dom.toJQuery(e)).attr("data-selected",n.select),n.select&&n.edit&&this._isEnabled){e.attr({"data-comment-insert":!0,"data-comment-edit":!1});var r=e.find(".comment-reply-text");c(r)&&l(r,!1,this.textareaOptions),r.focus(),setTimeout((function(){r.focus(),r.select()}),20),this._blurAware&&(setTimeout((function(){r.on("blur.ANNOTATION_UI_FOCUS_EVENTS",(function(n){t.utils.dom.isDescendantOf(n.relatedTarget,e[0])||o.commentBlurDebouncer.add(r,!1)}))}),100),r.on("focus.ANNOTATION_UI_FOCUS_EVENTS",(function(){o.commentBlurDebouncer.remove(r)}))),l(e.find(".comment-text"),!0,this.textareaOptions)}},A.prototype._findAnnotationUIWrapper=function(t){if(!t)return null;var e;if(e="string"==typeof t?this._findAnnotationUi(t):t){var n=e.parents(".annotation-ui-wrapper");if(n.length)return n}return e},A.prototype._findAnnotationUi=function(t){if(!t)return null;var e=this._uiGenerator.$container.find(".annotation-ui[data-annotation-id='"+t+"']");return e&&e.length?e:null},A.prototype._findCommentUi=function(t,e){return t&&e&&this._uiGenerator.$container.find("["+d+"='"+t+"'][data-comment-id='"+e+"']")[0]||null},A.prototype._initializeCommentNode=function(t){var e=this,n=t.find(".comment-text");return n.off(".lance-ui"),n.on("keydown.lance-ui",(function(n){o(n)&&e._onRevertCommentText(t,!1)})),l(n,!0,this.textareaOptions),(n=t.find(".comment-reply-text")).off(".lance-ui"),n.on("keydown.lance-ui",(function(n){o(n)&&e._onCancelCommentText(t,!0)})),u(n,this.textareaOptions),t},A.prototype._populateComment=function(o,r,i,a){var s=t.utils.dom.toJQuery(o),l=r.getUserPicture();s.find(".comment-user-name").html(r.userName),s.find(".comment-time-stamp").html(t.lanceUtils.formatDate(r.time,this._commentTimeFormat,this._getLocalizedString)),s.find(".comment-avatar").toggleClass("no-image",!l).css("background-image",l?"url("+l+")":"");var u=Boolean(!this._commentFilter||this._commentFilter(r));if(s.attr({"data-comment-filtered":u}),!a)return u;var c=Boolean(a.isSelected);s.attr({"data-comment-edit":s.attr("data-comment-edit")||"false","data-comment-insert":s.attr("data-comment-insert")||"false","data-comment-id":r.id,"data-annotation-id":i,"data-comment-first":Boolean(a.isFirst),"data-comment-last":Boolean(a.isLast),"data-comment-new":Boolean(a.isNew),"data-comment-owner":Boolean(a.isOwnerComment),"data-comment-can-edit":Boolean(a.canEdit),"data-comment-can-delete":Boolean(a.canDelete),"data-comment-can-resolve":Boolean(a.canResolve),"data-comment-can-reopen":Boolean(a.canReopen)}),n(s.find("[data-lance-command='comment-reopen']"),!a.isFirst||!a.canReopen),n(s.find("[data-lance-command='comment-resolve']"),!a.isFirst||!a.canResolve),n(s.find("[data-lance-command='comment-edit']"),!a.canEdit),n(s.find("[data-lance-command='comment-delete']"),!a.canDelete),Object.keys(a.custom).forEach((function(t){n(s.find("[data-lance-command='"+t+"']"),!a.custom[t])}));var d=s.find(".comment-text");d.val()!=r.text&&d.val(r.text).trigger("propertychange"),(d=s.find(".comment-reply-text")).attr("placeholder",this._getLocalizedString(a.isNew?"enter your comment":"reply to this comment")),this._selectCommentNode(s,{select:c});return e&&e.menu&&s.find(".comment-edit-menu-list").menu(),u},A.prototype._refreshAnnotation=function(t,e){var n=e.id;t.attr({"data-annotation-id":n,"data-selected":e.isSelected(),"data-annotation-resolved":e.isResolved()?"true":null}),this._copyAnnotationAttributes(e,t);for(var o=t.find(".annotation-comments"),r=[],i=null,a=0,s=e.count();a<s;++a){var l=e.getCommentByIndex(a),u=this._owner.getCommentStatus(n,l.id),c=o.find("[data-comment-id='"+l.id+"']");this._populateComment(c,l,n,u)?i=c:r.push(l)}this._updateFilteredUI(t,r,i),this._updateSearchUI()},A.prototype._populateAnnotation=function(t,e){var n=e.id;t.attr({"data-annotation-id":n,"data-selected":e.isSelected(),"data-annotation-resolved":e.isResolved()?"true":null}),this._copyAnnotationAttributes(e,t);var o=t.find(".comment-ui");o.find("textarea,a,button").unbind(),o.unbind(),o.remove();for(var r=t.find(".annotation-comments"),i=[],a=null,s=0,l=e.count();s<l;++s){var u=e.getCommentByIndex(s),c=this._owner.getCommentStatus(n,u.id),d=this._getCommentTemplate(),f=void 0;this._initializeCommentNode(d),this._populateComment(d,u,n,c)?a=d:i.push(u),r.append(d),this._autogrowOptions&&(f=d.find("textarea.autogrow-textarea")).autoGrow&&f.autoGrow(this._autogrowOptions),this.trigger(A.Events.COMMENT_UI_CREATED,{$node:d,ui:this,commentId:u.id,annotationId:n})}this._updateFilteredUI(t,i,a),this._updateSearchUI(),this.trigger(A.Events.ANNOTATION_UI_CHANGED,{$node:t,ui:this,id:n})},A.prototype._copyAnnotationAttributes=function(t,e){e.attr(t.attributes)},A.prototype._updateFilteredUI=function(t,e,n){var o=t.find(".annotation-filtered");o.attr("data-filtered-count",e.length);for(var r={},i=0,a=e;i<a.length;i++){r[a[i].userName]=!0}var s=[String(e.length),this._getLocalizedString("comments_hidden"),",",this._getLocalizedString("by"),Object.keys(r).join(", ")].join(" ");o.find(".annotation-filtered-caption").text(s),null==n||n.attr("data-comment-last","true")},A.prototype._updateSearchUI=function(){var t;if(this._uiGenerator){var e=this._options.searchComments&&Boolean((null===(t=this._owner)||void 0===t?void 0:t.countAnnotations())>0);this._uiGenerator.$searchUI.toggle(e)}},A.prototype._handleAnnotationFocus=function(t){this.nodeFocusDebouncer.add(t,!0)},A.prototype._trySelectComment=function(t,e){if((this._handleAnnotationFocus(t),this._owner)&&("true"!==t.attr("data-selected")||e&&c(t.find(".comment-reply-text")))){var n=t.attr(d),o=t.attr("data-comment-id");this._owner.selectComment(n,o,!0,e)}},A.prototype._tryEditComment=function(t){if(this._owner&&this._isEnabled){var e=t.attr(d),n=t.attr("data-comment-id");this._trySelectComment(t);var o=this._owner.getCommentStatus(e,n);if(o.isSelected&&o.canEdit){var r=t.find(".comment-reply-text");u(r,this.textareaOptions),t.attr("data-comment-insert","false"),r=t.find(".comment-text"),t.attr("data-comment-edit","true"),l(r,!1,this.textareaOptions),r.focus()}}},A.prototype._onDeleteComment=function(e){if(this._owner&&this._isEnabled){var n=e.attr(d),o=e.attr("data-comment-id"),r=this._owner.getCommentStatus(n,o),i=r&&r.isFirst||!1,s=this._getLocalizedString(i?"delete this annotation?":"delete this comment?"),l=this._findAnnotationUi(n),u=i?l:e,c=function(){i?f.deleteAnnotation(n):f.deleteComment(n,o)};t.utils.scrollToElement(u);var f=this._owner,p=(this._confirmCallback||a)({message:s,annotation:this._owner.getAnnotationById(n),commentId:o});if(!p)return;"function"==typeof p.then?p.then((function(t){t&&c()})):c()}},A.prototype._localizeNode=function(t){var e,n,o=this,r=t&&t.nodeType,i=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o._getLocalizedString(e[0])};if(1===r){if((e=t.hasAttributes()&&t.attributes)&&e.length)for(var a=0,s=e.length;a<s;++a)(n=e[a].value)&&h.test(String(n))&&(n=String(n).replace(h,i))&&t.setAttribute(e[a].name.replace(m,""),n);for(var l=t.firstChild;l;l=l.nextSibling)this._localizeNode(l)}else 3===r&&t.nodeValue&&h.test(t.nodeValue)&&(t.nodeValue=t.nodeValue.replace(h,i))},A.prototype._getNewAnnotationNode=function(){var t=this,n=this.$annotationTemplate.clone();return this._templateClass&&n.removeClass(this._templateClass),this._localizeNode(n[0]),n.removeClass(this._templateClass),n.on("click.lance-ui","[data-lance-command]",(function(e){t._onCommandEvent(e)})),n.on("keydown.lance-ui",(function(n){if(t._owner&&o(n)){var r=e(n.currentTarget),i=r.attr(d);if(!i){var a=r.find(["[",d,"]"].join(""))[0];i=a&&a.getAttribute(d)}i&&t._owner.selectAnnotation({id:i,select:!1,hostData:{compact:!0},isDeselecting:!0})}})),n},A.prototype._bindFilterOverrideHandlers=function(t,n){var o=this,r=t.find(".annotation-filtered details");return n?r.on("toggle",(function(t){var n=e(t.currentTarget),r=n.parents(".annotation-ui"),i=n.attr("open");o._toggleFilterOverride(r,null!=i)})):r.off(),t},A.prototype._toggleFilterOverride=function(t,e){return t.find(".annotation-filtered details").attr("open",e?"open":null),t.attr("data-lance-filter-override",String(e))},A.prototype._toggleFilterOverrideForAll=function(t){var n,o=this,r=null===(n=this._uiGenerator)||void 0===n?void 0:n.$container;r&&r.find(".annotation-ui").each((function(n,r){o._toggleFilterOverride(e(r),t)}))},A.prototype._bindFocusHandlers=function(n){var o=this;n.off(".ANNOTATION_UI_FOCUS_EVENTS"),this._blurAware&&n.on("focusout.ANNOTATION_UI_FOCUS_EVENTS",(function(i){if(!t.utils.dom.isDescendantOf(i.relatedTarget,i.currentTarget)&&!t.utils.dom.matchesSelector(i.target,"button,a")){var a=n.attr(d);r(e(i.relatedTarget),"[data-annotation-id='"+a+"']")||o.nodeFocusDebouncer.add(n,!1)}})),n.on("focusin.ANNOTATION_UI_FOCUS_EVENTS",(function(){o.nodeFocusDebouncer.add(n,!0)}))},A.prototype._getCommentTemplate=function(){var t=this,e=this.$commentTemplate.clone();this._localizeNode(e[0]),e.addClass("comment-ui"),this._templateClass&&e.removeClass(this._templateClass),e.find(".comment-text").click((function(){t._trySelectComment(e,!1)})),e.find(".comment-reply-text").click((function(){t._trySelectComment(e,!0)})).on("input propertychange",(function(){t._onReplyChanged(e)}));var n,o,r=A.commandMap;for(var i in r)r.hasOwnProperty(i)&&(n=i,o=r[i],e.find(n+":not[data-lance-command]").attr("data-lance-command",o));return e.click((function(){t._trySelectComment(e)})),e},A.prototype._onCommandEvent=function(n){var o=n.currentTarget,r=o&&o.getAttribute&&o.getAttribute("data-lance-command");if(r){var i=e(o).closest("[data-comment-id]"),a=i.attr("data-comment-id"),s=i.attr(d),l={command:r,$node:i,ui:this,annotationId:s,commentId:a,cancel:!1,manager:this._owner};if(this.trigger(A.Events.COMMENT_UI_BEFORE_COMMAND,l),l.cancel)return t.logger.debug("UI Command "+r+" canceled by event handler");if(!this._commandMap[r])return t.logger.warn("Unhandled command",r);n.preventDefault(),this._commandMap[r].call(this,n,i),l={command:r,$node:i,ui:this,annotationId:s,commentId:a},this.trigger(A.Events.COMMENT_UI_AFTER_COMMAND,l)}else t.logger.warn("Lance onCommandEvent: missing command")},A.prototype._createCommandMap=function(){var t=this,e={"comment-resolve":function(e,n){t._resolveAnnotationByCommentNode(n,!0)},"comment-reopen":function(e,n){t._resolveAnnotationByCommentNode(n,!1)},"comment-open":function(e,n){t._setAnnotationAttribute(n,"data-closed",!1)},"reply-done":null,"comment-reply-ok":function(e,n){var o=t.getCommentId(n);n.find(".comment-reply-text").val()?(t._onAddCommentText(n),t.trigger(A.Events.COMMENT_UI_DONE,{$node:n,ui:t,id:o.annotationId}),t._owner.doneEditing({comment:o,canceled:!1,mode:"comment"})):t._onCancelCommentText(n,!0)},"comment-reply-cancel":function(e,n){t._onCancelCommentText(n,!0)},"comment-cancel":null,"open-comment":function(e,n){t._setAnnotationAttribute(n,"data-closed",!1)},"comment-open-menu":function(e,n){t._onMenuIconClicked(n)},"close-comment":function(e,n){t._setAnnotationAttribute(n,"data-closed",!0)},"comment-edit-menu":function(e,n){t._onMenuIconClicked(n)},"comment-menu-item":function(e,n){t._closeCommentMenu(n)},"comment-submit":function(e,n){t._onAddCommentText(n)},"comment-edit-ok":function(e,n){t._onSaveCommentText(n)},"comment-edit-cancel":function(e,n){t._onRevertCommentText(n)},"comment-edit":function(e,n){t._tryEditComment(n)},"comment-delete":function(e,n){t._onDeleteComment(n)}};return e["reply-done"]=e["comment-reply-ok"],e["comment-cancel"]=e["comment-reply-cancel"],e},A.prototype._openCommentMenu=function(t){var e=t.find(".comment-edit-menu-icon"),n=t.find(".comment-edit-menu-list");e.attr("class","comment-edit-menu-icon arrow-right"),e.attr("data-menu-open","true"),n.show()},A.prototype._setAnnotationAttribute=function(t,e,n){var o=t.attr(d);this._owner.setAttribute(o,e,n)},A.prototype._closeCommentMenu=function(t){var e=t.find(".comment-edit-menu-icon"),n=t.find(".comment-edit-menu-list");e.attr("class","comment-edit-menu-icon arrow-down"),e.attr("data-menu-open","false"),n.hide()},A.prototype._onMenuIconClicked=function(t){"true"===t.find(".comment-edit-menu-icon").attr("data-menu-open")?this._closeCommentMenu(t):(this._closeCommentMenu(e('[data-menu-open="true"]').parentsUntil(".comment-ui")),this._openCommentMenu(t))},A.prototype._resolveAnnotationByCommentNode=function(t,e){if(this._owner&&this._isEnabled){var n=t.attr("data-comment-id"),o=t.attr(d);this._owner.resolveAnnotation(o,n,e)}},A.prototype._onCommentFocusChanged=function(n,o){var r=this.findCommentParent(n,!0);if(r){var i=e(r),a=i.attr(d),s=this._owner.getAnnotationById(a);if(s){if(o&&s.isSelected())e.trim(n.val())?this._onAddCommentText(i):this._onCancelCommentText(i,!0)}else t.logger.warn("comment focus changed: no corresponding annotation on owner")}else t.logger.warn("comment focus changed: missing parent with comment id")},A.prototype._onAddCommentText=function(t){var n=t.find(".comment-reply-text");if(this.commentBlurDebouncer.remove(n),this.nodeFocusDebouncer.remove(t),this._owner&&this._isEnabled&&!c(n)){var o=t.attr("data-comment-id"),r=t.attr(d),i=n.val()||"",a=e.trim(i);l(n,!0,this.textareaOptions),n.val(""),t.attr("data-comment-insert","false"),a.length&&this._owner.addComment(r,o,i)}},A.prototype._onCancelCommentText=function(t,n){var o=t.find(".comment-reply-text");if(this.commentBlurDebouncer.remove(o),this.nodeFocusDebouncer.remove(t),this._owner&&this._isEnabled){var r=this.getCommentId(t),i=e.trim(o.val()),a=this._owner.getComment(r.annotationId,r.id);if(o.val(""),a&&i!==a.comment.text){this._owner.revertComment(r.annotationId,r.id,!0);var s=this._owner.getComment(r.annotationId,r.id);this._onCommentChanged(s)}n&&this._owner.selectAnnotation({id:r.annotationId,select:!1,hostData:{compact:!0},isDeselecting:!0}),this._owner.doneEditing({comment:r,canceled:!0,mode:"comment"})}},A.prototype._onSaveCommentText=function(t){var e=t.find(".comment-text");if(this._isEnabled&&!c(e)){if(l(e,!0,this.textareaOptions),t.attr("data-comment-edit","false"),this._owner){var n=this.getCommentId(t);this._owner.setCommentText(n.annotationId,n.id,e.val()),this._owner.doneEditing({comment:n,canceled:!1,mode:"comment"})}this.trigger(A.Events.COMMENT_UI_DONE,{$node:t,ui:this,id:t.attr(d)})}},A.prototype._onNodeFocusChanged=function(n,o){if(!o){var r=e(this.findAnnotationParent(n)),i=r.attr(d),a=i&&this._owner&&this._owner.getAnnotationById(i);return a?a.isSelected()?void this._owner.selectAnnotation({id:i,select:!1,hostData:{compact:!0},isDeselecting:!0}):t.logger.debug("onNodeFocusChanged: ignoring deselected annotation"):(this._selectAnnotationDispatcher(r,a,!1,null),t.logger.debug("onNodeFocusChanged: tried to deselect ui with no annotation"))}},A.prototype._onReplyChanged=function(t){var e=Boolean(t.find(".comment-reply-text").val());n(t.find(".comment-ok"),!e)},A.prototype._onRevertCommentText=function(t,e,n){if(this._isEnabled&&(t.attr("data-comment-edit","false"),l(t.find(".comment-text"),!0,this.textareaOptions),this._owner)){var o=this.getCommentId(t);this._owner.revertComment(o.annotationId,o.id,e);var r=this._owner.getComment(o.annotationId,o.id);if(this._onCommentChanged(r),n){var i=t.attr(d);i&&this._owner.selectAnnotation({id:i,select:!1,hostData:{compact:!0},isDeselecting:!0})}this._owner.doneEditing({comment:o,canceled:!0,mode:"comment"})}},A.prototype._onAnnotationChanged=function(t){this.updateAnnotation(t&&t.annotation,!0)},A.prototype._onAnnotationSelected=function(t){t&&this.selectAnnotation(t.annotation,t.isSelected,t.hostData)},A.prototype._onAnnotationResolved=function(t){this.updateAnnotation(t&&t.annotation,!1)},A.prototype._onAnnotationUpdated=function(t){this.updateAnnotation(t&&t.annotation,!1)},A.prototype._onAnnotationDeleted=function(t){this.removeAnnotation(t&&t.id),this._setUpdateInterval()},A.prototype._onAnnotationCreated=function(t){t&&(this.addAnnotation(t.annotation,t.before),this._setUpdateInterval())},A.prototype._onCommentSelected=function(t){t&&this._selectComment(t.annotation,t.comment,t.isSelected,t.isEdit)},A.prototype._onAnnotationAttributeChanged=function(t){var e=this._findAnnotationUi(t.annotation.id);this._copyAnnotationAttributes(t.annotation,e)},A.prototype._onCommentChanged=function(t){t&&this._updateComment(t.annotation,t.comment,t.status)},A.prototype._onCommentAdded=function(t){t&&this._onAnnotationChanged(t)},A.prototype._onCommentDeleted=function(t){this.updateAnnotation(t&&t.annotation,!0)},A.prototype._onReset=function(){var t=this._uiGenerator.$container;t.find("textarea,a,button").unbind(),t.find(".annotation-ui").remove(),t.find(".annotation-ui-wrapper").remove(),this._updateSearchUI()},A.prototype._onReload=function(){this._reload()},A.prototype._onEnabledChanged=function(t){var e=t&&t.isEnabled;this._setEnabled(e)},A.prototype._onRenumbered=function(e){var n=this,o=e&&e.sequence;o&&o.length&&o.forEach((function(e,o){var r=n._findAnnotationUi(e),i=n._findAnnotationUIWrapper(r);r&&(r.attr(t.lancePluginUtils.pluginAttributes.annotationSequence,o),i.attr(t.lancePluginUtils.pluginAttributes.annotationSequence,o),n._uiGenerator.setAnnotationNodeIndex(i,o))}))},A.prototype._setEnabled=function(t){this._isEnabled=Boolean(t),this._isEnabled||l(this._uiGenerator.$container.find("textarea"),!0,this.textareaOptions),n(this._uiGenerator.$container,!this._isEnabled)},A.prototype._setUpdateInterval=function(){this._autoUpdate&&this._owner&&this._owner.countAnnotations()?this._updateInterval=this._updateInterval||setInterval(this._refreshAllAnnotations.bind(this),6e4):this._updateInterval&&(clearInterval(this._updateInterval),this._updateInterval=null)},A.prototype._refreshAllAnnotations=function(){for(var t,e,n,o=null===(t=this._owner)||void 0===t?void 0:t.countAnnotations(),r=0;r<o;++r)e=this._owner.getAnnotationByIndex(r),(n=this._findAnnotationUi(e.id))&&this._refreshAnnotation(n,e)},A.prototype._bindSearchUI=function(){var t=this,n=this._uiGenerator.$searchUI,o=n.find("input.lance-comment-search");!1!==this._options.searchComments?(o.attr("placeholder",this._getLocalizedString("filter_by")).on("input",(function(n){var o=e(n.currentTarget);t.setSearchTerm(o.val())})),n.find(".cancel-search").on("click",(function(e){t._uiGenerator.$searchUI.find("input.lance-comment-search").val(""),t.setSearchTerm("")}))):o.hide()},A.prototype._validateOptions=function(n){return{owner:n.owner||null,container:t.utils.dom.toJQuery(n.container),commentTimeFormat:n.commentTimeFormat||null,autoUpdate:!1!==n.autoUpdate,generateUI:!1!==n.generateUI,generateCSS:n.generateUI?!1!==n.generateCSS:!0===n.generateCSS,alignCommentsToEditor:n.generateUI?!1!==n.alignCommentsToEditor:!0===n.alignCommentsToEditor,styleUrls:n.styleUrls||(n.generateUI?null:[]),threadTemplate:n.threadTemplate||n.annotationTemplate||null,commentTemplate:n.commentTemplate&&t.utils.dom.toJQuery(n.commentTemplate)||null,searchComments:!1!==n.searchComments,templateClass:n.templateClass||"lance-tmpl",autoGrow:!1===n.autoGrow?null:e.extend(!0,{},p,n.autoGrow||{}),blurAware:!1!==n.blurAware,autoScroll:!1!==n.autoScroll,textareaOptions:n.textareaOptions&&e.extend(!0,{},n.textareaOptions)||null,toolbar:this._upgradeToolbarConfig(n.toolbar),verticalMargin:function(e,n){if(void 0===e)return 30;var o=parseInt(e);return isNaN(o)||o<0||o>400?(t.logger.warn("Illegal value for verticalMargin "+e),30):o}(n.verticalMargin)}},A.Events={ANNOTATION_UI_CREATED:"annotationui:created",ANNOTATION_UI_REMOVED:"annotationui:removed",ANNOTATION_UI_SELECTED:"annotationui:selected",ANNOTATION_UI_CHANGED:"annotationui:changed",COMMENT_UI_CREATED:"commentui:created",COMMENT_UI_CHANGED:"commentui:changed",COMMENT_UI_DONE:"commentui:done",COMMENT_UI_REMOVED:"commentui:removed",COMMENT_UI_BEFORE_COMMAND:"commentui:before-command",COMMENT_UI_AFTER_COMMAND:"commentui:after-command"},A.Commands={SUBMIT:"comment-submit",REPLY_DONE:"comment-reply-ok",COMMENT_CANCEL:"comment-cancel",COMMENT_OPEN:"open-comment",COMMENT_CLOSE:"close-comment",COMMENT_MENU:"comment-open-menu",COMMENT_MENU_ITEM:"comment-menu-item",COMMENT_EDIT_OK:"comment-edit-ok",COMMENT_EDIT_CANCEL:"comment-edit-cancel",COMMENT_EDIT:"comment-edit",COMMENT_REOPEN:"comment-reopen",COMMENT_RESOLVE:"comment-resolve",COMMENT_DELETE:"comment-delete"},A.commandMap={".comment-ok":A.Commands.SUBMIT,".comment-new-done":A.Commands.REPLY_DONE,".comment-cancel":A.Commands.COMMENT_CANCEL,".comment-open":A.Commands.COMMENT_OPEN,".comment-close":A.Commands.COMMENT_CLOSE,".comment-edit-menu-icon":A.Commands.COMMENT_MENU,".comment-edit-menu-list a":A.Commands.COMMENT_MENU_ITEM,".comment-edit-ok":A.Commands.COMMENT_EDIT_OK,".comment-edit-cancel":A.Commands.COMMENT_EDIT_CANCEL,".comment-edit":A.Commands.COMMENT_EDIT,".comment-resolve":A.Commands.COMMENT_RESOLVE,".comment-delete":A.Commands.COMMENT_DELETE},A}();t.AnnotationsUI=A}(window.LANCE),Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=t.$;function n(e){if(!e)return t.$("");var n=e;return n instanceof t.$||(n=t.$(e)),n.length&&(n=n.eq(0)),n}var o=function(){function o(){this._bottomMarker=null,t.mixinEvents(this)}return o.prototype.init=function(r,i){var a=this;if(this.$container)throw new Error("UI Generator inited more than once");if(i.generate&&!i.owner)throw new Error("UIGenerator::generate: missing owner");var s=n(r);if(!s||!s.length)throw new Error("UIGenerator::generate: selector does not point to a valid element");var l=s[0].ownerDocument,u=i.templates||{},c=i.styleUrls||[i.generateCSS&&"css/comments-ui.css"],d={comment:u.comment?this._finalizeTemplate(l,n(u.comment),i):this._finalizeTemplate(l,e('\n<div class="comment-ui">\n\t<div class="comment-top">\n\t\t<div class="comment-avatar"></div>\n\t\t<div class="comment-user-details">\n\t\t\t<div class="comment-user-name"></div>\n\t\t\t<div class="comment-time-stamp"></div>\n\t\t</div>\n\t\t<div class="comment-edit-links">\n\t\t</div>\n\t</div>\t\n\t<div class="comment-body">\n\t\t<textarea class="comment-text autogrow-textarea" rows="1" placeholder="[[enter comment]]" readonly="readonly"></textarea>\n\t\t<div class="comment-edit-controls">\n\t\t\t<button class="lance-ui-btn" data-title="[[save]]" data-lance-command="comment-edit-ok"></button>\n\t\t\t<button class="lance-ui-btn" data-lance-command="comment-edit-cancel" data-title="[[cancel]]"></button>\n\t\t</div>\n\t</div>\n\t<textarea class="comment-reply-text autogrow-textarea" rows="1" placeholder="[[reply to this comment]]" readonly="readonly"></textarea>\n\t<div class="comment-controls">\n\t\t<button class="lance-ui-btn" data-lance-command="comment-reply-ok" data-title="[[comment]]"></button>\n\t\t<button class="lance-ui-btn" data-lance-command="comment-reply-cancel" data-title="[[cancel]]"></button>\n\t</div>\n</div>'),i),thread:u.thread?this._finalizeTemplate(l,n(u.thread),i):this._finalizeTemplate(l,e('<div class="annotation-ui-wrapper">\n<div class="annotation-ui" tabindex="0" data-lance-filter-override="false">\n\t<div class="annotation-filtered" data-filtered-count="0">\n\t\t<details><summary><span class="annotation-filtered-caption"></span></summary></details>\n\t</div>\n\t<div class="annotation-comments"></div>\n\t\t<div class="annotation-tip"></div>\n\t</div>\n</div>'),i)};if(!d.comment||!d.thread)throw new Error("Missing comment templates, values were "+u.comment+" "+u.thread);if(this._container=!1===i.generate?s:e('<div class="lance-ui-container">\n<div class="comments-search-container">\n\t<input class="lance-comment-search" type="text" maxlength="12" placeholder="Filter by text or author"/>\n\t<span class="cancel-search">&times;</span>\n</div>\t\n<div class="lance-content-scroller">\n<div class="lance-top-spacer"></div>\n<div class="lance-bottom-spacer"></div>\n</div></div>'),this._annotationCls=d.thread.hasClass("annotation-ui-wrapper")?"annotation-ui-wrapper":"annotation-ui",!this._container.is(s)){s.append(this._container),this._bottomMarker=s.find(".lance-bottom-spacer");var f=s.find(".lance-content-scroller");f.length&&(this._container=f)}if(this._searchUI=s.find(".comments-search-container"),this._container.addClass("lance-annotations-container"),this.validateTemplates(d),this._templates=d,new t.utils.CSSLoader(l).loadCSSString("button[disabled] svg .loopindex-svg-icon {\n\t\t\t\topacity: 0.5;\n\t\t\t\tfill: #BBB;\n\t\t\t}"),c.length>0){var p=function(e,n){t.logger.debug("css "+e+" loaded "+n.loaded);var r=c.firstIndexOf_li((function(t){return Boolean(t&&e.indexOf(t)>=0)}));r>=0?c.splice(r,1):t.logger.warn("callback for unknown style sheet "+e),c.length<1&&a.trigger(o.EVENT_CSS_LOADED,{loaded:!0})},h=new t.utils.CSSLoader(l);c.forEach((function(t){t=i.owner.resolvePath(t),h.loadCSS([t],null,p)}))}else setTimeout((function(){a.trigger(o.EVENT_CSS_LOADED,{loaded:!0})}),1)},Object.defineProperty(o.prototype,"templates",{get:function(){return this._templates},enumerable:!1,configurable:!0}),o.prototype.addAnnotationNode=function(t,n){if(!e(t).hasClass(this._annotationCls))throw new Error("Lance UI: Cannot add thread without the thread class "+this._annotationCls);return n?n.parentNode.insertBefore(t,n):this._bottomMarker?this._bottomMarker.before(t):this._container.append(t),t},o.prototype.setAnnotationNodeIndex=function(e,n){if(n<0)throw new Error("Lance UI: illegal annotation index "+n);if(!e.hasClass(this._annotationCls))throw new Error("setAnnotationNodeIndex: illegal node");if(this.$container[0].contains(e[0])){var o=this.$container.find("."+this._annotationCls).toArray(),r=o[n];if(n>o.length)throw new Error("Lance UI: index "+n+" greater than max index "+o.length);r!==e[0]&&(e.detach(),this.addAnnotationNode(e[0],r))}else t.logger.warn("setAnnotationNodeIndex: not a descendent of the container")},Object.defineProperty(o.prototype,"$searchUI",{get:function(){return this._searchUI},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"$container",{get:function(){return this._container},enumerable:!1,configurable:!0}),o.prototype._finalizeTemplate=function(n,o,r){var i=new t.utils.CSSLoader(n);r.toolbar.commands.forEach((function(t){if(t.iconUrl){var e=".lance-ui-btn[data-lance-command='"+t.command+"']";i.addRule(e+" .icon",{"background-image":"url("+t.iconUrl+")"})}}));var a=o.find(".comment-edit-links");r.toolbar.buttons.forEach((function(e){var o=t.$(n.createElement("button"));o.addClass("lance-ui-btn").attr({"data-lance-show":e.display||"show","data-lance-command":e.command}),a.append(o)}));var s=t.utils.strings.toMap(r.toolbar.commands,"command","*");return o.find(".lance-ui-btn[data-lance-command]").each((function(o,r){var i=e(r),a=i.attr("data-lance-command"),l=a&&s[a];if(l){if(l.iconUrl){i.find("span.icon").remove();var u=t.$(n.createElement("span"));u.addClass("icon"),i.append(u)}if(l.label){t.utils.dom.forAllTextChildren(r,(function(t){return e(t).remove()}));var c=n.createElement("label");c.innerText=l.label,i.append(c)}l.title&&i.attr("data-title",l.title)}else t.logger.warn("no configuration for lance toolbar button",a)})),o},o.prototype.validateTemplates=function(t){if(!t.thread||!t.thread.length)throw new Error("UIGenerator: Bad or missing thread template");if(!t.comment||!t.thread)throw new Error("UIGenerator: Bad or missing comment template")},o.EVENT_CSS_LOADED="css-loaded",o}();t.UIGenerator=o}(window.LANCE)}()}]);

/*eslint-enable*/